"use strict";var ethereumjs_trie=(()=>{var id=Object.create;var Ys=Object.defineProperty;var sd=Object.getOwnPropertyDescriptor;var od=Object.getOwnPropertyNames;var ad=Object.getPrototypeOf,ud=Object.prototype.hasOwnProperty;var vu=t=>{throw TypeError(t)};var cd=(t,e,r)=>e in t?Ys(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var fd=(t,e)=>()=>(t&&(e=t(t=0)),e);var B=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var ld=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of od(e))!ud.call(t,i)&&i!==r&&Ys(t,i,{get:()=>e[i],enumerable:!(n=sd(e,i))||n.enumerable});return t};var Iu=(t,e,r)=>(r=t!=null?id(ad(t)):{},ld(e||!t||!t.__esModule?Ys(r,"default",{value:t,enumerable:!0}):r,t));var ue=(t,e,r)=>cd(t,typeof e!="symbol"?e+"":e,r),Zs=(t,e,r)=>e.has(t)||vu("Cannot "+r);var h=(t,e,r)=>(Zs(t,e,"read from private field"),r?r.call(t):e.get(t)),Y=(t,e,r)=>e.has(t)?vu("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),q=(t,e,r,n)=>(Zs(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r),C=(t,e,r)=>(Zs(t,e,"access private method"),r);var li=(t,e,r,n)=>({set _(i){q(t,e,i,r)},get _(){return h(t,e,n)}});var Lu=B((gE,Nu)=>{d();var ye=Nu.exports={},vt,It;function Xs(){throw new Error("setTimeout has not been defined")}function Qs(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?vt=setTimeout:vt=Xs}catch{vt=Xs}try{typeof clearTimeout=="function"?It=clearTimeout:It=Qs}catch{It=Qs}})();function Su(t){if(vt===setTimeout)return setTimeout(t,0);if((vt===Xs||!vt)&&setTimeout)return vt=setTimeout,setTimeout(t,0);try{return vt(t,0)}catch{try{return vt.call(null,t,0)}catch{return vt.call(this,t,0)}}}function hd(t){if(It===clearTimeout)return clearTimeout(t);if((It===Qs||!It)&&clearTimeout)return It=clearTimeout,clearTimeout(t);try{return It(t)}catch{try{return It.call(null,t)}catch{return It.call(this,t)}}}var qt=[],Yr=!1,mr,hi=-1;function dd(){!Yr||!mr||(Yr=!1,mr.length?qt=mr.concat(qt):hi=-1,qt.length&&Au())}function Au(){if(!Yr){var t=Su(dd);Yr=!0;for(var e=qt.length;e;){for(mr=qt,qt=[];++hi<e;)mr&&mr[hi].run();hi=-1,e=qt.length}mr=null,Yr=!1,hd(t)}}ye.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];qt.push(new Ru(t,e)),qt.length===1&&!Yr&&Su(Au)};function Ru(t,e){this.fun=t,this.array=e}Ru.prototype.run=function(){this.fun.apply(null,this.array)};ye.title="browser";ye.browser=!0;ye.env={};ye.argv=[];ye.version="";ye.versions={};function Mt(){}ye.on=Mt;ye.addListener=Mt;ye.once=Mt;ye.off=Mt;ye.removeListener=Mt;ye.removeAllListeners=Mt;ye.emit=Mt;ye.prependListener=Mt;ye.prependOnceListener=Mt;ye.listeners=function(t){return[]};ye.binding=function(t){throw new Error("process.binding is not supported")};ye.cwd=function(){return"/"};ye.chdir=function(t){throw new Error("process.chdir is not supported")};ye.umask=function(){return 0}});var Pu=B(di=>{"use strict";d();di.byteLength=gd;di.toByteArray=bd;di.fromByteArray=Ed;var St=[],st=[],yd=typeof Uint8Array!="undefined"?Uint8Array:Array,Js="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(Br=0,Ou=Js.length;Br<Ou;++Br)St[Br]=Js[Br],st[Js.charCodeAt(Br)]=Br;var Br,Ou;st[45]=62;st[95]=63;function Cu(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");r===-1&&(r=e);var n=r===e?0:4-r%4;return[r,n]}function gd(t){var e=Cu(t),r=e[0],n=e[1];return(r+n)*3/4-n}function pd(t,e,r){return(e+r)*3/4-r}function bd(t){var e,r=Cu(t),n=r[0],i=r[1],s=new yd(pd(t,n,i)),o=0,a=i>0?n-4:n,u;for(u=0;u<a;u+=4)e=st[t.charCodeAt(u)]<<18|st[t.charCodeAt(u+1)]<<12|st[t.charCodeAt(u+2)]<<6|st[t.charCodeAt(u+3)],s[o++]=e>>16&255,s[o++]=e>>8&255,s[o++]=e&255;return i===2&&(e=st[t.charCodeAt(u)]<<2|st[t.charCodeAt(u+1)]>>4,s[o++]=e&255),i===1&&(e=st[t.charCodeAt(u)]<<10|st[t.charCodeAt(u+1)]<<4|st[t.charCodeAt(u+2)]>>2,s[o++]=e>>8&255,s[o++]=e&255),s}function wd(t){return St[t>>18&63]+St[t>>12&63]+St[t>>6&63]+St[t&63]}function _d(t,e,r){for(var n,i=[],s=e;s<r;s+=3)n=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(t[s+2]&255),i.push(wd(n));return i.join("")}function Ed(t){for(var e,r=t.length,n=r%3,i=[],s=16383,o=0,a=r-n;o<a;o+=s)i.push(_d(t,o,o+s>a?a:o+s));return n===1?(e=t[r-1],i.push(St[e>>2]+St[e<<4&63]+"==")):n===2&&(e=(t[r-2]<<8)+t[r-1],i.push(St[e>>10]+St[e>>4&63]+St[e<<2&63]+"=")),i.join("")}});var ku=B(eo=>{d();eo.read=function(t,e,r,n,i){var s,o,a=i*8-n-1,u=(1<<a)-1,c=u>>1,l=-7,f=r?i-1:0,b=r?-1:1,y=t[e+f];for(f+=b,s=y&(1<<-l)-1,y>>=-l,l+=a;l>0;s=s*256+t[e+f],f+=b,l-=8);for(o=s&(1<<-l)-1,s>>=-l,l+=n;l>0;o=o*256+t[e+f],f+=b,l-=8);if(s===0)s=1-c;else{if(s===u)return o?NaN:(y?-1:1)*(1/0);o=o+Math.pow(2,n),s=s-c}return(y?-1:1)*o*Math.pow(2,s-n)};eo.write=function(t,e,r,n,i,s){var o,a,u,c=s*8-i-1,l=(1<<c)-1,f=l>>1,b=i===23?Math.pow(2,-24)-Math.pow(2,-77):0,y=n?0:s-1,E=n?1:-1,g=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=l):(o=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-o))<1&&(o--,u*=2),o+f>=1?e+=b/u:e+=b*Math.pow(2,1-f),e*u>=2&&(o++,u/=2),o+f>=l?(a=0,o=l):o+f>=1?(a=(e*u-1)*Math.pow(2,i),o=o+f):(a=e*Math.pow(2,f-1)*Math.pow(2,i),o=0));i>=8;t[r+y]=a&255,y+=E,a/=256,i-=8);for(o=o<<i|a,c+=i;c>0;t[r+y]=o&255,y+=E,o/=256,c-=8);t[r+y-E]|=g*128}});var en=B(Jr=>{"use strict";d();var to=Pu(),Xr=ku(),Uu=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;Jr.Buffer=w;Jr.SlowBuffer=Id;Jr.INSPECT_MAX_BYTES=50;var yi=2147483647;Jr.kMaxLength=yi;w.TYPED_ARRAY_SUPPORT=md();!w.TYPED_ARRAY_SUPPORT&&typeof console!="undefined"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function md(){try{let t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),t.foo()===42}catch{return!1}}Object.defineProperty(w.prototype,"parent",{enumerable:!0,get:function(){if(w.isBuffer(this))return this.buffer}});Object.defineProperty(w.prototype,"offset",{enumerable:!0,get:function(){if(w.isBuffer(this))return this.byteOffset}});function Ft(t){if(t>yi)throw new RangeError('The value "'+t+'" is invalid for option "size"');let e=new Uint8Array(t);return Object.setPrototypeOf(e,w.prototype),e}function w(t,e,r){if(typeof t=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return so(t)}return Fu(t,e,r)}w.poolSize=8192;function Fu(t,e,r){if(typeof t=="string")return xd(t,e);if(ArrayBuffer.isView(t))return Td(t);if(t==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(At(t,ArrayBuffer)||t&&At(t.buffer,ArrayBuffer)||typeof SharedArrayBuffer!="undefined"&&(At(t,SharedArrayBuffer)||t&&At(t.buffer,SharedArrayBuffer)))return no(t,e,r);if(typeof t=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let n=t.valueOf&&t.valueOf();if(n!=null&&n!==t)return w.from(n,e,r);let i=vd(t);if(i)return i;if(typeof Symbol!="undefined"&&Symbol.toPrimitive!=null&&typeof t[Symbol.toPrimitive]=="function")return w.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}w.from=function(t,e,r){return Fu(t,e,r)};Object.setPrototypeOf(w.prototype,Uint8Array.prototype);Object.setPrototypeOf(w,Uint8Array);function ju(t){if(typeof t!="number")throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function Bd(t,e,r){return ju(t),t<=0?Ft(t):e!==void 0?typeof r=="string"?Ft(t).fill(e,r):Ft(t).fill(e):Ft(t)}w.alloc=function(t,e,r){return Bd(t,e,r)};function so(t){return ju(t),Ft(t<0?0:oo(t)|0)}w.allocUnsafe=function(t){return so(t)};w.allocUnsafeSlow=function(t){return so(t)};function xd(t,e){if((typeof e!="string"||e==="")&&(e="utf8"),!w.isEncoding(e))throw new TypeError("Unknown encoding: "+e);let r=Du(t,e)|0,n=Ft(r),i=n.write(t,e);return i!==r&&(n=n.slice(0,i)),n}function ro(t){let e=t.length<0?0:oo(t.length)|0,r=Ft(e);for(let n=0;n<e;n+=1)r[n]=t[n]&255;return r}function Td(t){if(At(t,Uint8Array)){let e=new Uint8Array(t);return no(e.buffer,e.byteOffset,e.byteLength)}return ro(t)}function no(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return e===void 0&&r===void 0?n=new Uint8Array(t):r===void 0?n=new Uint8Array(t,e):n=new Uint8Array(t,e,r),Object.setPrototypeOf(n,w.prototype),n}function vd(t){if(w.isBuffer(t)){let e=oo(t.length)|0,r=Ft(e);return r.length===0||t.copy(r,0,0,e),r}if(t.length!==void 0)return typeof t.length!="number"||uo(t.length)?Ft(0):ro(t);if(t.type==="Buffer"&&Array.isArray(t.data))return ro(t.data)}function oo(t){if(t>=yi)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+yi.toString(16)+" bytes");return t|0}function Id(t){return+t!=t&&(t=0),w.alloc(+t)}w.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==w.prototype};w.compare=function(e,r){if(At(e,Uint8Array)&&(e=w.from(e,e.offset,e.byteLength)),At(r,Uint8Array)&&(r=w.from(r,r.offset,r.byteLength)),!w.isBuffer(e)||!w.isBuffer(r))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===r)return 0;let n=e.length,i=r.length;for(let s=0,o=Math.min(n,i);s<o;++s)if(e[s]!==r[s]){n=e[s],i=r[s];break}return n<i?-1:i<n?1:0};w.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};w.concat=function(e,r){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return w.alloc(0);let n;if(r===void 0)for(r=0,n=0;n<e.length;++n)r+=e[n].length;let i=w.allocUnsafe(r),s=0;for(n=0;n<e.length;++n){let o=e[n];if(At(o,Uint8Array))s+o.length>i.length?(w.isBuffer(o)||(o=w.from(o)),o.copy(i,s)):Uint8Array.prototype.set.call(i,o,s);else if(w.isBuffer(o))o.copy(i,s);else throw new TypeError('"list" argument must be an Array of Buffers');s+=o.length}return i};function Du(t,e){if(w.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||At(t,ArrayBuffer))return t.byteLength;if(typeof t!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);let r=t.length,n=arguments.length>2&&arguments[2]===!0;if(!n&&r===0)return 0;let i=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return io(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return r*2;case"hex":return r>>>1;case"base64":return Xu(t).length;default:if(i)return n?-1:io(t).length;e=(""+e).toLowerCase(),i=!0}}w.byteLength=Du;function Sd(t,e,r){let n=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((r===void 0||r>this.length)&&(r=this.length),r<=0)||(r>>>=0,e>>>=0,r<=e))return"";for(t||(t="utf8");;)switch(t){case"hex":return Hd(this,e,r);case"utf8":case"utf-8":return Gu(this,e,r);case"ascii":return kd(this,e,r);case"latin1":case"binary":return Ud(this,e,r);case"base64":return Cd(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return qd(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}w.prototype._isBuffer=!0;function xr(t,e,r){let n=t[e];t[e]=t[r],t[r]=n}w.prototype.swap16=function(){let e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let r=0;r<e;r+=2)xr(this,r,r+1);return this};w.prototype.swap32=function(){let e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let r=0;r<e;r+=4)xr(this,r,r+3),xr(this,r+1,r+2);return this};w.prototype.swap64=function(){let e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let r=0;r<e;r+=8)xr(this,r,r+7),xr(this,r+1,r+6),xr(this,r+2,r+5),xr(this,r+3,r+4);return this};w.prototype.toString=function(){let e=this.length;return e===0?"":arguments.length===0?Gu(this,0,e):Sd.apply(this,arguments)};w.prototype.toLocaleString=w.prototype.toString;w.prototype.equals=function(e){if(!w.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:w.compare(this,e)===0};w.prototype.inspect=function(){let e="",r=Jr.INSPECT_MAX_BYTES;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"};Uu&&(w.prototype[Uu]=w.prototype.inspect);w.prototype.compare=function(e,r,n,i,s){if(At(e,Uint8Array)&&(e=w.from(e,e.offset,e.byteLength)),!w.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(r===void 0&&(r=0),n===void 0&&(n=e?e.length:0),i===void 0&&(i=0),s===void 0&&(s=this.length),r<0||n>e.length||i<0||s>this.length)throw new RangeError("out of range index");if(i>=s&&r>=n)return 0;if(i>=s)return-1;if(r>=n)return 1;if(r>>>=0,n>>>=0,i>>>=0,s>>>=0,this===e)return 0;let o=s-i,a=n-r,u=Math.min(o,a),c=this.slice(i,s),l=e.slice(r,n);for(let f=0;f<u;++f)if(c[f]!==l[f]){o=c[f],a=l[f];break}return o<a?-1:a<o?1:0};function Ku(t,e,r,n,i){if(t.length===0)return-1;if(typeof r=="string"?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,uo(r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0)if(i)r=0;else return-1;if(typeof e=="string"&&(e=w.from(e,n)),w.isBuffer(e))return e.length===0?-1:Hu(t,e,r,n,i);if(typeof e=="number")return e=e&255,typeof Uint8Array.prototype.indexOf=="function"?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):Hu(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function Hu(t,e,r,n,i){let s=1,o=t.length,a=e.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(t.length<2||e.length<2)return-1;s=2,o/=2,a/=2,r/=2}function u(l,f){return s===1?l[f]:l.readUInt16BE(f*s)}let c;if(i){let l=-1;for(c=r;c<o;c++)if(u(t,c)===u(e,l===-1?0:c-l)){if(l===-1&&(l=c),c-l+1===a)return l*s}else l!==-1&&(c-=c-l),l=-1}else for(r+a>o&&(r=o-a),c=r;c>=0;c--){let l=!0;for(let f=0;f<a;f++)if(u(t,c+f)!==u(e,f)){l=!1;break}if(l)return c}return-1}w.prototype.includes=function(e,r,n){return this.indexOf(e,r,n)!==-1};w.prototype.indexOf=function(e,r,n){return Ku(this,e,r,n,!0)};w.prototype.lastIndexOf=function(e,r,n){return Ku(this,e,r,n,!1)};function Ad(t,e,r,n){r=Number(r)||0;let i=t.length-r;n?(n=Number(n),n>i&&(n=i)):n=i;let s=e.length;n>s/2&&(n=s/2);let o;for(o=0;o<n;++o){let a=parseInt(e.substr(o*2,2),16);if(uo(a))return o;t[r+o]=a}return o}function Rd(t,e,r,n){return gi(io(e,t.length-r),t,r,n)}function Nd(t,e,r,n){return gi(Dd(e),t,r,n)}function Ld(t,e,r,n){return gi(Xu(e),t,r,n)}function Od(t,e,r,n){return gi(Kd(e,t.length-r),t,r,n)}w.prototype.write=function(e,r,n,i){if(r===void 0)i="utf8",n=this.length,r=0;else if(n===void 0&&typeof r=="string")i=r,n=this.length,r=0;else if(isFinite(r))r=r>>>0,isFinite(n)?(n=n>>>0,i===void 0&&(i="utf8")):(i=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let s=this.length-r;if((n===void 0||n>s)&&(n=s),e.length>0&&(n<0||r<0)||r>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");let o=!1;for(;;)switch(i){case"hex":return Ad(this,e,r,n);case"utf8":case"utf-8":return Rd(this,e,r,n);case"ascii":case"latin1":case"binary":return Nd(this,e,r,n);case"base64":return Ld(this,e,r,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return Od(this,e,r,n);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}};w.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function Cd(t,e,r){return e===0&&r===t.length?to.fromByteArray(t):to.fromByteArray(t.slice(e,r))}function Gu(t,e,r){r=Math.min(t.length,r);let n=[],i=e;for(;i<r;){let s=t[i],o=null,a=s>239?4:s>223?3:s>191?2:1;if(i+a<=r){let u,c,l,f;switch(a){case 1:s<128&&(o=s);break;case 2:u=t[i+1],(u&192)===128&&(f=(s&31)<<6|u&63,f>127&&(o=f));break;case 3:u=t[i+1],c=t[i+2],(u&192)===128&&(c&192)===128&&(f=(s&15)<<12|(u&63)<<6|c&63,f>2047&&(f<55296||f>57343)&&(o=f));break;case 4:u=t[i+1],c=t[i+2],l=t[i+3],(u&192)===128&&(c&192)===128&&(l&192)===128&&(f=(s&15)<<18|(u&63)<<12|(c&63)<<6|l&63,f>65535&&f<1114112&&(o=f))}}o===null?(o=65533,a=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|o&1023),n.push(o),i+=a}return Pd(n)}var qu=4096;function Pd(t){let e=t.length;if(e<=qu)return String.fromCharCode.apply(String,t);let r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=qu));return r}function kd(t,e,r){let n="";r=Math.min(t.length,r);for(let i=e;i<r;++i)n+=String.fromCharCode(t[i]&127);return n}function Ud(t,e,r){let n="";r=Math.min(t.length,r);for(let i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function Hd(t,e,r){let n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);let i="";for(let s=e;s<r;++s)i+=Gd[t[s]];return i}function qd(t,e,r){let n=t.slice(e,r),i="";for(let s=0;s<n.length-1;s+=2)i+=String.fromCharCode(n[s]+n[s+1]*256);return i}w.prototype.slice=function(e,r){let n=this.length;e=~~e,r=r===void 0?n:~~r,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),r<0?(r+=n,r<0&&(r=0)):r>n&&(r=n),r<e&&(r=e);let i=this.subarray(e,r);return Object.setPrototypeOf(i,w.prototype),i};function ve(t,e,r){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}w.prototype.readUintLE=w.prototype.readUIntLE=function(e,r,n){e=e>>>0,r=r>>>0,n||ve(e,r,this.length);let i=this[e],s=1,o=0;for(;++o<r&&(s*=256);)i+=this[e+o]*s;return i};w.prototype.readUintBE=w.prototype.readUIntBE=function(e,r,n){e=e>>>0,r=r>>>0,n||ve(e,r,this.length);let i=this[e+--r],s=1;for(;r>0&&(s*=256);)i+=this[e+--r]*s;return i};w.prototype.readUint8=w.prototype.readUInt8=function(e,r){return e=e>>>0,r||ve(e,1,this.length),this[e]};w.prototype.readUint16LE=w.prototype.readUInt16LE=function(e,r){return e=e>>>0,r||ve(e,2,this.length),this[e]|this[e+1]<<8};w.prototype.readUint16BE=w.prototype.readUInt16BE=function(e,r){return e=e>>>0,r||ve(e,2,this.length),this[e]<<8|this[e+1]};w.prototype.readUint32LE=w.prototype.readUInt32LE=function(e,r){return e=e>>>0,r||ve(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};w.prototype.readUint32BE=w.prototype.readUInt32BE=function(e,r){return e=e>>>0,r||ve(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};w.prototype.readBigUInt64LE=Qt(function(e){e=e>>>0,Qr(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&Pn(e,this.length-8);let i=r+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24,s=this[++e]+this[++e]*2**8+this[++e]*2**16+n*2**24;return BigInt(i)+(BigInt(s)<<BigInt(32))});w.prototype.readBigUInt64BE=Qt(function(e){e=e>>>0,Qr(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&Pn(e,this.length-8);let i=r*2**24+this[++e]*2**16+this[++e]*2**8+this[++e],s=this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n;return(BigInt(i)<<BigInt(32))+BigInt(s)});w.prototype.readIntLE=function(e,r,n){e=e>>>0,r=r>>>0,n||ve(e,r,this.length);let i=this[e],s=1,o=0;for(;++o<r&&(s*=256);)i+=this[e+o]*s;return s*=128,i>=s&&(i-=Math.pow(2,8*r)),i};w.prototype.readIntBE=function(e,r,n){e=e>>>0,r=r>>>0,n||ve(e,r,this.length);let i=r,s=1,o=this[e+--i];for(;i>0&&(s*=256);)o+=this[e+--i]*s;return s*=128,o>=s&&(o-=Math.pow(2,8*r)),o};w.prototype.readInt8=function(e,r){return e=e>>>0,r||ve(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};w.prototype.readInt16LE=function(e,r){e=e>>>0,r||ve(e,2,this.length);let n=this[e]|this[e+1]<<8;return n&32768?n|4294901760:n};w.prototype.readInt16BE=function(e,r){e=e>>>0,r||ve(e,2,this.length);let n=this[e+1]|this[e]<<8;return n&32768?n|4294901760:n};w.prototype.readInt32LE=function(e,r){return e=e>>>0,r||ve(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};w.prototype.readInt32BE=function(e,r){return e=e>>>0,r||ve(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};w.prototype.readBigInt64LE=Qt(function(e){e=e>>>0,Qr(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&Pn(e,this.length-8);let i=this[e+4]+this[e+5]*2**8+this[e+6]*2**16+(n<<24);return(BigInt(i)<<BigInt(32))+BigInt(r+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24)});w.prototype.readBigInt64BE=Qt(function(e){e=e>>>0,Qr(e,"offset");let r=this[e],n=this[e+7];(r===void 0||n===void 0)&&Pn(e,this.length-8);let i=(r<<24)+this[++e]*2**16+this[++e]*2**8+this[++e];return(BigInt(i)<<BigInt(32))+BigInt(this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n)});w.prototype.readFloatLE=function(e,r){return e=e>>>0,r||ve(e,4,this.length),Xr.read(this,e,!0,23,4)};w.prototype.readFloatBE=function(e,r){return e=e>>>0,r||ve(e,4,this.length),Xr.read(this,e,!1,23,4)};w.prototype.readDoubleLE=function(e,r){return e=e>>>0,r||ve(e,8,this.length),Xr.read(this,e,!0,52,8)};w.prototype.readDoubleBE=function(e,r){return e=e>>>0,r||ve(e,8,this.length),Xr.read(this,e,!1,52,8)};function Ge(t,e,r,n,i,s){if(!w.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<s)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}w.prototype.writeUintLE=w.prototype.writeUIntLE=function(e,r,n,i){if(e=+e,r=r>>>0,n=n>>>0,!i){let a=Math.pow(2,8*n)-1;Ge(this,e,r,n,a,0)}let s=1,o=0;for(this[r]=e&255;++o<n&&(s*=256);)this[r+o]=e/s&255;return r+n};w.prototype.writeUintBE=w.prototype.writeUIntBE=function(e,r,n,i){if(e=+e,r=r>>>0,n=n>>>0,!i){let a=Math.pow(2,8*n)-1;Ge(this,e,r,n,a,0)}let s=n-1,o=1;for(this[r+s]=e&255;--s>=0&&(o*=256);)this[r+s]=e/o&255;return r+n};w.prototype.writeUint8=w.prototype.writeUInt8=function(e,r,n){return e=+e,r=r>>>0,n||Ge(this,e,r,1,255,0),this[r]=e&255,r+1};w.prototype.writeUint16LE=w.prototype.writeUInt16LE=function(e,r,n){return e=+e,r=r>>>0,n||Ge(this,e,r,2,65535,0),this[r]=e&255,this[r+1]=e>>>8,r+2};w.prototype.writeUint16BE=w.prototype.writeUInt16BE=function(e,r,n){return e=+e,r=r>>>0,n||Ge(this,e,r,2,65535,0),this[r]=e>>>8,this[r+1]=e&255,r+2};w.prototype.writeUint32LE=w.prototype.writeUInt32LE=function(e,r,n){return e=+e,r=r>>>0,n||Ge(this,e,r,4,4294967295,0),this[r+3]=e>>>24,this[r+2]=e>>>16,this[r+1]=e>>>8,this[r]=e&255,r+4};w.prototype.writeUint32BE=w.prototype.writeUInt32BE=function(e,r,n){return e=+e,r=r>>>0,n||Ge(this,e,r,4,4294967295,0),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255,r+4};function Vu(t,e,r,n,i){Zu(e,n,i,t,r,7);let s=Number(e&BigInt(4294967295));t[r++]=s,s=s>>8,t[r++]=s,s=s>>8,t[r++]=s,s=s>>8,t[r++]=s;let o=Number(e>>BigInt(32)&BigInt(4294967295));return t[r++]=o,o=o>>8,t[r++]=o,o=o>>8,t[r++]=o,o=o>>8,t[r++]=o,r}function $u(t,e,r,n,i){Zu(e,n,i,t,r,7);let s=Number(e&BigInt(4294967295));t[r+7]=s,s=s>>8,t[r+6]=s,s=s>>8,t[r+5]=s,s=s>>8,t[r+4]=s;let o=Number(e>>BigInt(32)&BigInt(4294967295));return t[r+3]=o,o=o>>8,t[r+2]=o,o=o>>8,t[r+1]=o,o=o>>8,t[r]=o,r+8}w.prototype.writeBigUInt64LE=Qt(function(e,r=0){return Vu(this,e,r,BigInt(0),BigInt("0xffffffffffffffff"))});w.prototype.writeBigUInt64BE=Qt(function(e,r=0){return $u(this,e,r,BigInt(0),BigInt("0xffffffffffffffff"))});w.prototype.writeIntLE=function(e,r,n,i){if(e=+e,r=r>>>0,!i){let u=Math.pow(2,8*n-1);Ge(this,e,r,n,u-1,-u)}let s=0,o=1,a=0;for(this[r]=e&255;++s<n&&(o*=256);)e<0&&a===0&&this[r+s-1]!==0&&(a=1),this[r+s]=(e/o>>0)-a&255;return r+n};w.prototype.writeIntBE=function(e,r,n,i){if(e=+e,r=r>>>0,!i){let u=Math.pow(2,8*n-1);Ge(this,e,r,n,u-1,-u)}let s=n-1,o=1,a=0;for(this[r+s]=e&255;--s>=0&&(o*=256);)e<0&&a===0&&this[r+s+1]!==0&&(a=1),this[r+s]=(e/o>>0)-a&255;return r+n};w.prototype.writeInt8=function(e,r,n){return e=+e,r=r>>>0,n||Ge(this,e,r,1,127,-128),e<0&&(e=255+e+1),this[r]=e&255,r+1};w.prototype.writeInt16LE=function(e,r,n){return e=+e,r=r>>>0,n||Ge(this,e,r,2,32767,-32768),this[r]=e&255,this[r+1]=e>>>8,r+2};w.prototype.writeInt16BE=function(e,r,n){return e=+e,r=r>>>0,n||Ge(this,e,r,2,32767,-32768),this[r]=e>>>8,this[r+1]=e&255,r+2};w.prototype.writeInt32LE=function(e,r,n){return e=+e,r=r>>>0,n||Ge(this,e,r,4,2147483647,-2147483648),this[r]=e&255,this[r+1]=e>>>8,this[r+2]=e>>>16,this[r+3]=e>>>24,r+4};w.prototype.writeInt32BE=function(e,r,n){return e=+e,r=r>>>0,n||Ge(this,e,r,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[r]=e>>>24,this[r+1]=e>>>16,this[r+2]=e>>>8,this[r+3]=e&255,r+4};w.prototype.writeBigInt64LE=Qt(function(e,r=0){return Vu(this,e,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});w.prototype.writeBigInt64BE=Qt(function(e,r=0){return $u(this,e,r,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function zu(t,e,r,n,i,s){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function Wu(t,e,r,n,i){return e=+e,r=r>>>0,i||zu(t,e,r,4,34028234663852886e22,-34028234663852886e22),Xr.write(t,e,r,n,23,4),r+4}w.prototype.writeFloatLE=function(e,r,n){return Wu(this,e,r,!0,n)};w.prototype.writeFloatBE=function(e,r,n){return Wu(this,e,r,!1,n)};function Yu(t,e,r,n,i){return e=+e,r=r>>>0,i||zu(t,e,r,8,17976931348623157e292,-17976931348623157e292),Xr.write(t,e,r,n,52,8),r+8}w.prototype.writeDoubleLE=function(e,r,n){return Yu(this,e,r,!0,n)};w.prototype.writeDoubleBE=function(e,r,n){return Yu(this,e,r,!1,n)};w.prototype.copy=function(e,r,n,i){if(!w.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),!i&&i!==0&&(i=this.length),r>=e.length&&(r=e.length),r||(r=0),i>0&&i<n&&(i=n),i===n||e.length===0||this.length===0)return 0;if(r<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),e.length-r<i-n&&(i=e.length-r+n);let s=i-n;return this===e&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(r,n,i):Uint8Array.prototype.set.call(e,this.subarray(n,i),r),s};w.prototype.fill=function(e,r,n,i){if(typeof e=="string"){if(typeof r=="string"?(i=r,r=0,n=this.length):typeof n=="string"&&(i=n,n=this.length),i!==void 0&&typeof i!="string")throw new TypeError("encoding must be a string");if(typeof i=="string"&&!w.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(e.length===1){let o=e.charCodeAt(0);(i==="utf8"&&o<128||i==="latin1")&&(e=o)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(r<0||this.length<r||this.length<n)throw new RangeError("Out of range index");if(n<=r)return this;r=r>>>0,n=n===void 0?this.length:n>>>0,e||(e=0);let s;if(typeof e=="number")for(s=r;s<n;++s)this[s]=e;else{let o=w.isBuffer(e)?e:w.from(e,i),a=o.length;if(a===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(s=0;s<n-r;++s)this[s+r]=o[s%a]}return this};var Zr={};function ao(t,e,r){Zr[t]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(i){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:i,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}ao("ERR_BUFFER_OUT_OF_BOUNDS",function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);ao("ERR_INVALID_ARG_TYPE",function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`},TypeError);ao("ERR_OUT_OF_RANGE",function(t,e,r){let n=`The value of "${t}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>2**32?i=Mu(String(r)):typeof r=="bigint"&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=Mu(i)),i+="n"),n+=` It must be ${e}. Received ${i}`,n},RangeError);function Mu(t){let e="",r=t.length,n=t[0]==="-"?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function Md(t,e,r){Qr(e,"offset"),(t[e]===void 0||t[e+r]===void 0)&&Pn(e,t.length-(r+1))}function Zu(t,e,r,n,i,s){if(t>r||t<e){let o=typeof e=="bigint"?"n":"",a;throw s>3?e===0||e===BigInt(0)?a=`>= 0${o} and < 2${o} ** ${(s+1)*8}${o}`:a=`>= -(2${o} ** ${(s+1)*8-1}${o}) and < 2 ** ${(s+1)*8-1}${o}`:a=`>= ${e}${o} and <= ${r}${o}`,new Zr.ERR_OUT_OF_RANGE("value",a,t)}Md(n,i,s)}function Qr(t,e){if(typeof t!="number")throw new Zr.ERR_INVALID_ARG_TYPE(e,"number",t)}function Pn(t,e,r){throw Math.floor(t)!==t?(Qr(t,r),new Zr.ERR_OUT_OF_RANGE(r||"offset","an integer",t)):e<0?new Zr.ERR_BUFFER_OUT_OF_BOUNDS:new Zr.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${e}`,t)}var Fd=/[^+/0-9A-Za-z-_]/g;function jd(t){if(t=t.split("=")[0],t=t.trim().replace(Fd,""),t.length<2)return"";for(;t.length%4!==0;)t=t+"=";return t}function io(t,e){e=e||1/0;let r,n=t.length,i=null,s=[];for(let o=0;o<n;++o){if(r=t.charCodeAt(o),r>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&s.push(239,191,189);continue}else if(o+1===n){(e-=3)>-1&&s.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&s.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(e-=3)>-1&&s.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;s.push(r)}else if(r<2048){if((e-=2)<0)break;s.push(r>>6|192,r&63|128)}else if(r<65536){if((e-=3)<0)break;s.push(r>>12|224,r>>6&63|128,r&63|128)}else if(r<1114112){if((e-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,r&63|128)}else throw new Error("Invalid code point")}return s}function Dd(t){let e=[];for(let r=0;r<t.length;++r)e.push(t.charCodeAt(r)&255);return e}function Kd(t,e){let r,n,i,s=[];for(let o=0;o<t.length&&!((e-=2)<0);++o)r=t.charCodeAt(o),n=r>>8,i=r%256,s.push(i),s.push(n);return s}function Xu(t){return to.toByteArray(jd(t))}function gi(t,e,r,n){let i;for(i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}function At(t,e){return t instanceof e||t!=null&&t.constructor!=null&&t.constructor.name!=null&&t.constructor.name===e.name}function uo(t){return t!==t}var Gd=(function(){let t="0123456789abcdef",e=new Array(256);for(let r=0;r<16;++r){let n=r*16;for(let i=0;i<16;++i)e[n+i]=t[r]+t[i]}return e})();function Qt(t){return typeof BigInt=="undefined"?Vd:t}function Vd(){throw new Error("BigInt not supported")}});var Qu,Ju,d=fd(()=>{Qu=Iu(Lu()),Ju=Iu(en());globalThis.process||(globalThis.process=Qu.default);globalThis.Buffer||(globalThis.Buffer=Ju.Buffer)});var tn=B(Le=>{"use strict";d();Object.defineProperty(Le,"__esModule",{value:!0});Le.output=Le.exists=Le.hash=Le.bytes=Le.bool=Le.number=Le.isBytes=void 0;function pi(t){if(!Number.isSafeInteger(t)||t<0)throw new Error(`positive integer expected, not ${t}`)}Le.number=pi;function ec(t){if(typeof t!="boolean")throw new Error(`boolean expected, not ${t}`)}Le.bool=ec;function tc(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}Le.isBytes=tc;function co(t,...e){if(!tc(t))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(t.length))throw new Error(`Uint8Array expected of length ${e}, not of length=${t.length}`)}Le.bytes=co;function rc(t){if(typeof t!="function"||typeof t.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");pi(t.outputLen),pi(t.blockLen)}Le.hash=rc;function nc(t,e=!0){if(t.destroyed)throw new Error("Hash instance has been destroyed");if(e&&t.finished)throw new Error("Hash#digest() has already been called")}Le.exists=nc;function ic(t,e){co(t);let r=e.outputLen;if(t.length<r)throw new Error(`digestInto() expects output buffer of length at least ${r}`)}Le.output=ic;var $d={number:pi,bool:ec,bytes:co,hash:rc,exists:nc,output:ic};Le.default=$d});var sc=B(bi=>{"use strict";d();Object.defineProperty(bi,"__esModule",{value:!0});bi.crypto=void 0;bi.crypto=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0});var Rt=B(U=>{"use strict";d();Object.defineProperty(U,"__esModule",{value:!0});U.randomBytes=U.wrapXOFConstructorWithOpts=U.wrapConstructorWithOpts=U.wrapConstructor=U.checkOpts=U.Hash=U.concatBytes=U.toBytes=U.utf8ToBytes=U.asyncLoop=U.nextTick=U.hexToBytes=U.bytesToHex=U.byteSwap32=U.byteSwapIfBE=U.byteSwap=U.isLE=U.rotl=U.rotr=U.createView=U.u32=U.u8=U.isBytes=void 0;var fo=sc(),ho=tn();function zd(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}U.isBytes=zd;var Wd=t=>new Uint8Array(t.buffer,t.byteOffset,t.byteLength);U.u8=Wd;var Yd=t=>new Uint32Array(t.buffer,t.byteOffset,Math.floor(t.byteLength/4));U.u32=Yd;var Zd=t=>new DataView(t.buffer,t.byteOffset,t.byteLength);U.createView=Zd;var Xd=(t,e)=>t<<32-e|t>>>e;U.rotr=Xd;var Qd=(t,e)=>t<<e|t>>>32-e>>>0;U.rotl=Qd;U.isLE=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;var Jd=t=>t<<24&4278190080|t<<8&16711680|t>>>8&65280|t>>>24&255;U.byteSwap=Jd;U.byteSwapIfBE=U.isLE?t=>t:t=>(0,U.byteSwap)(t);function e0(t){for(let e=0;e<t.length;e++)t[e]=(0,U.byteSwap)(t[e])}U.byteSwap32=e0;var t0=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function r0(t){(0,ho.bytes)(t);let e="";for(let r=0;r<t.length;r++)e+=t0[t[r]];return e}U.bytesToHex=r0;var jt={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function oc(t){if(t>=jt._0&&t<=jt._9)return t-jt._0;if(t>=jt._A&&t<=jt._F)return t-(jt._A-10);if(t>=jt._a&&t<=jt._f)return t-(jt._a-10)}function n0(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);let e=t.length,r=e/2;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);let n=new Uint8Array(r);for(let i=0,s=0;i<r;i++,s+=2){let o=oc(t.charCodeAt(s)),a=oc(t.charCodeAt(s+1));if(o===void 0||a===void 0){let u=t[s]+t[s+1];throw new Error('hex string expected, got non-hex character "'+u+'" at index '+s)}n[i]=o*16+a}return n}U.hexToBytes=n0;var i0=async()=>{};U.nextTick=i0;async function s0(t,e,r){let n=Date.now();for(let i=0;i<t;i++){r(i);let s=Date.now()-n;s>=0&&s<e||(await(0,U.nextTick)(),n+=s)}}U.asyncLoop=s0;function ac(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}U.utf8ToBytes=ac;function wi(t){return typeof t=="string"&&(t=ac(t)),(0,ho.bytes)(t),t}U.toBytes=wi;function o0(...t){let e=0;for(let n=0;n<t.length;n++){let i=t[n];(0,ho.bytes)(i),e+=i.length}let r=new Uint8Array(e);for(let n=0,i=0;n<t.length;n++){let s=t[n];r.set(s,i),i+=s.length}return r}U.concatBytes=o0;var lo=class{clone(){return this._cloneInto()}};U.Hash=lo;var a0={}.toString;function u0(t,e){if(e!==void 0&&a0.call(e)!=="[object Object]")throw new Error("Options should be object or undefined");return Object.assign(t,e)}U.checkOpts=u0;function c0(t){let e=n=>t().update(wi(n)).digest(),r=t();return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=()=>t(),e}U.wrapConstructor=c0;function f0(t){let e=(n,i)=>t(i).update(wi(n)).digest(),r=t({});return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=n=>t(n),e}U.wrapConstructorWithOpts=f0;function l0(t){let e=(n,i)=>t(i).update(wi(n)).digest(),r=t({});return e.outputLen=r.outputLen,e.blockLen=r.blockLen,e.create=n=>t(n),e}U.wrapXOFConstructorWithOpts=l0;function h0(t=32){if(fo.crypto&&typeof fo.crypto.getRandomValues=="function")return fo.crypto.getRandomValues(new Uint8Array(t));throw new Error("crypto.getRandomValues must be defined")}U.randomBytes=h0});var uc=B(Jt=>{"use strict";d();Object.defineProperty(Jt,"__esModule",{value:!0});Jt.HashMD=Jt.Maj=Jt.Chi=void 0;var yo=tn(),kn=Rt();function d0(t,e,r,n){if(typeof t.setBigUint64=="function")return t.setBigUint64(e,r,n);let i=BigInt(32),s=BigInt(4294967295),o=Number(r>>i&s),a=Number(r&s),u=n?4:0,c=n?0:4;t.setUint32(e+u,o,n),t.setUint32(e+c,a,n)}var y0=(t,e,r)=>t&e^~t&r;Jt.Chi=y0;var g0=(t,e,r)=>t&e^t&r^e&r;Jt.Maj=g0;var go=class extends kn.Hash{constructor(e,r,n,i){super(),this.blockLen=e,this.outputLen=r,this.padOffset=n,this.isLE=i,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=(0,kn.createView)(this.buffer)}update(e){(0,yo.exists)(this);let{view:r,buffer:n,blockLen:i}=this;e=(0,kn.toBytes)(e);let s=e.length;for(let o=0;o<s;){let a=Math.min(i-this.pos,s-o);if(a===i){let u=(0,kn.createView)(e);for(;i<=s-o;o+=i)this.process(u,o);continue}n.set(e.subarray(o,o+a),this.pos),this.pos+=a,o+=a,this.pos===i&&(this.process(r,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){(0,yo.exists)(this),(0,yo.output)(e,this),this.finished=!0;let{buffer:r,view:n,blockLen:i,isLE:s}=this,{pos:o}=this;r[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(n,0),o=0);for(let f=o;f<i;f++)r[f]=0;d0(n,i-8,BigInt(this.length*8),s),this.process(n,0);let a=(0,kn.createView)(e),u=this.outputLen;if(u%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let c=u/4,l=this.get();if(c>l.length)throw new Error("_sha2: outputLen bigger than state");for(let f=0;f<c;f++)a.setUint32(4*f,l[f],s)}digest(){let{buffer:e,outputLen:r}=this;this.digestInto(e);let n=e.slice(0,r);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:r,buffer:n,length:i,finished:s,destroyed:o,pos:a}=this;return e.length=i,e.pos=a,e.finished=s,e.destroyed=o,i%r&&e.buffer.set(n),e}};Jt.HashMD=go});var wo=B(rn=>{"use strict";d();Object.defineProperty(rn,"__esModule",{value:!0});rn.sha224=rn.sha256=void 0;var po=uc(),ot=Rt(),p0=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),er=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),tr=new Uint32Array(64),_i=class extends po.HashMD{constructor(){super(64,32,8,!1),this.A=er[0]|0,this.B=er[1]|0,this.C=er[2]|0,this.D=er[3]|0,this.E=er[4]|0,this.F=er[5]|0,this.G=er[6]|0,this.H=er[7]|0}get(){let{A:e,B:r,C:n,D:i,E:s,F:o,G:a,H:u}=this;return[e,r,n,i,s,o,a,u]}set(e,r,n,i,s,o,a,u){this.A=e|0,this.B=r|0,this.C=n|0,this.D=i|0,this.E=s|0,this.F=o|0,this.G=a|0,this.H=u|0}process(e,r){for(let f=0;f<16;f++,r+=4)tr[f]=e.getUint32(r,!1);for(let f=16;f<64;f++){let b=tr[f-15],y=tr[f-2],E=(0,ot.rotr)(b,7)^(0,ot.rotr)(b,18)^b>>>3,g=(0,ot.rotr)(y,17)^(0,ot.rotr)(y,19)^y>>>10;tr[f]=g+tr[f-7]+E+tr[f-16]|0}let{A:n,B:i,C:s,D:o,E:a,F:u,G:c,H:l}=this;for(let f=0;f<64;f++){let b=(0,ot.rotr)(a,6)^(0,ot.rotr)(a,11)^(0,ot.rotr)(a,25),y=l+b+(0,po.Chi)(a,u,c)+p0[f]+tr[f]|0,g=((0,ot.rotr)(n,2)^(0,ot.rotr)(n,13)^(0,ot.rotr)(n,22))+(0,po.Maj)(n,i,s)|0;l=c,c=u,u=a,a=o+y|0,o=s,s=i,i=n,n=y+g|0}n=n+this.A|0,i=i+this.B|0,s=s+this.C|0,o=o+this.D|0,a=a+this.E|0,u=u+this.F|0,c=c+this.G|0,l=l+this.H|0,this.set(n,i,s,o,a,u,c,l)}roundClean(){tr.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}},bo=class extends _i{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}};rn.sha256=(0,ot.wrapConstructor)(()=>new _i);rn.sha224=(0,ot.wrapConstructor)(()=>new bo)});var fc=B(Tr=>{"use strict";d();Object.defineProperty(Tr,"__esModule",{value:!0});Tr.hmac=Tr.HMAC=void 0;var Ei=tn(),cc=Rt(),Un=class extends cc.Hash{constructor(e,r){super(),this.finished=!1,this.destroyed=!1,(0,Ei.hash)(e);let n=(0,cc.toBytes)(r);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let i=this.blockLen,s=new Uint8Array(i);s.set(n.length>i?e.create().update(n).digest():n);for(let o=0;o<s.length;o++)s[o]^=54;this.iHash.update(s),this.oHash=e.create();for(let o=0;o<s.length;o++)s[o]^=106;this.oHash.update(s),s.fill(0)}update(e){return(0,Ei.exists)(this),this.iHash.update(e),this}digestInto(e){(0,Ei.exists)(this),(0,Ei.bytes)(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:r,iHash:n,finished:i,destroyed:s,blockLen:o,outputLen:a}=this;return e=e,e.finished=i,e.destroyed=s,e.blockLen=o,e.outputLen=a,e.oHash=r._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}};Tr.HMAC=Un;var b0=(t,e,r)=>new Un(t,e).update(r).digest();Tr.hmac=b0;Tr.hmac.create=(t,e)=>new Un(t,e)});var vr=B(oe=>{"use strict";d();Object.defineProperty(oe,"__esModule",{value:!0});oe.bitMask=void 0;oe.isBytes=Bi;oe.abytes=xi;oe.bytesToHex=Eo;oe.numberToHexUnpadded=yc;oe.hexToNumber=mo;oe.hexToBytes=Ti;oe.bytesToNumberBE=E0;oe.bytesToNumberLE=m0;oe.numberToBytesBE=gc;oe.numberToBytesLE=B0;oe.numberToVarBytesBE=x0;oe.ensureBytes=T0;oe.concatBytes=pc;oe.equalBytes=v0;oe.utf8ToBytes=I0;oe.bitLen=S0;oe.bitGet=A0;oe.bitSet=R0;oe.createHmacDrbg=L0;oe.validateObject=C0;var dc=BigInt(0),mi=BigInt(1),w0=BigInt(2);function Bi(t){return t instanceof Uint8Array||t!=null&&typeof t=="object"&&t.constructor.name==="Uint8Array"}function xi(t){if(!Bi(t))throw new Error("Uint8Array expected")}var _0=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Eo(t){xi(t);let e="";for(let r=0;r<t.length;r++)e+=_0[t[r]];return e}function yc(t){let e=t.toString(16);return e.length&1?`0${e}`:e}function mo(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);return BigInt(t===""?"0":`0x${t}`)}var Dt={_0:48,_9:57,_A:65,_F:70,_a:97,_f:102};function lc(t){if(t>=Dt._0&&t<=Dt._9)return t-Dt._0;if(t>=Dt._A&&t<=Dt._F)return t-(Dt._A-10);if(t>=Dt._a&&t<=Dt._f)return t-(Dt._a-10)}function Ti(t){if(typeof t!="string")throw new Error("hex string expected, got "+typeof t);let e=t.length,r=e/2;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);let n=new Uint8Array(r);for(let i=0,s=0;i<r;i++,s+=2){let o=lc(t.charCodeAt(s)),a=lc(t.charCodeAt(s+1));if(o===void 0||a===void 0){let u=t[s]+t[s+1];throw new Error('hex string expected, got non-hex character "'+u+'" at index '+s)}n[i]=o*16+a}return n}function E0(t){return mo(Eo(t))}function m0(t){return xi(t),mo(Eo(Uint8Array.from(t).reverse()))}function gc(t,e){return Ti(t.toString(16).padStart(e*2,"0"))}function B0(t,e){return gc(t,e).reverse()}function x0(t){return Ti(yc(t))}function T0(t,e,r){let n;if(typeof e=="string")try{n=Ti(e)}catch(s){throw new Error(`${t} must be valid hex string, got "${e}". Cause: ${s}`)}else if(Bi(e))n=Uint8Array.from(e);else throw new Error(`${t} must be hex string or Uint8Array`);let i=n.length;if(typeof r=="number"&&i!==r)throw new Error(`${t} expected ${r} bytes, got ${i}`);return n}function pc(...t){let e=0;for(let n=0;n<t.length;n++){let i=t[n];xi(i),e+=i.length}let r=new Uint8Array(e);for(let n=0,i=0;n<t.length;n++){let s=t[n];r.set(s,i),i+=s.length}return r}function v0(t,e){if(t.length!==e.length)return!1;let r=0;for(let n=0;n<t.length;n++)r|=t[n]^e[n];return r===0}function I0(t){if(typeof t!="string")throw new Error(`utf8ToBytes expected string, got ${typeof t}`);return new Uint8Array(new TextEncoder().encode(t))}function S0(t){let e;for(e=0;t>dc;t>>=mi,e+=1);return e}function A0(t,e){return t>>BigInt(e)&mi}function R0(t,e,r){return t|(r?mi:dc)<<BigInt(e)}var N0=t=>(w0<<BigInt(t-1))-mi;oe.bitMask=N0;var _o=t=>new Uint8Array(t),hc=t=>Uint8Array.from(t);function L0(t,e,r){if(typeof t!="number"||t<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof r!="function")throw new Error("hmacFn must be a function");let n=_o(t),i=_o(t),s=0,o=()=>{n.fill(1),i.fill(0),s=0},a=(...f)=>r(i,n,...f),u=(f=_o())=>{i=a(hc([0]),f),n=a(),f.length!==0&&(i=a(hc([1]),f),n=a())},c=()=>{if(s++>=1e3)throw new Error("drbg: tried 1000 values");let f=0,b=[];for(;f<e;){n=a();let y=n.slice();b.push(y),f+=n.length}return pc(...b)};return(f,b)=>{o(),u(f);let y;for(;!(y=b(c()));)u();return o(),y}}var O0={bigint:t=>typeof t=="bigint",function:t=>typeof t=="function",boolean:t=>typeof t=="boolean",string:t=>typeof t=="string",stringOrUint8Array:t=>typeof t=="string"||Bi(t),isSafeInteger:t=>Number.isSafeInteger(t),array:t=>Array.isArray(t),field:(t,e)=>e.Fp.isValid(t),hash:t=>typeof t=="function"&&Number.isSafeInteger(t.outputLen)};function C0(t,e,r={}){let n=(i,s,o)=>{let a=O0[s];if(typeof a!="function")throw new Error(`Invalid validator "${s}", expected function`);let u=t[i];if(!(o&&u===void 0)&&!a(u,t))throw new Error(`Invalid param ${String(i)}=${u} (${typeof u}), expected ${s}`)};for(let[i,s]of Object.entries(e))n(i,s,!1);for(let[i,s]of Object.entries(r))n(i,s,!0);return t}});var Hn=B(ce=>{"use strict";d();Object.defineProperty(ce,"__esModule",{value:!0});ce.isNegativeLE=void 0;ce.mod=Xe;ce.pow=_c;ce.pow2=H0;ce.invert=vi;ce.tonelliShanks=Ec;ce.FpSqrt=mc;ce.validateField=F0;ce.FpPow=Bc;ce.FpInvertBatch=xc;ce.FpDiv=j0;ce.FpIsSquare=D0;ce.nLength=xo;ce.Field=K0;ce.FpSqrtOdd=G0;ce.FpSqrtEven=V0;ce.hashToPrivateScalar=$0;ce.getFieldBytesLength=To;ce.getMinHashLength=Tc;ce.mapHashToField=z0;var Qe=vr(),_e=BigInt(0),te=BigInt(1),rr=BigInt(2),P0=BigInt(3),Bo=BigInt(4),bc=BigInt(5),wc=BigInt(8),k0=BigInt(9),U0=BigInt(16);function Xe(t,e){let r=t%e;return r>=_e?r:e+r}function _c(t,e,r){if(r<=_e||e<_e)throw new Error("Expected power/modulo > 0");if(r===te)return _e;let n=te;for(;e>_e;)e&te&&(n=n*t%r),t=t*t%r,e>>=te;return n}function H0(t,e,r){let n=t;for(;e-- >_e;)n*=n,n%=r;return n}function vi(t,e){if(t===_e||e<=_e)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let r=Xe(t,e),n=e,i=_e,s=te,o=te,a=_e;for(;r!==_e;){let c=n/r,l=n%r,f=i-o*c,b=s-a*c;n=r,r=l,i=o,s=a,o=f,a=b}if(n!==te)throw new Error("invert: does not exist");return Xe(i,e)}function Ec(t){let e=(t-te)/rr,r,n,i;for(r=t-te,n=0;r%rr===_e;r/=rr,n++);for(i=rr;i<t&&_c(i,e,t)!==t-te;i++);if(n===1){let o=(t+te)/Bo;return function(u,c){let l=u.pow(c,o);if(!u.eql(u.sqr(l),c))throw new Error("Cannot find square root");return l}}let s=(r+te)/rr;return function(a,u){if(a.pow(u,e)===a.neg(a.ONE))throw new Error("Cannot find square root");let c=n,l=a.pow(a.mul(a.ONE,i),r),f=a.pow(u,s),b=a.pow(u,r);for(;!a.eql(b,a.ONE);){if(a.eql(b,a.ZERO))return a.ZERO;let y=1;for(let g=a.sqr(b);y<c&&!a.eql(g,a.ONE);y++)g=a.sqr(g);let E=a.pow(l,te<<BigInt(c-y-1));l=a.sqr(E),f=a.mul(f,E),b=a.mul(b,l),c=y}return f}}function mc(t){if(t%Bo===P0){let e=(t+te)/Bo;return function(n,i){let s=n.pow(i,e);if(!n.eql(n.sqr(s),i))throw new Error("Cannot find square root");return s}}if(t%wc===bc){let e=(t-bc)/wc;return function(n,i){let s=n.mul(i,rr),o=n.pow(s,e),a=n.mul(i,o),u=n.mul(n.mul(a,rr),o),c=n.mul(a,n.sub(u,n.ONE));if(!n.eql(n.sqr(c),i))throw new Error("Cannot find square root");return c}}return t%U0,Ec(t)}var q0=(t,e)=>(Xe(t,e)&te)===te;ce.isNegativeLE=q0;var M0=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function F0(t){let e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},r=M0.reduce((n,i)=>(n[i]="function",n),e);return(0,Qe.validateObject)(t,r)}function Bc(t,e,r){if(r<_e)throw new Error("Expected power > 0");if(r===_e)return t.ONE;if(r===te)return e;let n=t.ONE,i=e;for(;r>_e;)r&te&&(n=t.mul(n,i)),i=t.sqr(i),r>>=te;return n}function xc(t,e){let r=new Array(e.length),n=e.reduce((s,o,a)=>t.is0(o)?s:(r[a]=s,t.mul(s,o)),t.ONE),i=t.inv(n);return e.reduceRight((s,o,a)=>t.is0(o)?s:(r[a]=t.mul(s,r[a]),t.mul(s,o)),i),r}function j0(t,e,r){return t.mul(e,typeof r=="bigint"?vi(r,t.ORDER):t.inv(r))}function D0(t){let e=(t.ORDER-te)/rr;return r=>{let n=t.pow(r,e);return t.eql(n,t.ZERO)||t.eql(n,t.ONE)}}function xo(t,e){let r=e!==void 0?e:t.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function K0(t,e,r=!1,n={}){if(t<=_e)throw new Error(`Expected Field ORDER > 0, got ${t}`);let{nBitLength:i,nByteLength:s}=xo(t,e);if(s>2048)throw new Error("Field lengths over 2048 bytes are not supported");let o=mc(t),a=Object.freeze({ORDER:t,BITS:i,BYTES:s,MASK:(0,Qe.bitMask)(i),ZERO:_e,ONE:te,create:u=>Xe(u,t),isValid:u=>{if(typeof u!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof u}`);return _e<=u&&u<t},is0:u=>u===_e,isOdd:u=>(u&te)===te,neg:u=>Xe(-u,t),eql:(u,c)=>u===c,sqr:u=>Xe(u*u,t),add:(u,c)=>Xe(u+c,t),sub:(u,c)=>Xe(u-c,t),mul:(u,c)=>Xe(u*c,t),pow:(u,c)=>Bc(a,u,c),div:(u,c)=>Xe(u*vi(c,t),t),sqrN:u=>u*u,addN:(u,c)=>u+c,subN:(u,c)=>u-c,mulN:(u,c)=>u*c,inv:u=>vi(u,t),sqrt:n.sqrt||(u=>o(a,u)),invertBatch:u=>xc(a,u),cmov:(u,c,l)=>l?c:u,toBytes:u=>r?(0,Qe.numberToBytesLE)(u,s):(0,Qe.numberToBytesBE)(u,s),fromBytes:u=>{if(u.length!==s)throw new Error(`Fp.fromBytes: expected ${s}, got ${u.length}`);return r?(0,Qe.bytesToNumberLE)(u):(0,Qe.bytesToNumberBE)(u)}});return Object.freeze(a)}function G0(t,e){if(!t.isOdd)throw new Error("Field doesn't have isOdd");let r=t.sqrt(e);return t.isOdd(r)?r:t.neg(r)}function V0(t,e){if(!t.isOdd)throw new Error("Field doesn't have isOdd");let r=t.sqrt(e);return t.isOdd(r)?t.neg(r):r}function $0(t,e,r=!1){t=(0,Qe.ensureBytes)("privateHash",t);let n=t.length,i=xo(e).nByteLength+8;if(i<24||n<i||n>1024)throw new Error(`hashToPrivateScalar: expected ${i}-1024 bytes of input, got ${n}`);let s=r?(0,Qe.bytesToNumberLE)(t):(0,Qe.bytesToNumberBE)(t);return Xe(s,e-te)+te}function To(t){if(typeof t!="bigint")throw new Error("field order must be bigint");let e=t.toString(2).length;return Math.ceil(e/8)}function Tc(t){let e=To(t);return e+Math.ceil(e/2)}function z0(t,e,r=!1){let n=t.length,i=To(e),s=Tc(e);if(n<16||n<s||n>1024)throw new Error(`expected ${s}-1024 bytes of input, got ${n}`);let o=r?(0,Qe.bytesToNumberBE)(t):(0,Qe.bytesToNumberLE)(t),a=Xe(o,e-te)+te;return r?(0,Qe.numberToBytesLE)(a,i):(0,Qe.numberToBytesBE)(a,i)}});var Ic=B(Ii=>{"use strict";d();Object.defineProperty(Ii,"__esModule",{value:!0});Ii.wNAF=Z0;Ii.validateBasic=X0;var vc=Hn(),W0=vr(),Y0=BigInt(0),vo=BigInt(1);function Z0(t,e){let r=(i,s)=>{let o=s.negate();return i?o:s},n=i=>{let s=Math.ceil(e/i)+1,o=2**(i-1);return{windows:s,windowSize:o}};return{constTimeNegate:r,unsafeLadder(i,s){let o=t.ZERO,a=i;for(;s>Y0;)s&vo&&(o=o.add(a)),a=a.double(),s>>=vo;return o},precomputeWindow(i,s){let{windows:o,windowSize:a}=n(s),u=[],c=i,l=c;for(let f=0;f<o;f++){l=c,u.push(l);for(let b=1;b<a;b++)l=l.add(c),u.push(l);c=l.double()}return u},wNAF(i,s,o){let{windows:a,windowSize:u}=n(i),c=t.ZERO,l=t.BASE,f=BigInt(2**i-1),b=2**i,y=BigInt(i);for(let E=0;E<a;E++){let g=E*u,_=Number(o&f);o>>=y,_>u&&(_-=b,o+=vo);let p=g,x=g+Math.abs(_)-1,v=E%2!==0,S=_<0;_===0?l=l.add(r(v,s[p])):c=c.add(r(S,s[x]))}return{p:c,f:l}},wNAFCached(i,s,o,a){let u=i._WINDOW_SIZE||1,c=s.get(i);return c||(c=this.precomputeWindow(i,u),u!==1&&s.set(i,a(c))),this.wNAF(u,c,o)}}}function X0(t){return(0,vc.validateField)(t.Fp),(0,W0.validateObject)(t,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...(0,vc.nLength)(t.n,t.nBitLength),...t,p:t.Fp.ORDER})}});var So=B(He=>{"use strict";d();Object.defineProperty(He,"__esModule",{value:!0});He.DER=void 0;He.weierstrassPoints=Ac;He.weierstrass=ry;He.SWUFpSqrtRatio=Rc;He.mapToCurveSimpleSWU=ny;var Io=Ic(),nn=Hn(),fe=vr(),Nt=vr();function Q0(t){let e=(0,Io.validateBasic)(t);fe.validateObject(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:r,Fp:n,a:i}=e;if(r){if(!n.eql(i,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof r!="object"||typeof r.beta!="bigint"||typeof r.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}var{bytesToNumberBE:J0,hexToBytes:ey}=fe;He.DER={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(t){let{Err:e}=He.DER;if(t.length<2||t[0]!==2)throw new e("Invalid signature integer tag");let r=t[1],n=t.subarray(2,r+2);if(!r||n.length!==r)throw new e("Invalid signature integer: wrong length");if(n[0]&128)throw new e("Invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:J0(n),l:t.subarray(r+2)}},toSig(t){let{Err:e}=He.DER,r=typeof t=="string"?ey(t):t;fe.abytes(r);let n=r.length;if(n<2||r[0]!=48)throw new e("Invalid signature tag");if(r[1]!==n-2)throw new e("Invalid signature: incorrect length");let{d:i,l:s}=He.DER._parseInt(r.subarray(2)),{d:o,l:a}=He.DER._parseInt(s);if(a.length)throw new e("Invalid signature: left bytes after parsing");return{r:i,s:o}},hexFromSig(t){let e=c=>Number.parseInt(c[0],16)&8?"00"+c:c,r=c=>{let l=c.toString(16);return l.length&1?`0${l}`:l},n=e(r(t.s)),i=e(r(t.r)),s=n.length/2,o=i.length/2,a=r(s),u=r(o);return`30${r(o+s+4)}02${u}${i}02${a}${n}`}};var yt=BigInt(0),le=BigInt(1),nr=BigInt(2),Si=BigInt(3),Sc=BigInt(4);function Ac(t){let e=Q0(t),{Fp:r}=e,n=e.toBytes||((E,g,_)=>{let p=g.toAffine();return fe.concatBytes(Uint8Array.from([4]),r.toBytes(p.x),r.toBytes(p.y))}),i=e.fromBytes||(E=>{let g=E.subarray(1),_=r.fromBytes(g.subarray(0,r.BYTES)),p=r.fromBytes(g.subarray(r.BYTES,2*r.BYTES));return{x:_,y:p}});function s(E){let{a:g,b:_}=e,p=r.sqr(E),x=r.mul(p,E);return r.add(r.add(x,r.mul(E,g)),_)}if(!r.eql(r.sqr(e.Gy),s(e.Gx)))throw new Error("bad generator point: equation left != right");function o(E){return typeof E=="bigint"&&yt<E&&E<e.n}function a(E){if(!o(E))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function u(E){let{allowedPrivateKeyLengths:g,nByteLength:_,wrapPrivateKey:p,n:x}=e;if(g&&typeof E!="bigint"){if(fe.isBytes(E)&&(E=fe.bytesToHex(E)),typeof E!="string"||!g.includes(E.length))throw new Error("Invalid key");E=E.padStart(_*2,"0")}let v;try{v=typeof E=="bigint"?E:fe.bytesToNumberBE((0,Nt.ensureBytes)("private key",E,_))}catch{throw new Error(`private key must be ${_} bytes, hex or bigint, not ${typeof E}`)}return p&&(v=nn.mod(v,x)),a(v),v}let c=new Map;function l(E){if(!(E instanceof f))throw new Error("ProjectivePoint expected")}class f{constructor(g,_,p){if(this.px=g,this.py=_,this.pz=p,g==null||!r.isValid(g))throw new Error("x required");if(_==null||!r.isValid(_))throw new Error("y required");if(p==null||!r.isValid(p))throw new Error("z required")}static fromAffine(g){let{x:_,y:p}=g||{};if(!g||!r.isValid(_)||!r.isValid(p))throw new Error("invalid affine point");if(g instanceof f)throw new Error("projective point not allowed");let x=v=>r.eql(v,r.ZERO);return x(_)&&x(p)?f.ZERO:new f(_,p,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(g){let _=r.invertBatch(g.map(p=>p.pz));return g.map((p,x)=>p.toAffine(_[x])).map(f.fromAffine)}static fromHex(g){let _=f.fromAffine(i((0,Nt.ensureBytes)("pointHex",g)));return _.assertValidity(),_}static fromPrivateKey(g){return f.BASE.multiply(u(g))}_setWindowSize(g){this._WINDOW_SIZE=g,c.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!r.is0(this.py))return;throw new Error("bad point: ZERO")}let{x:g,y:_}=this.toAffine();if(!r.isValid(g)||!r.isValid(_))throw new Error("bad point: x or y not FE");let p=r.sqr(_),x=s(g);if(!r.eql(p,x))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){let{y:g}=this.toAffine();if(r.isOdd)return!r.isOdd(g);throw new Error("Field doesn't support isOdd")}equals(g){l(g);let{px:_,py:p,pz:x}=this,{px:v,py:S,pz:P}=g,R=r.eql(r.mul(_,P),r.mul(v,x)),O=r.eql(r.mul(p,P),r.mul(S,x));return R&&O}negate(){return new f(this.px,r.neg(this.py),this.pz)}double(){let{a:g,b:_}=e,p=r.mul(_,Si),{px:x,py:v,pz:S}=this,P=r.ZERO,R=r.ZERO,O=r.ZERO,M=r.mul(x,x),ge=r.mul(v,v),J=r.mul(S,S),Z=r.mul(x,v);return Z=r.add(Z,Z),O=r.mul(x,S),O=r.add(O,O),P=r.mul(g,O),R=r.mul(p,J),R=r.add(P,R),P=r.sub(ge,R),R=r.add(ge,R),R=r.mul(P,R),P=r.mul(Z,P),O=r.mul(p,O),J=r.mul(g,J),Z=r.sub(M,J),Z=r.mul(g,Z),Z=r.add(Z,O),O=r.add(M,M),M=r.add(O,M),M=r.add(M,J),M=r.mul(M,Z),R=r.add(R,M),J=r.mul(v,S),J=r.add(J,J),M=r.mul(J,Z),P=r.sub(P,M),O=r.mul(J,ge),O=r.add(O,O),O=r.add(O,O),new f(P,R,O)}add(g){l(g);let{px:_,py:p,pz:x}=this,{px:v,py:S,pz:P}=g,R=r.ZERO,O=r.ZERO,M=r.ZERO,ge=e.a,J=r.mul(e.b,Si),Z=r.mul(_,v),Ye=r.mul(p,S),Ze=r.mul(x,P),Wt=r.add(_,p),I=r.add(v,S);Wt=r.mul(Wt,I),I=r.add(Z,Ye),Wt=r.sub(Wt,I),I=r.add(_,x);let N=r.add(v,P);return I=r.mul(I,N),N=r.add(Z,Ze),I=r.sub(I,N),N=r.add(p,x),R=r.add(S,P),N=r.mul(N,R),R=r.add(Ye,Ze),N=r.sub(N,R),M=r.mul(ge,I),R=r.mul(J,Ze),M=r.add(R,M),R=r.sub(Ye,M),M=r.add(Ye,M),O=r.mul(R,M),Ye=r.add(Z,Z),Ye=r.add(Ye,Z),Ze=r.mul(ge,Ze),I=r.mul(J,I),Ye=r.add(Ye,Ze),Ze=r.sub(Z,Ze),Ze=r.mul(ge,Ze),I=r.add(I,Ze),Z=r.mul(Ye,I),O=r.add(O,Z),Z=r.mul(N,I),R=r.mul(Wt,R),R=r.sub(R,Z),Z=r.mul(Wt,Ye),M=r.mul(N,M),M=r.add(M,Z),new f(R,O,M)}subtract(g){return this.add(g.negate())}is0(){return this.equals(f.ZERO)}wNAF(g){return y.wNAFCached(this,c,g,_=>{let p=r.invertBatch(_.map(x=>x.pz));return _.map((x,v)=>x.toAffine(p[v])).map(f.fromAffine)})}multiplyUnsafe(g){let _=f.ZERO;if(g===yt)return _;if(a(g),g===le)return this;let{endo:p}=e;if(!p)return y.unsafeLadder(this,g);let{k1neg:x,k1:v,k2neg:S,k2:P}=p.splitScalar(g),R=_,O=_,M=this;for(;v>yt||P>yt;)v&le&&(R=R.add(M)),P&le&&(O=O.add(M)),M=M.double(),v>>=le,P>>=le;return x&&(R=R.negate()),S&&(O=O.negate()),O=new f(r.mul(O.px,p.beta),O.py,O.pz),R.add(O)}multiply(g){a(g);let _=g,p,x,{endo:v}=e;if(v){let{k1neg:S,k1:P,k2neg:R,k2:O}=v.splitScalar(_),{p:M,f:ge}=this.wNAF(P),{p:J,f:Z}=this.wNAF(O);M=y.constTimeNegate(S,M),J=y.constTimeNegate(R,J),J=new f(r.mul(J.px,v.beta),J.py,J.pz),p=M.add(J),x=ge.add(Z)}else{let{p:S,f:P}=this.wNAF(_);p=S,x=P}return f.normalizeZ([p,x])[0]}multiplyAndAddUnsafe(g,_,p){let x=f.BASE,v=(P,R)=>R===yt||R===le||!P.equals(x)?P.multiplyUnsafe(R):P.multiply(R),S=v(this,_).add(v(g,p));return S.is0()?void 0:S}toAffine(g){let{px:_,py:p,pz:x}=this,v=this.is0();g==null&&(g=v?r.ONE:r.inv(x));let S=r.mul(_,g),P=r.mul(p,g),R=r.mul(x,g);if(v)return{x:r.ZERO,y:r.ZERO};if(!r.eql(R,r.ONE))throw new Error("invZ was invalid");return{x:S,y:P}}isTorsionFree(){let{h:g,isTorsionFree:_}=e;if(g===le)return!0;if(_)return _(f,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:g,clearCofactor:_}=e;return g===le?this:_?_(f,this):this.multiplyUnsafe(e.h)}toRawBytes(g=!0){return this.assertValidity(),n(f,this,g)}toHex(g=!0){return fe.bytesToHex(this.toRawBytes(g))}}f.BASE=new f(e.Gx,e.Gy,r.ONE),f.ZERO=new f(r.ZERO,r.ONE,r.ZERO);let b=e.nBitLength,y=(0,Io.wNAF)(f,e.endo?Math.ceil(b/2):b);return{CURVE:e,ProjectivePoint:f,normPrivateKeyToScalar:u,weierstrassEquation:s,isWithinCurveOrder:o}}function ty(t){let e=(0,Io.validateBasic)(t);return fe.validateObject(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function ry(t){let e=ty(t),{Fp:r,n}=e,i=r.BYTES+1,s=2*r.BYTES+1;function o(I){return yt<I&&I<r.ORDER}function a(I){return nn.mod(I,n)}function u(I){return nn.invert(I,n)}let{ProjectivePoint:c,normPrivateKeyToScalar:l,weierstrassEquation:f,isWithinCurveOrder:b}=Ac({...e,toBytes(I,N,V){let ne=N.toAffine(),ee=r.toBytes(ne.x),Te=fe.concatBytes;return V?Te(Uint8Array.from([N.hasEvenY()?2:3]),ee):Te(Uint8Array.from([4]),ee,r.toBytes(ne.y))},fromBytes(I){let N=I.length,V=I[0],ne=I.subarray(1);if(N===i&&(V===2||V===3)){let ee=fe.bytesToNumberBE(ne);if(!o(ee))throw new Error("Point is not on curve");let Te=f(ee),De;try{De=r.sqrt(Te)}catch(ht){let Zt=ht instanceof Error?": "+ht.message:"";throw new Error("Point is not on curve"+Zt)}let Ke=(De&le)===le;return(V&1)===1!==Ke&&(De=r.neg(De)),{x:ee,y:De}}else if(N===s&&V===4){let ee=r.fromBytes(ne.subarray(0,r.BYTES)),Te=r.fromBytes(ne.subarray(r.BYTES,2*r.BYTES));return{x:ee,y:Te}}else throw new Error(`Point of length ${N} was invalid. Expected ${i} compressed bytes or ${s} uncompressed bytes`)}}),y=I=>fe.bytesToHex(fe.numberToBytesBE(I,e.nByteLength));function E(I){let N=n>>le;return I>N}function g(I){return E(I)?a(-I):I}let _=(I,N,V)=>fe.bytesToNumberBE(I.slice(N,V));class p{constructor(N,V,ne){this.r=N,this.s=V,this.recovery=ne,this.assertValidity()}static fromCompact(N){let V=e.nByteLength;return N=(0,Nt.ensureBytes)("compactSignature",N,V*2),new p(_(N,0,V),_(N,V,2*V))}static fromDER(N){let{r:V,s:ne}=He.DER.toSig((0,Nt.ensureBytes)("DER",N));return new p(V,ne)}assertValidity(){if(!b(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!b(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(N){return new p(this.r,this.s,N)}recoverPublicKey(N){let{r:V,s:ne,recovery:ee}=this,Te=O((0,Nt.ensureBytes)("msgHash",N));if(ee==null||![0,1,2,3].includes(ee))throw new Error("recovery id invalid");let De=ee===2||ee===3?V+e.n:V;if(De>=r.ORDER)throw new Error("recovery id 2 or 3 invalid");let Ke=(ee&1)===0?"02":"03",Yt=c.fromHex(Ke+y(De)),ht=u(De),Zt=a(-Te*ht),Cn=a(ne*ht),Xt=c.BASE.multiplyAndAddUnsafe(Yt,Zt,Cn);if(!Xt)throw new Error("point at infinify");return Xt.assertValidity(),Xt}hasHighS(){return E(this.s)}normalizeS(){return this.hasHighS()?new p(this.r,a(-this.s),this.recovery):this}toDERRawBytes(){return fe.hexToBytes(this.toDERHex())}toDERHex(){return He.DER.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return fe.hexToBytes(this.toCompactHex())}toCompactHex(){return y(this.r)+y(this.s)}}let x={isValidPrivateKey(I){try{return l(I),!0}catch{return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{let I=nn.getMinHashLength(e.n);return nn.mapHashToField(e.randomBytes(I),e.n)},precompute(I=8,N=c.BASE){return N._setWindowSize(I),N.multiply(BigInt(3)),N}};function v(I,N=!0){return c.fromPrivateKey(I).toRawBytes(N)}function S(I){let N=fe.isBytes(I),V=typeof I=="string",ne=(N||V)&&I.length;return N?ne===i||ne===s:V?ne===2*i||ne===2*s:I instanceof c}function P(I,N,V=!0){if(S(I))throw new Error("first arg must be private key");if(!S(N))throw new Error("second arg must be public key");return c.fromHex(N).multiply(l(I)).toRawBytes(V)}let R=e.bits2int||function(I){let N=fe.bytesToNumberBE(I),V=I.length*8-e.nBitLength;return V>0?N>>BigInt(V):N},O=e.bits2int_modN||function(I){return a(R(I))},M=fe.bitMask(e.nBitLength);function ge(I){if(typeof I!="bigint")throw new Error("bigint expected");if(!(yt<=I&&I<M))throw new Error(`bigint expected < 2^${e.nBitLength}`);return fe.numberToBytesBE(I,e.nByteLength)}function J(I,N,V=Z){if(["recovered","canonical"].some(Er=>Er in V))throw new Error("sign() legacy options not supported");let{hash:ne,randomBytes:ee}=e,{lowS:Te,prehash:De,extraEntropy:Ke}=V;Te==null&&(Te=!0),I=(0,Nt.ensureBytes)("msgHash",I),De&&(I=(0,Nt.ensureBytes)("prehashed msgHash",ne(I)));let Yt=O(I),ht=l(N),Zt=[ge(ht),ge(Yt)];if(Ke!=null&&Ke!==!1){let Er=Ke===!0?ee(r.BYTES):Ke;Zt.push((0,Nt.ensureBytes)("extraEntropy",Er))}let Cn=fe.concatBytes(...Zt),Xt=Yt;function Ws(Er){let $r=R(Er);if(!b($r))return;let Bu=u($r),zr=c.BASE.multiply($r).toAffine(),dt=a(zr.x);if(dt===yt)return;let Wr=a(Bu*a(Xt+dt*ht));if(Wr===yt)return;let xu=(zr.x===dt?0:2)|Number(zr.y&le),Tu=Wr;return Te&&E(Wr)&&(Tu=g(Wr),xu^=1),new p(dt,Tu,xu)}return{seed:Cn,k2sig:Ws}}let Z={lowS:e.lowS,prehash:!1},Ye={lowS:e.lowS,prehash:!1};function Ze(I,N,V=Z){let{seed:ne,k2sig:ee}=J(I,N,V),Te=e;return fe.createHmacDrbg(Te.hash.outputLen,Te.nByteLength,Te.hmac)(ne,ee)}c.BASE._setWindowSize(8);function Wt(I,N,V,ne=Ye){var zr;let ee=I;if(N=(0,Nt.ensureBytes)("msgHash",N),V=(0,Nt.ensureBytes)("publicKey",V),"strict"in ne)throw new Error("options.strict was renamed to lowS");let{lowS:Te,prehash:De}=ne,Ke,Yt;try{if(typeof ee=="string"||fe.isBytes(ee))try{Ke=p.fromDER(ee)}catch(dt){if(!(dt instanceof He.DER.Err))throw dt;Ke=p.fromCompact(ee)}else if(typeof ee=="object"&&typeof ee.r=="bigint"&&typeof ee.s=="bigint"){let{r:dt,s:Wr}=ee;Ke=new p(dt,Wr)}else throw new Error("PARSE");Yt=c.fromHex(V)}catch(dt){if(dt.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(Te&&Ke.hasHighS())return!1;De&&(N=e.hash(N));let{r:ht,s:Zt}=Ke,Cn=O(N),Xt=u(Zt),Ws=a(Cn*Xt),Er=a(ht*Xt),$r=(zr=c.BASE.multiplyAndAddUnsafe(Yt,Ws,Er))==null?void 0:zr.toAffine();return $r?a($r.x)===ht:!1}return{CURVE:e,getPublicKey:v,getSharedSecret:P,sign:Ze,verify:Wt,ProjectivePoint:c,Signature:p,utils:x}}function Rc(t,e){let r=t.ORDER,n=yt;for(let E=r-le;E%nr===yt;E/=nr)n+=le;let i=n,s=nr<<i-le-le,o=s*nr,a=(r-le)/o,u=(a-le)/nr,c=o-le,l=s,f=t.pow(e,a),b=t.pow(e,(a+le)/nr),y=(E,g)=>{let _=f,p=t.pow(g,c),x=t.sqr(p);x=t.mul(x,g);let v=t.mul(E,x);v=t.pow(v,u),v=t.mul(v,p),p=t.mul(v,g),x=t.mul(v,E);let S=t.mul(x,p);v=t.pow(S,l);let P=t.eql(v,t.ONE);p=t.mul(x,b),v=t.mul(S,_),x=t.cmov(p,x,P),S=t.cmov(v,S,P);for(let R=i;R>le;R--){let O=R-nr;O=nr<<O-le;let M=t.pow(S,O),ge=t.eql(M,t.ONE);p=t.mul(x,_),_=t.mul(_,_),M=t.mul(S,_),x=t.cmov(p,x,ge),S=t.cmov(M,S,ge)}return{isValid:P,value:x}};if(t.ORDER%Sc===Si){let E=(t.ORDER-Si)/Sc,g=t.sqrt(t.neg(e));y=(_,p)=>{let x=t.sqr(p),v=t.mul(_,p);x=t.mul(x,v);let S=t.pow(x,E);S=t.mul(S,v);let P=t.mul(S,g),R=t.mul(t.sqr(S),p),O=t.eql(R,_),M=t.cmov(P,S,O);return{isValid:O,value:M}}}return y}function ny(t,e){if(nn.validateField(t),!t.isValid(e.A)||!t.isValid(e.B)||!t.isValid(e.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");let r=Rc(t,e.Z);if(!t.isOdd)throw new Error("Fp.isOdd is not implemented!");return n=>{let i,s,o,a,u,c,l,f;i=t.sqr(n),i=t.mul(i,e.Z),s=t.sqr(i),s=t.add(s,i),o=t.add(s,t.ONE),o=t.mul(o,e.B),a=t.cmov(e.Z,t.neg(s),!t.eql(s,t.ZERO)),a=t.mul(a,e.A),s=t.sqr(o),c=t.sqr(a),u=t.mul(c,e.A),s=t.add(s,u),s=t.mul(s,o),c=t.mul(c,a),u=t.mul(c,e.B),s=t.add(s,u),l=t.mul(i,o);let{isValid:b,value:y}=r(s,c);f=t.mul(i,n),f=t.mul(f,y),l=t.cmov(l,o,b),f=t.cmov(f,y,b);let E=t.isOdd(n)===t.isOdd(f);return f=t.cmov(t.neg(f),f,E),l=t.div(l,a),{x:l,y:f}}}});var Oc=B(Ai=>{"use strict";d();Object.defineProperty(Ai,"__esModule",{value:!0});Ai.getHash=Lc;Ai.createCurve=oy;var iy=fc(),Nc=Rt(),sy=So();function Lc(t){return{hash:t,hmac:(e,...r)=>(0,iy.hmac)(t,e,(0,Nc.concatBytes)(...r)),randomBytes:Nc.randomBytes}}function oy(t,e){let r=n=>(0,sy.weierstrass)({...t,...Lc(n)});return Object.freeze({...r(e),create:r})}});var kc=B(Ir=>{"use strict";d();Object.defineProperty(Ir,"__esModule",{value:!0});Ir.expand_message_xmd=Cc;Ir.expand_message_xof=Pc;Ir.hash_to_field=Ao;Ir.isogenyMap=fy;Ir.createHasher=ly;var ay=Hn(),Ce=vr(),uy=Ce.bytesToNumberBE;function ir(t,e){if(t<0||t>=1<<8*e)throw new Error(`bad I2OSP call: value=${t} length=${e}`);let r=Array.from({length:e}).fill(0);for(let n=e-1;n>=0;n--)r[n]=t&255,t>>>=8;return new Uint8Array(r)}function cy(t,e){let r=new Uint8Array(t.length);for(let n=0;n<t.length;n++)r[n]=t[n]^e[n];return r}function Ro(t){if(!Number.isSafeInteger(t))throw new Error("number expected")}function Cc(t,e,r,n){(0,Ce.abytes)(t),(0,Ce.abytes)(e),Ro(r),e.length>255&&(e=n((0,Ce.concatBytes)((0,Ce.utf8ToBytes)("H2C-OVERSIZE-DST-"),e)));let{outputLen:i,blockLen:s}=n,o=Math.ceil(r/i);if(o>255)throw new Error("Invalid xmd length");let a=(0,Ce.concatBytes)(e,ir(e.length,1)),u=ir(0,s),c=ir(r,2),l=new Array(o),f=n((0,Ce.concatBytes)(u,t,c,ir(0,1),a));l[0]=n((0,Ce.concatBytes)(f,ir(1,1),a));for(let y=1;y<=o;y++){let E=[cy(f,l[y-1]),ir(y+1,1),a];l[y]=n((0,Ce.concatBytes)(...E))}return(0,Ce.concatBytes)(...l).slice(0,r)}function Pc(t,e,r,n,i){if((0,Ce.abytes)(t),(0,Ce.abytes)(e),Ro(r),e.length>255){let s=Math.ceil(2*n/8);e=i.create({dkLen:s}).update((0,Ce.utf8ToBytes)("H2C-OVERSIZE-DST-")).update(e).digest()}if(r>65535||e.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return i.create({dkLen:r}).update(t).update(ir(r,2)).update(e).update(ir(e.length,1)).digest()}function Ao(t,e,r){(0,Ce.validateObject)(r,{DST:"stringOrUint8Array",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});let{p:n,k:i,m:s,hash:o,expand:a,DST:u}=r;(0,Ce.abytes)(t),Ro(e);let c=typeof u=="string"?(0,Ce.utf8ToBytes)(u):u,l=n.toString(2).length,f=Math.ceil((l+i)/8),b=e*s*f,y;if(a==="xmd")y=Cc(t,c,b,o);else if(a==="xof")y=Pc(t,c,b,i,o);else if(a==="_internal_pass")y=t;else throw new Error('expand must be "xmd" or "xof"');let E=new Array(e);for(let g=0;g<e;g++){let _=new Array(s);for(let p=0;p<s;p++){let x=f*(p+g*s),v=y.subarray(x,x+f);_[p]=(0,ay.mod)(uy(v),n)}E[g]=_}return E}function fy(t,e){let r=e.map(n=>Array.from(n).reverse());return(n,i)=>{let[s,o,a,u]=r.map(c=>c.reduce((l,f)=>t.add(t.mul(l,n),f)));return n=t.div(s,o),i=t.mul(i,t.div(a,u)),{x:n,y:i}}}function ly(t,e,r){if(typeof e!="function")throw new Error("mapToCurve() must be defined");return{hashToCurve(n,i){let s=Ao(n,2,{...r,DST:r.DST,...i}),o=t.fromAffine(e(s[0])),a=t.fromAffine(e(s[1])),u=o.add(a).clearCofactor();return u.assertValidity(),u},encodeToCurve(n,i){let s=Ao(n,1,{...r,DST:r.encodeDST,...i}),o=t.fromAffine(e(s[0])).clearCofactor();return o.assertValidity(),o},mapToCurve(n){if(!Array.isArray(n))throw new Error("mapToCurve: expected array of bigints");for(let s of n)if(typeof s!="bigint")throw new Error(`mapToCurve: expected array of bigints, got ${s} in array`);let i=t.fromAffine(e(n)).clearCofactor();return i.assertValidity(),i}}}});var $c=B(Ve=>{"use strict";d();Object.defineProperty(Ve,"__esModule",{value:!0});Ve.encodeToCurve=Ve.hashToCurve=Ve.schnorr=Ve.secp256k1=void 0;var Ri=wo(),hy=Rt(),dy=Oc(),qc=kc(),Ie=Hn(),Pe=vr(),yy=So(),Ci=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),Ni=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),Mc=BigInt(1),Li=BigInt(2),Uc=(t,e)=>(t+e/Li)/e;function Fc(t){let e=Ci,r=BigInt(3),n=BigInt(6),i=BigInt(11),s=BigInt(22),o=BigInt(23),a=BigInt(44),u=BigInt(88),c=t*t*t%e,l=c*c*t%e,f=(0,Ie.pow2)(l,r,e)*l%e,b=(0,Ie.pow2)(f,r,e)*l%e,y=(0,Ie.pow2)(b,Li,e)*c%e,E=(0,Ie.pow2)(y,i,e)*y%e,g=(0,Ie.pow2)(E,s,e)*E%e,_=(0,Ie.pow2)(g,a,e)*g%e,p=(0,Ie.pow2)(_,u,e)*_%e,x=(0,Ie.pow2)(p,a,e)*g%e,v=(0,Ie.pow2)(x,r,e)*l%e,S=(0,Ie.pow2)(v,o,e)*E%e,P=(0,Ie.pow2)(S,n,e)*c%e,R=(0,Ie.pow2)(P,Li,e);if(!sr.eql(sr.sqr(R),t))throw new Error("Cannot find square root");return R}var sr=(0,Ie.Field)(Ci,void 0,void 0,{sqrt:Fc});Ve.secp256k1=(0,dy.createCurve)({a:BigInt(0),b:BigInt(7),Fp:sr,n:Ni,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:t=>{let e=Ni,r=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-Mc*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),i=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),s=r,o=BigInt("0x100000000000000000000000000000000"),a=Uc(s*t,e),u=Uc(-n*t,e),c=(0,Ie.mod)(t-a*r-u*i,e),l=(0,Ie.mod)(-a*n-u*s,e),f=c>o,b=l>o;if(f&&(c=e-c),b&&(l=e-l),c>o||l>o)throw new Error("splitScalar: Endomorphism failed, k="+t);return{k1neg:f,k1:c,k2neg:b,k2:l}}}},Ri.sha256);var Pi=BigInt(0),jc=t=>typeof t=="bigint"&&Pi<t&&t<Ci,gy=t=>typeof t=="bigint"&&Pi<t&&t<Ni,Hc={};function Oi(t,...e){let r=Hc[t];if(r===void 0){let n=(0,Ri.sha256)(Uint8Array.from(t,i=>i.charCodeAt(0)));r=(0,Pe.concatBytes)(n,n),Hc[t]=r}return(0,Ri.sha256)((0,Pe.concatBytes)(r,...e))}var Co=t=>t.toRawBytes(!0).slice(1),Lo=t=>(0,Pe.numberToBytesBE)(t,32),No=t=>(0,Ie.mod)(t,Ci),qn=t=>(0,Ie.mod)(t,Ni),Po=Ve.secp256k1.ProjectivePoint,py=(t,e,r)=>Po.BASE.multiplyAndAddUnsafe(t,e,r);function Oo(t){let e=Ve.secp256k1.utils.normPrivateKeyToScalar(t),r=Po.fromPrivateKey(e);return{scalar:r.hasEvenY()?e:qn(-e),bytes:Co(r)}}function Dc(t){if(!jc(t))throw new Error("bad x: need 0 < x < p");let e=No(t*t),r=No(e*t+BigInt(7)),n=Fc(r);n%Li!==Pi&&(n=No(-n));let i=new Po(t,n,Mc);return i.assertValidity(),i}function Kc(...t){return qn((0,Pe.bytesToNumberBE)(Oi("BIP0340/challenge",...t)))}function by(t){return Oo(t).bytes}function wy(t,e,r=(0,hy.randomBytes)(32)){let n=(0,Pe.ensureBytes)("message",t),{bytes:i,scalar:s}=Oo(e),o=(0,Pe.ensureBytes)("auxRand",r,32),a=Lo(s^(0,Pe.bytesToNumberBE)(Oi("BIP0340/aux",o))),u=Oi("BIP0340/nonce",a,i,n),c=qn((0,Pe.bytesToNumberBE)(u));if(c===Pi)throw new Error("sign failed: k is zero");let{bytes:l,scalar:f}=Oo(c),b=Kc(l,i,n),y=new Uint8Array(64);if(y.set(l,0),y.set(Lo(qn(f+b*s)),32),!Gc(y,n,i))throw new Error("sign: Invalid signature produced");return y}function Gc(t,e,r){let n=(0,Pe.ensureBytes)("signature",t,64),i=(0,Pe.ensureBytes)("message",e),s=(0,Pe.ensureBytes)("publicKey",r,32);try{let o=Dc((0,Pe.bytesToNumberBE)(s)),a=(0,Pe.bytesToNumberBE)(n.subarray(0,32));if(!jc(a))return!1;let u=(0,Pe.bytesToNumberBE)(n.subarray(32,64));if(!gy(u))return!1;let c=Kc(Lo(a),Co(o),i),l=py(o,u,qn(-c));return!(!l||!l.hasEvenY()||l.toAffine().x!==a)}catch{return!1}}Ve.schnorr={getPublicKey:by,sign:wy,verify:Gc,utils:{randomPrivateKey:Ve.secp256k1.utils.randomPrivateKey,lift_x:Dc,pointToBytes:Co,numberToBytesBE:Pe.numberToBytesBE,bytesToNumberBE:Pe.bytesToNumberBE,taggedHash:Oi,mod:Ie.mod}};var _y=(0,qc.isogenyMap)(sr,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map(t=>t.map(e=>BigInt(e)))),Ey=(0,yy.mapToCurveSimpleSWU)(sr,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:sr.create(BigInt("-11"))}),Vc=(0,qc.createHasher)(Ve.secp256k1.ProjectivePoint,t=>{let{x:e,y:r}=Ey(sr.create(t[0]));return _y(e,r)},{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:sr.ORDER,m:1,k:128,expand:"xmd",hash:Ri.sha256});Ve.hashToCurve=Vc.hashToCurve;Ve.encodeToCurve=Vc.encodeToCurve});var Ui=B(ki=>{"use strict";d();Object.defineProperty(ki,"__esModule",{value:!0});ki.secp256k1=void 0;var my=$c();Object.defineProperty(ki,"secp256k1",{enumerable:!0,get:function(){return my.secp256k1}})});var Wc=B(Hi=>{"use strict";d();Object.defineProperty(Hi,"__esModule",{value:!0});Hi.getRandomBytesSync=By;Hi.getRandomBytes=xy;var zc=Rt();function By(t){return(0,zc.randomBytes)(t)}async function xy(t){return(0,zc.randomBytes)(t)}});var Sr=B((ae,Mn)=>{"use strict";d();var Ty=ae&&ae.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ae,"__esModule",{value:!0});ae.crypto=ae.utf8ToBytes=ae.createView=ae.concatBytes=ae.toHex=ae.bytesToHex=ae.assertBytes=ae.assertBool=void 0;ae.bytesToUtf8=Ay;ae.hexToBytes=Ry;ae.equalsBytes=Ny;ae.wrapHash=Ly;var ko=Ty(tn()),vy=Rt(),Iy=ko.default.bool;ae.assertBool=Iy;var Sy=ko.default.bytes;ae.assertBytes=Sy;var Fn=Rt();Object.defineProperty(ae,"bytesToHex",{enumerable:!0,get:function(){return Fn.bytesToHex}});Object.defineProperty(ae,"toHex",{enumerable:!0,get:function(){return Fn.bytesToHex}});Object.defineProperty(ae,"concatBytes",{enumerable:!0,get:function(){return Fn.concatBytes}});Object.defineProperty(ae,"createView",{enumerable:!0,get:function(){return Fn.createView}});Object.defineProperty(ae,"utf8ToBytes",{enumerable:!0,get:function(){return Fn.utf8ToBytes}});function Ay(t){if(!(t instanceof Uint8Array))throw new TypeError(`bytesToUtf8 expected Uint8Array, got ${typeof t}`);return new TextDecoder().decode(t)}function Ry(t){let e=t.startsWith("0x")?t.substring(2):t;return(0,vy.hexToBytes)(e)}function Ny(t,e){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}function Ly(t){return e=>(ko.default.bytes(e),t(e))}ae.crypto=(()=>{let t=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0,e=typeof Mn!="undefined"&&typeof Mn.require=="function"&&Mn.require.bind(Mn);return{node:e&&!t?e("crypto"):void 0,web:t}})()});var Ar=B(pe=>{"use strict";d();Object.defineProperty(pe,"__esModule",{value:!0});pe.getKeys=pe.fromAscii=pe.fromUtf8=pe.toAscii=pe.arrayContainsArray=pe.getBinarySize=pe.padToEven=pe.stripHexPrefix=pe.isHexString=void 0;var Uo=$e();function Yc(t,e){return!(typeof t!="string"||!t.match(/^0x[0-9A-Fa-f]*$/)||typeof e!="undefined"&&e>0&&t.length!==2+2*e)}pe.isHexString=Yc;var Oy=t=>{if(typeof t!="string")throw new Error(`[stripHexPrefix] input must be type 'string', received ${typeof t}`);return Yc(t)?t.slice(2):t};pe.stripHexPrefix=Oy;function Zc(t){let e=t;if(typeof e!="string")throw new Error(`[padToEven] value must be type 'string', received ${typeof e}`);return e.length%2&&(e=`0${e}`),e}pe.padToEven=Zc;function Cy(t){if(typeof t!="string")throw new Error(`[getBinarySize] method requires input type 'string', received ${typeof t}`);return(0,Uo.utf8ToBytes)(t).byteLength}pe.getBinarySize=Cy;function Py(t,e,r){if(Array.isArray(t)!==!0)throw new Error(`[arrayContainsArray] method requires input 'superset' to be an array, got type '${typeof t}'`);if(Array.isArray(e)!==!0)throw new Error(`[arrayContainsArray] method requires input 'subset' to be an array, got type '${typeof e}'`);return e[r===!0?"some":"every"](n=>t.indexOf(n)>=0)}pe.arrayContainsArray=Py;function ky(t){let e="",r=0,n=t.length;for(t.substring(0,2)==="0x"&&(r=2);r<n;r+=2){let i=parseInt(t.substr(r,2),16);e+=String.fromCharCode(i)}return e}pe.toAscii=ky;function Uy(t){let e=(0,Uo.utf8ToBytes)(t);return`0x${Zc((0,Uo.bytesToUnprefixedHex)(e)).replace(/^0+|0+$/g,"")}`}pe.fromUtf8=Uy;function Hy(t){let e="";for(let r=0;r<t.length;r++){let i=t.charCodeAt(r).toString(16);e+=i.length<2?`0${i}`:i}return`0x${e}`}pe.fromAscii=Hy;function qy(t,e,r){if(!Array.isArray(t))throw new Error(`[getKeys] method expects input 'params' to be an array, got ${typeof t}`);if(typeof e!="string")throw new Error(`[getKeys] method expects input 'key' to be type 'string', got ${typeof t}`);let n=[];for(let i=0;i<t.length;i++){let s=t[i][e];if(r===!0&&!s)s="";else if(typeof s!="string")throw new Error(`invalid abi - expected type 'string', received ${typeof s}`);n.push(s)}return n}pe.getKeys=qy});var qi=B(Lt=>{"use strict";d();Object.defineProperty(Lt,"__esModule",{value:!0});Lt.assertIsString=Lt.assertIsArray=Lt.assertIsBytes=Lt.assertIsHexString=void 0;var My=Ar(),Fy=function(t){if(!(0,My.isHexString)(t)){let e=`This method only supports 0x-prefixed hex strings but input was: ${t}`;throw new Error(e)}};Lt.assertIsHexString=Fy;var jy=function(t){if(!(t instanceof Uint8Array)){let e=`This method only supports Uint8Array but input was: ${t}`;throw new Error(e)}};Lt.assertIsBytes=jy;var Dy=function(t){if(!Array.isArray(t)){let e=`This method only supports number arrays but input was: ${t}`;throw new Error(e)}};Lt.assertIsArray=Dy;var Ky=function(t){if(typeof t!="string"){let e=`This method only supports strings but input was: ${t}`;throw new Error(e)}};Lt.assertIsString=Ky});var $e=B(m=>{"use strict";d();Object.defineProperty(m,"__esModule",{value:!0});m.hexToBigInt=m.utf8ToBytes=m.equalsBytes=m.bytesToUtf8=m.bigInt64ToBytes=m.int32ToBytes=m.bytesToBigInt64=m.bytesToInt32=m.concatBytes=m.randomBytes=m.compareBytes=m.intToUnpaddedBytes=m.bigIntToAddressBytes=m.bigIntToUnpaddedBytes=m.bigIntMin=m.bigIntMax=m.bigIntToHex=m.validateNoLeadingZeroes=m.short=m.addHexPrefix=m.toUnsigned=m.fromSigned=m.toBytes=m.unpadHex=m.unpadArray=m.unpadBytes=m.setLengthRight=m.setLengthLeft=m.zeros=m.bigIntToBytes=m.intToBytes=m.intToHex=m.hexToBytes=m.bytesToInt=m.bytesToBigInt=m.bytesToHex=m.unprefixedHexToBytes=m.bytesToUnprefixedHex=void 0;var Gy=Wc(),Vy=Sr(),jn=qi(),Rr=Ar(),Xc=BigInt(0);m.bytesToUnprefixedHex=Vy.bytesToHex;var Ho={},qo={};for(let t=0;t<16;t++){let e=t,r=t*16,n=t.toString(16).toLowerCase();qo[n]=e,qo[n.toUpperCase()]=e,Ho[n]=r,Ho[n.toUpperCase()]=r}function Qc(t){let e=t.length,r=new Uint8Array(e/2);for(let n=0;n<e;n+=2)r[n/2]=Ho[t[n]]+qo[t[n+1]];return r}var $y=t=>{if(t.slice(0,2)==="0x")throw new Error("hex string is prefixed with 0x, should be unprefixed");return Qc((0,Rr.padToEven)(t))};m.unprefixedHexToBytes=$y;var zy=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0")),Wy=t=>{let e="0x";if(t===void 0||t.length===0)return e;for(let r of t)e=`${e}${zy[r]}`;return e};m.bytesToHex=Wy;var Mo=[];for(let t=0;t<=256*256-1;t++)Mo[t]=BigInt(t);var Yy=(t,e=!1)=>{e&&t.reverse();let r=(0,m.bytesToHex)(t);return r==="0x"?Xc:r.length===4?Mo[t[0]]:r.length===6?Mo[t[0]*256+t[1]]:BigInt(r)};m.bytesToBigInt=Yy;var Zy=t=>{let e=Number((0,m.bytesToBigInt)(t));if(!Number.isSafeInteger(e))throw new Error("Number exceeds 53 bits");return e};m.bytesToInt=Zy;var Xy=t=>{if(typeof t!="string")throw new Error(`hex argument type ${typeof t} must be of type string`);if(!/^0x[0-9a-fA-F]*$/.test(t))throw new Error(`Input must be a 0x-prefixed hexadecimal string, got ${t}`);let e=t.slice(2);return Qc(e.length%2===0?e:(0,Rr.padToEven)(e))};m.hexToBytes=Xy;var Qy=t=>{if(!Number.isSafeInteger(t)||t<0)throw new Error(`Received an invalid integer type: ${t}`);return`0x${t.toString(16)}`};m.intToHex=Qy;var Jy=t=>{let e=(0,m.intToHex)(t);return(0,m.hexToBytes)(e)};m.intToBytes=Jy;var eg=(t,e=!1)=>{let r=(0,m.toBytes)(`0x${(0,Rr.padToEven)(t.toString(16))}`);return e?r.reverse():r};m.bigIntToBytes=eg;var tg=t=>new Uint8Array(t);m.zeros=tg;var Mi=(t,e,r)=>r?t.length<e?new Uint8Array([...t,...(0,m.zeros)(e-t.length)]):t.subarray(0,e):t.length<e?new Uint8Array([...(0,m.zeros)(e-t.length),...t]):t.subarray(-e),rg=(t,e)=>((0,jn.assertIsBytes)(t),Mi(t,e,!1));m.setLengthLeft=rg;var ng=(t,e)=>((0,jn.assertIsBytes)(t),Mi(t,e,!0));m.setLengthRight=ng;var Fo=t=>{let e=t[0];for(;t.length>0&&e.toString()==="0";)t=t.slice(1),e=t[0];return t},ig=t=>((0,jn.assertIsBytes)(t),Fo(t));m.unpadBytes=ig;var sg=t=>((0,jn.assertIsArray)(t),Fo(t));m.unpadArray=sg;var og=t=>((0,jn.assertIsHexString)(t),`0x${Fo((0,Rr.stripHexPrefix)(t))}`);m.unpadHex=og;var ag=t=>{if(t==null)return new Uint8Array;if(Array.isArray(t)||t instanceof Uint8Array)return Uint8Array.from(t);if(typeof t=="string"){if(!(0,Rr.isHexString)(t))throw new Error(`Cannot convert string to Uint8Array. toBytes only supports 0x-prefixed hex strings and this string was given: ${t}`);return(0,m.hexToBytes)(t)}if(typeof t=="number")return(0,m.intToBytes)(t);if(typeof t=="bigint"){if(t<Xc)throw new Error(`Cannot convert negative bigint to Uint8Array. Given: ${t}`);let e=t.toString(16);return e.length%2&&(e="0"+e),(0,m.unprefixedHexToBytes)(e)}if(t.toBytes!==void 0)return t.toBytes();throw new Error("invalid type")};m.toBytes=ag;var ug=t=>BigInt.asIntN(256,(0,m.bytesToBigInt)(t));m.fromSigned=ug;var cg=t=>(0,m.bigIntToBytes)(BigInt.asUintN(256,t));m.toUnsigned=cg;var fg=t=>typeof t!="string"||(0,Rr.isHexString)(t)?t:`0x${t}`;m.addHexPrefix=fg;var lg=(t,e=50)=>{let r=t instanceof Uint8Array?(0,m.bytesToHex)(t):t,n=r.slice(0,2)==="0x"?e+2:e;return r.length<=n?r:r.slice(0,n)+"\u2026"};m.short=lg;var hg=t=>{for(let[e,r]of Object.entries(t))if(r!==void 0&&r.length>0&&r[0]===0)throw new Error(`${e} cannot have leading zeroes, received: ${(0,m.bytesToHex)(r)}`)};m.validateNoLeadingZeroes=hg;var dg=t=>`0x${t.toString(16)}`;m.bigIntToHex=dg;var yg=(...t)=>t.reduce((e,r)=>r>e?r:e);m.bigIntMax=yg;var gg=(...t)=>t.reduce((e,r)=>r<e?r:e);m.bigIntMin=gg;var pg=t=>(0,m.unpadBytes)((0,m.bigIntToBytes)(t));m.bigIntToUnpaddedBytes=pg;var bg=(t,e=!0)=>{let r=(0,m.bigIntToBytes)(t);if(e&&r.length>20)throw Error(`Invalid address bytes length=${r.length} strict=${e}`);return(0,m.setLengthLeft)(r,20)};m.bigIntToAddressBytes=bg;var wg=t=>(0,m.unpadBytes)((0,m.intToBytes)(t));m.intToUnpaddedBytes=wg;var _g=(t,e)=>{let r=(0,m.bytesToBigInt)(t),n=(0,m.bytesToBigInt)(e);return r>n?1:r<n?-1:0};m.compareBytes=_g;var Eg=t=>(0,Gy.getRandomBytesSync)(t);m.randomBytes=Eg;var mg=(...t)=>{if(t.length===1)return t[0];let e=t.reduce((n,i)=>n+i.length,0),r=new Uint8Array(e);for(let n=0,i=0;n<t.length;n++){let s=t[n];r.set(s,i),i+=s.length}return r};m.concatBytes=mg;function Bg(t,e=!1){return t.length<4&&(t=Mi(t,4,e)),new DataView(t.buffer,t.byteOffset,t.byteLength).getUint32(0,e)}m.bytesToInt32=Bg;function xg(t,e=!1){return t.length<8&&(t=Mi(t,8,e)),new DataView(t.buffer,t.byteOffset,t.byteLength).getBigUint64(0,e)}m.bytesToBigInt64=xg;function Tg(t,e=!1){let r=new ArrayBuffer(4);return new DataView(r).setUint32(0,t,e),new Uint8Array(r)}m.int32ToBytes=Tg;function vg(t,e=!1){let r=new ArrayBuffer(8);return new DataView(r).setBigUint64(0,t,e),new Uint8Array(r)}m.bigInt64ToBytes=vg;var jo=Sr();Object.defineProperty(m,"bytesToUtf8",{enumerable:!0,get:function(){return jo.bytesToUtf8}});Object.defineProperty(m,"equalsBytes",{enumerable:!0,get:function(){return jo.equalsBytes}});Object.defineProperty(m,"utf8ToBytes",{enumerable:!0,get:function(){return jo.utf8ToBytes}});function Ig(t){return(0,m.bytesToBigInt)((0,m.hexToBytes)((0,Rr.isHexString)(t)?t:`0x${t}`))}m.hexToBigInt=Ig});var or=B(T=>{"use strict";d();Object.defineProperty(T,"__esModule",{value:!0});T.BIGINT_2EXP256=T.BIGINT_2EXP224=T.BIGINT_2EXP160=T.BIGINT_2EXP96=T.BIGINT_224=T.BIGINT_160=T.BIGINT_100=T.BIGINT_96=T.BIGINT_256=T.BIGINT_255=T.BIGINT_128=T.BIGINT_64=T.BIGINT_32=T.BIGINT_31=T.BIGINT_28=T.BIGINT_27=T.BIGINT_8=T.BIGINT_7=T.BIGINT_3=T.BIGINT_2=T.BIGINT_1=T.BIGINT_0=T.BIGINT_NEG1=T.RIPEMD160_ADDRESS_STRING=T.MAX_WITHDRAWALS_PER_PAYLOAD=T.RLP_EMPTY_STRING=T.KECCAK256_RLP=T.KECCAK256_RLP_S=T.KECCAK256_RLP_ARRAY=T.KECCAK256_RLP_ARRAY_S=T.KECCAK256_NULL=T.KECCAK256_NULL_S=T.TWO_POW256=T.SECP256K1_ORDER_DIV_2=T.SECP256K1_ORDER=T.MAX_INTEGER_BIGINT=T.MAX_INTEGER=T.MAX_UINT64=void 0;var Jc=Ui(),Do=$e();T.MAX_UINT64=BigInt("0xffffffffffffffff");T.MAX_INTEGER=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");T.MAX_INTEGER_BIGINT=BigInt("115792089237316195423570985008687907853269984665640564039457584007913129639935");T.SECP256K1_ORDER=Jc.secp256k1.CURVE.n;T.SECP256K1_ORDER_DIV_2=Jc.secp256k1.CURVE.n/BigInt(2);T.TWO_POW256=BigInt("0x10000000000000000000000000000000000000000000000000000000000000000");T.KECCAK256_NULL_S="0xc5d2460186f7233c927e7db2dcc703c0e500b653ca82273b7bfad8045d85a470";T.KECCAK256_NULL=(0,Do.hexToBytes)(T.KECCAK256_NULL_S);T.KECCAK256_RLP_ARRAY_S="0x1dcc4de8dec75d7aab85b567b6ccd41ad312451b948a7413f0a142fd40d49347";T.KECCAK256_RLP_ARRAY=(0,Do.hexToBytes)(T.KECCAK256_RLP_ARRAY_S);T.KECCAK256_RLP_S="0x56e81f171bcc55a6ff8345e692c0f86e5b48e01b996cadc001622fb5e363b421";T.KECCAK256_RLP=(0,Do.hexToBytes)(T.KECCAK256_RLP_S);T.RLP_EMPTY_STRING=Uint8Array.from([128]);T.MAX_WITHDRAWALS_PER_PAYLOAD=16;T.RIPEMD160_ADDRESS_STRING="0000000000000000000000000000000000000003";T.BIGINT_NEG1=BigInt(-1);T.BIGINT_0=BigInt(0);T.BIGINT_1=BigInt(1);T.BIGINT_2=BigInt(2);T.BIGINT_3=BigInt(3);T.BIGINT_7=BigInt(7);T.BIGINT_8=BigInt(8);T.BIGINT_27=BigInt(27);T.BIGINT_28=BigInt(28);T.BIGINT_31=BigInt(31);T.BIGINT_32=BigInt(32);T.BIGINT_64=BigInt(64);T.BIGINT_128=BigInt(128);T.BIGINT_255=BigInt(255);T.BIGINT_256=BigInt(256);T.BIGINT_96=BigInt(96);T.BIGINT_100=BigInt(100);T.BIGINT_160=BigInt(160);T.BIGINT_224=BigInt(224);T.BIGINT_2EXP96=BigInt(7922816251426434e13);T.BIGINT_2EXP160=BigInt(1461501637330903e33);T.BIGINT_2EXP224=BigInt(2695994666715064e52);T.BIGINT_2EXP256=T.BIGINT_2**T.BIGINT_256});var tf=B(sn=>{"use strict";d();Object.defineProperty(sn,"__esModule",{value:!0});sn.formatBigDecimal=sn.GWEI_TO_WEI=void 0;var ef=or();sn.GWEI_TO_WEI=BigInt(1e9);function Sg(t,e,r){e===ef.BIGINT_0&&(e=ef.BIGINT_1);let n=t/e,i=(t-n*e)*r/e,s=String(r).length-1-String(i).length;return`${n}.${"0".repeat(s)}${i}`}sn.formatBigDecimal=Sg});var zo=B(Ot=>{"use strict";d();Object.defineProperty(Ot,"__esModule",{value:!0});Ot.RLP=Ot.utils=Ot.decode=Ot.encode=void 0;function $o(t){if(Array.isArray(t)){let r=[],n=0;for(let i=0;i<t.length;i++){let s=$o(t[i]);r.push(s),n+=s.length}return Go(nf(n,192),...r)}let e=ff(t);return e.length===1&&e[0]<128?e:Go(nf(e.length,128),e)}Ot.encode=$o;function on(t,e,r){if(r>t.length)throw new Error("invalid RLP (safeSlice): end slice of Uint8Array out-of-bounds");return t.slice(e,r)}function rf(t){if(t[0]===0)throw new Error("invalid RLP: extra zeros");return af(of(t))}function nf(t,e){if(t<56)return Uint8Array.from([t+e]);let r=Vo(t),n=r.length/2,i=Vo(e+55+n);return Uint8Array.from(Fi(i+r))}function sf(t,e=!1){if(typeof t=="undefined"||t===null||t.length===0)return Uint8Array.from([]);let r=ff(t),n=Ko(r);if(e)return{data:n.data,remainder:n.remainder.slice()};if(n.remainder.length!==0)throw new Error("invalid RLP: remainder must be zero");return n.data}Ot.decode=sf;function Ko(t){let e,r,n,i,s,o=[],a=t[0];if(a<=127)return{data:t.slice(0,1),remainder:t.subarray(1)};if(a<=183){if(e=a-127,a===128?n=Uint8Array.from([]):n=on(t,1,e),e===2&&n[0]<128)throw new Error("invalid RLP encoding: invalid prefix, single byte < 0x80 are not prefixed");return{data:n,remainder:t.subarray(e)}}else if(a<=191){if(r=a-182,t.length-1<r)throw new Error("invalid RLP: not enough bytes for string length");if(e=rf(on(t,1,r)),e<=55)throw new Error("invalid RLP: expected string length to be greater than 55");return n=on(t,r,e+r),{data:n,remainder:t.subarray(e+r)}}else if(a<=247){for(e=a-191,i=on(t,1,e);i.length;)s=Ko(i),o.push(s.data),i=s.remainder;return{data:o,remainder:t.subarray(e)}}else{if(r=a-246,e=rf(on(t,1,r)),e<56)throw new Error("invalid RLP: encoded list too short");let u=r+e;if(u>t.length)throw new Error("invalid RLP: total length is larger than the data");for(i=on(t,r,u);i.length;)s=Ko(i),o.push(s.data),i=s.remainder;return{data:o,remainder:t.subarray(u)}}}var Ag=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function of(t){let e="";for(let r=0;r<t.length;r++)e+=Ag[t[r]];return e}function af(t){let e=Number.parseInt(t,16);if(Number.isNaN(e))throw new Error("Invalid byte sequence");return e}function Fi(t){if(typeof t!="string")throw new TypeError("hexToBytes: expected string, got "+typeof t);if(t.length%2)throw new Error("hexToBytes: received invalid unpadded hex");let e=new Uint8Array(t.length/2);for(let r=0;r<e.length;r++){let n=r*2;e[r]=af(t.slice(n,n+2))}return e}function Go(...t){if(t.length===1)return t[0];let e=t.reduce((n,i)=>n+i.length,0),r=new Uint8Array(e);for(let n=0,i=0;n<t.length;n++){let s=t[n];r.set(s,i),i+=s.length}return r}function uf(t){return new TextEncoder().encode(t)}function Vo(t){if(t<0)throw new Error("Invalid integer as argument, must be unsigned!");let e=t.toString(16);return e.length%2?`0${e}`:e}function Rg(t){return t.length%2?`0${t}`:t}function cf(t){return t.length>=2&&t[0]==="0"&&t[1]==="x"}function Ng(t){return typeof t!="string"?t:cf(t)?t.slice(2):t}function ff(t){if(t instanceof Uint8Array)return t;if(typeof t=="string")return cf(t)?Fi(Rg(Ng(t))):uf(t);if(typeof t=="number"||typeof t=="bigint")return t?Fi(Vo(t)):Uint8Array.from([]);if(t==null)return Uint8Array.from([]);throw new Error("toBytes: received unsupported type "+typeof t)}Ot.utils={bytesToHex:of,concatBytes:Go,hexToBytes:Fi,utf8ToBytes:uf};Ot.RLP={encode:$o,decode:sf}});var Of=B(F=>{"use strict";d();Object.defineProperty(F,"__esModule",{value:!0});F.add5L=F.add5H=F.add4H=F.add4L=F.add3H=F.add3L=F.add=F.rotlBL=F.rotlBH=F.rotlSL=F.rotlSH=F.rotr32L=F.rotr32H=F.rotrBL=F.rotrBH=F.rotrSL=F.rotrSH=F.shrSL=F.shrSH=F.toBig=F.split=F.fromBig=void 0;var ji=BigInt(2**32-1),Wo=BigInt(32);function Yo(t,e=!1){return e?{h:Number(t&ji),l:Number(t>>Wo&ji)}:{h:Number(t>>Wo&ji)|0,l:Number(t&ji)|0}}F.fromBig=Yo;function lf(t,e=!1){let r=new Uint32Array(t.length),n=new Uint32Array(t.length);for(let i=0;i<t.length;i++){let{h:s,l:o}=Yo(t[i],e);[r[i],n[i]]=[s,o]}return[r,n]}F.split=lf;var hf=(t,e)=>BigInt(t>>>0)<<Wo|BigInt(e>>>0);F.toBig=hf;var df=(t,e,r)=>t>>>r;F.shrSH=df;var yf=(t,e,r)=>t<<32-r|e>>>r;F.shrSL=yf;var gf=(t,e,r)=>t>>>r|e<<32-r;F.rotrSH=gf;var pf=(t,e,r)=>t<<32-r|e>>>r;F.rotrSL=pf;var bf=(t,e,r)=>t<<64-r|e>>>r-32;F.rotrBH=bf;var wf=(t,e,r)=>t>>>r-32|e<<64-r;F.rotrBL=wf;var _f=(t,e)=>e;F.rotr32H=_f;var Ef=(t,e)=>t;F.rotr32L=Ef;var mf=(t,e,r)=>t<<r|e>>>32-r;F.rotlSH=mf;var Bf=(t,e,r)=>e<<r|t>>>32-r;F.rotlSL=Bf;var xf=(t,e,r)=>e<<r-32|t>>>64-r;F.rotlBH=xf;var Tf=(t,e,r)=>t<<r-32|e>>>64-r;F.rotlBL=Tf;function vf(t,e,r,n){let i=(e>>>0)+(n>>>0);return{h:t+r+(i/2**32|0)|0,l:i|0}}F.add=vf;var If=(t,e,r)=>(t>>>0)+(e>>>0)+(r>>>0);F.add3L=If;var Sf=(t,e,r,n)=>e+r+n+(t/2**32|0)|0;F.add3H=Sf;var Af=(t,e,r,n)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0);F.add4L=Af;var Rf=(t,e,r,n,i)=>e+r+n+i+(t/2**32|0)|0;F.add4H=Rf;var Nf=(t,e,r,n,i)=>(t>>>0)+(e>>>0)+(r>>>0)+(n>>>0)+(i>>>0);F.add5L=Nf;var Lf=(t,e,r,n,i,s)=>e+r+n+i+s+(t/2**32|0)|0;F.add5H=Lf;var Lg={fromBig:Yo,split:lf,toBig:hf,shrSH:df,shrSL:yf,rotrSH:gf,rotrSL:pf,rotrBH:bf,rotrBL:wf,rotr32H:_f,rotr32L:Ef,rotlSH:mf,rotlSL:Bf,rotlBH:xf,rotlBL:Tf,add:vf,add3L:If,add3H:Sf,add4L:Af,add4H:Rf,add5H:Lf,add5L:Nf};F.default=Lg});var Ff=B(re=>{"use strict";d();Object.defineProperty(re,"__esModule",{value:!0});re.shake256=re.shake128=re.keccak_512=re.keccak_384=re.keccak_256=re.keccak_224=re.sha3_512=re.sha3_384=re.sha3_256=re.sha3_224=re.Keccak=re.keccakP=void 0;var an=tn(),Kn=Of(),Kt=Rt(),kf=[],Uf=[],Hf=[],Og=BigInt(0),Dn=BigInt(1),Cg=BigInt(2),Pg=BigInt(7),kg=BigInt(256),Ug=BigInt(113);for(let t=0,e=Dn,r=1,n=0;t<24;t++){[r,n]=[n,(2*r+3*n)%5],kf.push(2*(5*n+r)),Uf.push((t+1)*(t+2)/2%64);let i=Og;for(let s=0;s<7;s++)e=(e<<Dn^(e>>Pg)*Ug)%kg,e&Cg&&(i^=Dn<<(Dn<<BigInt(s))-Dn);Hf.push(i)}var[Hg,qg]=(0,Kn.split)(Hf,!0),Cf=(t,e,r)=>r>32?(0,Kn.rotlBH)(t,e,r):(0,Kn.rotlSH)(t,e,r),Pf=(t,e,r)=>r>32?(0,Kn.rotlBL)(t,e,r):(0,Kn.rotlSL)(t,e,r);function qf(t,e=24){let r=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let o=0;o<10;o++)r[o]=t[o]^t[o+10]^t[o+20]^t[o+30]^t[o+40];for(let o=0;o<10;o+=2){let a=(o+8)%10,u=(o+2)%10,c=r[u],l=r[u+1],f=Cf(c,l,1)^r[a],b=Pf(c,l,1)^r[a+1];for(let y=0;y<50;y+=10)t[o+y]^=f,t[o+y+1]^=b}let i=t[2],s=t[3];for(let o=0;o<24;o++){let a=Uf[o],u=Cf(i,s,a),c=Pf(i,s,a),l=kf[o];i=t[l],s=t[l+1],t[l]=u,t[l+1]=c}for(let o=0;o<50;o+=10){for(let a=0;a<10;a++)r[a]=t[o+a];for(let a=0;a<10;a++)t[o+a]^=~r[(a+2)%10]&r[(a+4)%10]}t[0]^=Hg[n],t[1]^=qg[n]}r.fill(0)}re.keccakP=qf;var Gn=class t extends Kt.Hash{constructor(e,r,n,i=!1,s=24){if(super(),this.blockLen=e,this.suffix=r,this.outputLen=n,this.enableXOF=i,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,(0,an.number)(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(0,Kt.u32)(this.state)}keccak(){Kt.isLE||(0,Kt.byteSwap32)(this.state32),qf(this.state32,this.rounds),Kt.isLE||(0,Kt.byteSwap32)(this.state32),this.posOut=0,this.pos=0}update(e){(0,an.exists)(this);let{blockLen:r,state:n}=this;e=(0,Kt.toBytes)(e);let i=e.length;for(let s=0;s<i;){let o=Math.min(r-this.pos,i-s);for(let a=0;a<o;a++)n[this.pos++]^=e[s++];this.pos===r&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:e,suffix:r,pos:n,blockLen:i}=this;e[n]^=r,(r&128)!==0&&n===i-1&&this.keccak(),e[i-1]^=128,this.keccak()}writeInto(e){(0,an.exists)(this,!1),(0,an.bytes)(e),this.finish();let r=this.state,{blockLen:n}=this;for(let i=0,s=e.length;i<s;){this.posOut>=n&&this.keccak();let o=Math.min(n-this.posOut,s-i);e.set(r.subarray(this.posOut,this.posOut+o),i),this.posOut+=o,i+=o}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return(0,an.number)(e),this.xofInto(new Uint8Array(e))}digestInto(e){if((0,an.output)(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){let{blockLen:r,suffix:n,outputLen:i,rounds:s,enableXOF:o}=this;return e||(e=new t(r,n,i,o,s)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=s,e.suffix=n,e.outputLen=i,e.enableXOF=o,e.destroyed=this.destroyed,e}};re.Keccak=Gn;var ar=(t,e,r)=>(0,Kt.wrapConstructor)(()=>new Gn(e,t,r));re.sha3_224=ar(6,144,224/8);re.sha3_256=ar(6,136,256/8);re.sha3_384=ar(6,104,384/8);re.sha3_512=ar(6,72,512/8);re.keccak_224=ar(1,144,224/8);re.keccak_256=ar(1,136,256/8);re.keccak_384=ar(1,104,384/8);re.keccak_512=ar(1,72,512/8);var Mf=(t,e,r)=>(0,Kt.wrapXOFConstructorWithOpts)((n={})=>new Gn(e,t,n.dkLen===void 0?r:n.dkLen,!0));re.shake128=Mf(31,168,128/8);re.shake256=Mf(31,136,256/8)});var $n=B(Ct=>{"use strict";d();Object.defineProperty(Ct,"__esModule",{value:!0});Ct.keccak512=Ct.keccak384=Ct.keccak256=Ct.keccak224=void 0;var Vn=Ff(),Di=Sr();Ct.keccak224=(0,Di.wrapHash)(Vn.keccak_224);Ct.keccak256=(()=>{let t=(0,Di.wrapHash)(Vn.keccak_256);return t.create=Vn.keccak_256.create,t})();Ct.keccak384=(0,Di.wrapHash)(Vn.keccak_384);Ct.keccak512=(0,Di.wrapHash)(Vn.keccak_512)});var Xo=B(j=>{"use strict";d();Object.defineProperty(j,"__esModule",{value:!0});j.accountBodyToRLP=j.accountBodyToSlim=j.accountBodyFromSlim=j.isZeroAddress=j.zeroAddress=j.importPublic=j.privateToAddress=j.privateToPublic=j.publicToAddress=j.pubToAddress=j.isValidPublic=j.isValidPrivate=j.generateAddress2=j.generateAddress=j.isValidChecksumAddress=j.toChecksumAddress=j.isValidAddress=j.Account=void 0;var Nr=zo(),un=$n(),cn=Ui(),H=$e(),Ee=or(),at=qi(),Mg=Ar(),Zo=class t{constructor(e=Ee.BIGINT_0,r=Ee.BIGINT_0,n=Ee.KECCAK256_RLP,i=Ee.KECCAK256_NULL,s=null,o=0){this._nonce=null,this._balance=null,this._storageRoot=null,this._codeHash=null,this._codeSize=null,this._version=null,this._nonce=e,this._balance=r,this._storageRoot=n,this._codeHash=i,s===null&&i!==null&&!this.isContract()&&(s=0),this._codeSize=s,this._version=o,this._validate()}get version(){if(this._version!==null)return this._version;throw Error(`version=${this._version} not loaded`)}set version(e){this._version=e}get nonce(){if(this._nonce!==null)return this._nonce;throw Error(`nonce=${this._nonce} not loaded`)}set nonce(e){this._nonce=e}get balance(){if(this._balance!==null)return this._balance;throw Error(`balance=${this._balance} not loaded`)}set balance(e){this._balance=e}get storageRoot(){if(this._storageRoot!==null)return this._storageRoot;throw Error(`storageRoot=${this._storageRoot} not loaded`)}set storageRoot(e){this._storageRoot=e}get codeHash(){if(this._codeHash!==null)return this._codeHash;throw Error(`codeHash=${this._codeHash} not loaded`)}set codeHash(e){this._codeHash=e}get codeSize(){if(this._codeSize!==null)return this._codeSize;throw Error(`codeHash=${this._codeSize} not loaded`)}set codeSize(e){this._codeSize=e}static fromAccountData(e){let{nonce:r,balance:n,storageRoot:i,codeHash:s}=e;if(r===null||n===null||i===null||s===null)throw Error("Partial fields not supported in fromAccountData");return new t(r!==void 0?(0,H.bytesToBigInt)((0,H.toBytes)(r)):void 0,n!==void 0?(0,H.bytesToBigInt)((0,H.toBytes)(n)):void 0,i!==void 0?(0,H.toBytes)(i):void 0,s!==void 0?(0,H.toBytes)(s):void 0)}static fromPartialAccountData(e){let{nonce:r,balance:n,storageRoot:i,codeHash:s,codeSize:o,version:a}=e;if(r===null&&n===null&&i===null&&s===null&&o===null&&a===null)throw Error("All partial fields null");return new t(r!=null?(0,H.bytesToBigInt)((0,H.toBytes)(r)):r,n!=null?(0,H.bytesToBigInt)((0,H.toBytes)(n)):n,i!=null?(0,H.toBytes)(i):i,s!=null?(0,H.toBytes)(s):s,o!=null?(0,H.bytesToInt)((0,H.toBytes)(o)):o,a!=null?(0,H.bytesToInt)((0,H.toBytes)(a)):a)}static fromRlpSerializedAccount(e){let r=Nr.RLP.decode(e);if(!Array.isArray(r))throw new Error("Invalid serialized account input. Must be array");return this.fromValuesArray(r)}static fromRlpSerializedPartialAccount(e){let r=Nr.RLP.decode(e);if(!Array.isArray(r))throw new Error("Invalid serialized account input. Must be array");let n=null;if(Array.isArray(r[0])){let c=(0,H.bytesToInt)(r[0][0]);if(c!==0&&c!==1)throw new Error(`Invalid isNullIndicator=${c} for nonce`);c===1&&(n=(0,H.bytesToBigInt)(r[0][1]))}else throw new Error("Invalid partial nonce encoding. Must be array");let i=null;if(Array.isArray(r[1])){let c=(0,H.bytesToInt)(r[1][0]);if(c!==0&&c!==1)throw new Error(`Invalid isNullIndicator=${c} for balance`);c===1&&(i=(0,H.bytesToBigInt)(r[1][1]))}else throw new Error("Invalid partial balance encoding. Must be array");let s=null;if(Array.isArray(r[2])){let c=(0,H.bytesToInt)(r[2][0]);if(c!==0&&c!==1)throw new Error(`Invalid isNullIndicator=${c} for storageRoot`);c===1&&(s=r[2][1])}else throw new Error("Invalid partial storageRoot encoding. Must be array");let o=null;if(Array.isArray(r[3])){let c=(0,H.bytesToInt)(r[3][0]);if(c!==0&&c!==1)throw new Error(`Invalid isNullIndicator=${c} for codeHash`);c===1&&(o=r[3][1])}else throw new Error("Invalid partial codeHash encoding. Must be array");let a=null;if(Array.isArray(r[4])){let c=(0,H.bytesToInt)(r[4][0]);if(c!==0&&c!==1)throw new Error(`Invalid isNullIndicator=${c} for codeSize`);c===1&&(a=(0,H.bytesToInt)(r[4][1]))}else throw new Error("Invalid partial codeSize encoding. Must be array");let u=null;if(Array.isArray(r[5])){let c=(0,H.bytesToInt)(r[5][0]);if(c!==0&&c!==1)throw new Error(`Invalid isNullIndicator=${c} for version`);c===1&&(u=(0,H.bytesToInt)(r[5][1]))}else throw new Error("Invalid partial version encoding. Must be array");return this.fromPartialAccountData({balance:i,nonce:n,storageRoot:s,codeHash:o,codeSize:a,version:u})}static fromValuesArray(e){let[r,n,i,s]=e;return new t((0,H.bytesToBigInt)(r),(0,H.bytesToBigInt)(n),i,s)}_validate(){if(this._nonce!==null&&this._nonce<Ee.BIGINT_0)throw new Error("nonce must be greater than zero");if(this._balance!==null&&this._balance<Ee.BIGINT_0)throw new Error("balance must be greater than zero");if(this._storageRoot!==null&&this._storageRoot.length!==32)throw new Error("storageRoot must have a length of 32");if(this._codeHash!==null&&this._codeHash.length!==32)throw new Error("codeHash must have a length of 32");if(this._codeSize!==null&&this._codeSize<Ee.BIGINT_0)throw new Error("codeSize must be greater than zero")}raw(){return[(0,H.bigIntToUnpaddedBytes)(this.nonce),(0,H.bigIntToUnpaddedBytes)(this.balance),this.storageRoot,this.codeHash]}serialize(){return Nr.RLP.encode(this.raw())}serializeWithPartialInfo(){let e=[],r=(0,H.intToUnpaddedBytes)(0),n=(0,H.intToUnpaddedBytes)(1);return this._nonce!==null?e.push([n,(0,H.bigIntToUnpaddedBytes)(this._nonce)]):e.push([r]),this._balance!==null?e.push([n,(0,H.bigIntToUnpaddedBytes)(this._balance)]):e.push([r]),this._storageRoot!==null?e.push([n,this._storageRoot]):e.push([r]),this._codeHash!==null?e.push([n,this._codeHash]):e.push([r]),this._codeSize!==null?e.push([n,(0,H.intToUnpaddedBytes)(this._codeSize)]):e.push([r]),this._version!==null?e.push([n,(0,H.intToUnpaddedBytes)(this._version)]):e.push([r]),Nr.RLP.encode(e)}isContract(){if(this._codeHash===null&&this._codeSize===null)throw Error("Insufficient data as codeHash=null and codeSize=null");return this._codeHash!==null&&!(0,H.equalsBytes)(this._codeHash,Ee.KECCAK256_NULL)||this._codeSize!==null&&this._codeSize!==0}isEmpty(){return this._balance!==null&&this.balance!==Ee.BIGINT_0||this._nonce===null&&this.nonce!==Ee.BIGINT_0||this._codeHash!==null&&!(0,H.equalsBytes)(this.codeHash,Ee.KECCAK256_NULL)?!1:this.balance===Ee.BIGINT_0&&this.nonce===Ee.BIGINT_0&&(0,H.equalsBytes)(this.codeHash,Ee.KECCAK256_NULL)}};j.Account=Zo;var Fg=function(t){try{(0,at.assertIsString)(t)}catch{return!1}return/^0x[0-9a-fA-F]{40}$/.test(t)};j.isValidAddress=Fg;var jg=function(t,e){(0,at.assertIsHexString)(t);let r=(0,Mg.stripHexPrefix)(t).toLowerCase(),n="";e!==void 0&&(n=(0,H.bytesToBigInt)((0,H.toBytes)(e)).toString()+"0x");let i=(0,H.utf8ToBytes)(n+r),s=(0,H.bytesToHex)((0,un.keccak256)(i)).slice(2),o="";for(let a=0;a<r.length;a++)parseInt(s[a],16)>=8?o+=r[a].toUpperCase():o+=r[a];return`0x${o}`};j.toChecksumAddress=jg;var Dg=function(t,e){return(0,j.isValidAddress)(t)&&(0,j.toChecksumAddress)(t,e)===t};j.isValidChecksumAddress=Dg;var Kg=function(t,e){return(0,at.assertIsBytes)(t),(0,at.assertIsBytes)(e),(0,H.bytesToBigInt)(e)===Ee.BIGINT_0?(0,un.keccak256)(Nr.RLP.encode([t,Uint8Array.from([])])).subarray(-20):(0,un.keccak256)(Nr.RLP.encode([t,e])).subarray(-20)};j.generateAddress=Kg;var Gg=function(t,e,r){if((0,at.assertIsBytes)(t),(0,at.assertIsBytes)(e),(0,at.assertIsBytes)(r),t.length!==20)throw new Error("Expected from to be of length 20");if(e.length!==32)throw new Error("Expected salt to be of length 32");return(0,un.keccak256)((0,H.concatBytes)((0,H.hexToBytes)("0xff"),t,e,(0,un.keccak256)(r))).subarray(-20)};j.generateAddress2=Gg;var Vg=function(t){return cn.secp256k1.utils.isValidPrivateKey(t)};j.isValidPrivate=Vg;var $g=function(t,e=!1){if((0,at.assertIsBytes)(t),t.length===64)try{return cn.secp256k1.ProjectivePoint.fromHex((0,H.concatBytes)(Uint8Array.from([4]),t)),!0}catch{return!1}if(!e)return!1;try{return cn.secp256k1.ProjectivePoint.fromHex(t),!0}catch{return!1}};j.isValidPublic=$g;var zg=function(t,e=!1){if((0,at.assertIsBytes)(t),e&&t.length!==64&&(t=cn.secp256k1.ProjectivePoint.fromHex(t).toRawBytes(!1).slice(1)),t.length!==64)throw new Error("Expected pubKey to be of length 64");return(0,un.keccak256)(t).subarray(-20)};j.pubToAddress=zg;j.publicToAddress=j.pubToAddress;var Wg=function(t){return(0,at.assertIsBytes)(t),cn.secp256k1.ProjectivePoint.fromPrivateKey(t).toRawBytes(!1).slice(1)};j.privateToPublic=Wg;var Yg=function(t){return(0,j.publicToAddress)((0,j.privateToPublic)(t))};j.privateToAddress=Yg;var Zg=function(t){return(0,at.assertIsBytes)(t),t.length!==64&&(t=cn.secp256k1.ProjectivePoint.fromHex(t).toRawBytes(!1).slice(1)),t};j.importPublic=Zg;var Xg=function(){let e=(0,H.zeros)(20);return(0,H.bytesToHex)(e)};j.zeroAddress=Xg;var Qg=function(t){try{(0,at.assertIsString)(t)}catch{return!1}return(0,j.zeroAddress)()===t};j.isZeroAddress=Qg;function Df(t){let[e,r,n,i]=t;return[e,r,n.length===0?Ee.KECCAK256_RLP:n,i.length===0?Ee.KECCAK256_NULL:i]}j.accountBodyFromSlim=Df;var jf=new Uint8Array(0);function Jg(t){let[e,r,n,i]=t;return[e,r,(0,H.equalsBytes)(n,Ee.KECCAK256_RLP)?jf:n,(0,H.equalsBytes)(i,Ee.KECCAK256_NULL)?jf:i]}j.accountBodyToSlim=Jg;function ep(t,e=!0){let r=e?Df(t):t;return Nr.RLP.encode(r)}j.accountBodyToRLP=ep});var Jo=B(Ki=>{"use strict";d();Object.defineProperty(Ki,"__esModule",{value:!0});Ki.Address=void 0;var zn=Xo(),fn=$e(),tp=or(),Qo=class t{constructor(e){if(e.length!==20)throw new Error("Invalid address length");this.bytes=e}static zero(){return new t((0,fn.zeros)(20))}static fromString(e){if(!(0,zn.isValidAddress)(e))throw new Error(`Invalid address input=${e}`);return new t((0,fn.hexToBytes)(e))}static fromPublicKey(e){if(!(e instanceof Uint8Array))throw new Error("Public key should be Uint8Array");let r=(0,zn.pubToAddress)(e);return new t(r)}static fromPrivateKey(e){if(!(e instanceof Uint8Array))throw new Error("Private key should be Uint8Array");let r=(0,zn.privateToAddress)(e);return new t(r)}static generate(e,r){if(typeof r!="bigint")throw new Error("Expected nonce to be a bigint");return new t((0,zn.generateAddress)(e.bytes,(0,fn.bigIntToBytes)(r)))}static generate2(e,r,n){if(!(r instanceof Uint8Array))throw new Error("Expected salt to be a Uint8Array");if(!(n instanceof Uint8Array))throw new Error("Expected initCode to be a Uint8Array");return new t((0,zn.generateAddress2)(e.bytes,r,n))}equals(e){return(0,fn.equalsBytes)(this.bytes,e.bytes)}isZero(){return this.equals(t.zero())}isPrecompileOrSystemAddress(){let e=(0,fn.bytesToBigInt)(this.bytes),r=tp.BIGINT_0,n=BigInt("0xffff");return e>=r&&e<=n}toString(){return(0,fn.bytesToHex)(this.bytes)}toBytes(){return new Uint8Array(this.bytes)}};Ki.Address=Qo});var Kf=B(ur=>{"use strict";d();Object.defineProperty(ur,"__esModule",{value:!0});ur.ValueEncoding=ur.KeyEncoding=void 0;var rp;(function(t){t.String="string",t.Bytes="view",t.Number="number"})(rp=ur.KeyEncoding||(ur.KeyEncoding={}));var np;(function(t){t.String="string",t.Bytes="view",t.JSON="json"})(np=ur.ValueEncoding||(ur.ValueEncoding={}))});var ea=B(Gt=>{"use strict";d();Object.defineProperty(Gt,"__esModule",{value:!0});Gt.toType=Gt.TypeOutput=Gt.isNestedUint8Array=void 0;var Gi=$e(),ip=Ar();function Gf(t){if(!Array.isArray(t))return!1;for(let e of t)if(Array.isArray(e)){if(!Gf(e))return!1}else if(!(e instanceof Uint8Array))return!1;return!0}Gt.isNestedUint8Array=Gf;var Wn;(function(t){t[t.Number=0]="Number",t[t.BigInt=1]="BigInt",t[t.Uint8Array=2]="Uint8Array",t[t.PrefixedHexString=3]="PrefixedHexString"})(Wn=Gt.TypeOutput||(Gt.TypeOutput={}));function sp(t,e){if(t===null)return null;if(t===void 0)return;if(typeof t=="string"&&!(0,ip.isHexString)(t))throw new Error(`A string must be provided with a 0x-prefix, given: ${t}`);if(typeof t=="number"&&!Number.isSafeInteger(t))throw new Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative input type)");let r=(0,Gi.toBytes)(t);switch(e){case Wn.Uint8Array:return r;case Wn.BigInt:return(0,Gi.bytesToBigInt)(r);case Wn.Number:{let n=(0,Gi.bytesToBigInt)(r);if(n>BigInt(Number.MAX_SAFE_INTEGER))throw new Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative output type)");return Number(n)}case Wn.PrefixedHexString:return(0,Gi.bytesToHex)(r);default:throw new Error("unknown outputType")}}Gt.toType=sp});var Vf=B(Vi=>{"use strict";d();Object.defineProperty(Vi,"__esModule",{value:!0});Vi.Withdrawal=void 0;var ta=Jo(),Yn=$e(),ra=or(),be=ea(),na=class t{constructor(e,r,n,i){this.index=e,this.validatorIndex=r,this.address=n,this.amount=i}static fromWithdrawalData(e){let{index:r,validatorIndex:n,address:i,amount:s}=e,o=(0,be.toType)(r,be.TypeOutput.BigInt),a=(0,be.toType)(n,be.TypeOutput.BigInt),u=i instanceof ta.Address?i:new ta.Address((0,Yn.toBytes)(i)),c=(0,be.toType)(s,be.TypeOutput.BigInt);return new t(o,a,u,c)}static fromValuesArray(e){if(e.length!==4)throw Error(`Invalid withdrawalArray length expected=4 actual=${e.length}`);let[r,n,i,s]=e;return t.fromWithdrawalData({index:r,validatorIndex:n,address:i,amount:s})}static toBytesArray(e){let{index:r,validatorIndex:n,address:i,amount:s}=e,o=(0,be.toType)(r,be.TypeOutput.BigInt)===ra.BIGINT_0?new Uint8Array:(0,be.toType)(r,be.TypeOutput.Uint8Array),a=(0,be.toType)(n,be.TypeOutput.BigInt)===ra.BIGINT_0?new Uint8Array:(0,be.toType)(n,be.TypeOutput.Uint8Array),u=i instanceof ta.Address?i.bytes:(0,be.toType)(i,be.TypeOutput.Uint8Array),c=(0,be.toType)(s,be.TypeOutput.BigInt)===ra.BIGINT_0?new Uint8Array:(0,be.toType)(s,be.TypeOutput.Uint8Array);return[o,a,u,c]}raw(){return t.toBytesArray(this)}toValue(){return{index:this.index,validatorIndex:this.validatorIndex,address:this.address.bytes,amount:this.amount}}toJSON(){return{index:(0,Yn.bigIntToHex)(this.index),validatorIndex:(0,Yn.bigIntToHex)(this.validatorIndex),address:(0,Yn.bytesToHex)(this.address.bytes),amount:(0,Yn.bigIntToHex)(this.amount)}}};Vi.Withdrawal=na});var zf=B(Se=>{"use strict";d();Object.defineProperty(Se,"__esModule",{value:!0});Se.hashPersonalMessage=Se.isValidSignature=Se.fromRpcSig=Se.toCompactSig=Se.toRpcSig=Se.ecrecover=Se.calculateSigRecovery=Se.ecsign=void 0;var op=$n(),$f=Ui(),me=$e(),ke=or(),ap=qi();function up(t,e,r){let n=$f.secp256k1.sign(t,e),i=n.toCompactRawBytes(),s=i.slice(0,32),o=i.slice(32,64),a=r===void 0?BigInt(n.recovery+27):BigInt(n.recovery+35)+BigInt(r)*ke.BIGINT_2;return{r:s,s:o,v:a}}Se.ecsign=up;function Zn(t,e){return t===ke.BIGINT_0||t===ke.BIGINT_1?t:e===void 0?t-ke.BIGINT_27:t-(e*ke.BIGINT_2+BigInt(35))}Se.calculateSigRecovery=Zn;function $i(t){return t===ke.BIGINT_0||t===ke.BIGINT_1}var cp=function(t,e,r,n,i){let s=(0,me.concatBytes)((0,me.setLengthLeft)(r,32),(0,me.setLengthLeft)(n,32)),o=Zn(e,i);if(!$i(o))throw new Error("Invalid signature v value");return $f.secp256k1.Signature.fromCompact(s).addRecoveryBit(Number(o)).recoverPublicKey(t).toRawBytes(!1).slice(1)};Se.ecrecover=cp;var fp=function(t,e,r,n){let i=Zn(t,n);if(!$i(i))throw new Error("Invalid signature v value");return(0,me.bytesToHex)((0,me.concatBytes)((0,me.setLengthLeft)(e,32),(0,me.setLengthLeft)(r,32),(0,me.toBytes)(t)))};Se.toRpcSig=fp;var lp=function(t,e,r,n){let i=Zn(t,n);if(!$i(i))throw new Error("Invalid signature v value");let s=Uint8Array.from([...r]);return(t>BigInt(28)&&t%ke.BIGINT_2===ke.BIGINT_1||t===ke.BIGINT_1||t===BigInt(28))&&(s[0]|=128),(0,me.bytesToHex)((0,me.concatBytes)((0,me.setLengthLeft)(e,32),(0,me.setLengthLeft)(s,32)))};Se.toCompactSig=lp;var hp=function(t){let e=(0,me.toBytes)(t),r,n,i;if(e.length>=65)r=e.subarray(0,32),n=e.subarray(32,64),i=(0,me.bytesToBigInt)(e.subarray(64));else if(e.length===64)r=e.subarray(0,32),n=e.subarray(32,64),i=BigInt((0,me.bytesToInt)(e.subarray(32,33))>>7),n[0]&=127;else throw new Error("Invalid signature length");return i<27&&(i=i+ke.BIGINT_27),{v:i,r,s:n}};Se.fromRpcSig=hp;var dp=function(t,e,r,n=!0,i){if(e.length!==32||r.length!==32||!$i(Zn(t,i)))return!1;let s=(0,me.bytesToBigInt)(e),o=(0,me.bytesToBigInt)(r);return!(s===ke.BIGINT_0||s>=ke.SECP256K1_ORDER||o===ke.BIGINT_0||o>=ke.SECP256K1_ORDER||n&&o>=ke.SECP256K1_ORDER_DIV_2)};Se.isValidSignature=dp;var yp=function(t){(0,ap.assertIsBytes)(t);let e=(0,me.utf8ToBytes)(`Ethereum Signed Message:
${t.length}`);return(0,op.keccak256)((0,me.concatBytes)(e,t))};Se.hashPersonalMessage=yp});var Yi=B((Om,ia)=>{"use strict";d();var ln=typeof Reflect=="object"?Reflect:null,Wf=ln&&typeof ln.apply=="function"?ln.apply:function(e,r,n){return Function.prototype.apply.call(e,r,n)},zi;ln&&typeof ln.ownKeys=="function"?zi=ln.ownKeys:Object.getOwnPropertySymbols?zi=function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:zi=function(e){return Object.getOwnPropertyNames(e)};function gp(t){console&&console.warn&&console.warn(t)}var Zf=Number.isNaN||function(e){return e!==e};function X(){X.init.call(this)}ia.exports=X;ia.exports.once=_p;X.EventEmitter=X;X.prototype._events=void 0;X.prototype._eventsCount=0;X.prototype._maxListeners=void 0;var Yf=10;function Wi(t){if(typeof t!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}Object.defineProperty(X,"defaultMaxListeners",{enumerable:!0,get:function(){return Yf},set:function(t){if(typeof t!="number"||t<0||Zf(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");Yf=t}});X.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0};X.prototype.setMaxListeners=function(e){if(typeof e!="number"||e<0||Zf(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this};function Xf(t){return t._maxListeners===void 0?X.defaultMaxListeners:t._maxListeners}X.prototype.getMaxListeners=function(){return Xf(this)};X.prototype.emit=function(e){for(var r=[],n=1;n<arguments.length;n++)r.push(arguments[n]);var i=e==="error",s=this._events;if(s!==void 0)i=i&&s.error===void 0;else if(!i)return!1;if(i){var o;if(r.length>0&&(o=r[0]),o instanceof Error)throw o;var a=new Error("Unhandled error."+(o?" ("+o.message+")":""));throw a.context=o,a}var u=s[e];if(u===void 0)return!1;if(typeof u=="function")Wf(u,this,r);else for(var c=u.length,l=rl(u,c),n=0;n<c;++n)Wf(l[n],this,r);return!0};function Qf(t,e,r,n){var i,s,o;if(Wi(r),s=t._events,s===void 0?(s=t._events=Object.create(null),t._eventsCount=0):(s.newListener!==void 0&&(t.emit("newListener",e,r.listener?r.listener:r),s=t._events),o=s[e]),o===void 0)o=s[e]=r,++t._eventsCount;else if(typeof o=="function"?o=s[e]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),i=Xf(t),i>0&&o.length>i&&!o.warned){o.warned=!0;var a=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");a.name="MaxListenersExceededWarning",a.emitter=t,a.type=e,a.count=o.length,gp(a)}return t}X.prototype.addListener=function(e,r){return Qf(this,e,r,!1)};X.prototype.on=X.prototype.addListener;X.prototype.prependListener=function(e,r){return Qf(this,e,r,!0)};function pp(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Jf(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=pp.bind(n);return i.listener=r,n.wrapFn=i,i}X.prototype.once=function(e,r){return Wi(r),this.on(e,Jf(this,e,r)),this};X.prototype.prependOnceListener=function(e,r){return Wi(r),this.prependListener(e,Jf(this,e,r)),this};X.prototype.removeListener=function(e,r){var n,i,s,o,a;if(Wi(r),i=this._events,i===void 0)return this;if(n=i[e],n===void 0)return this;if(n===r||n.listener===r)--this._eventsCount===0?this._events=Object.create(null):(delete i[e],i.removeListener&&this.emit("removeListener",e,n.listener||r));else if(typeof n!="function"){for(s=-1,o=n.length-1;o>=0;o--)if(n[o]===r||n[o].listener===r){a=n[o].listener,s=o;break}if(s<0)return this;s===0?n.shift():bp(n,s),n.length===1&&(i[e]=n[0]),i.removeListener!==void 0&&this.emit("removeListener",e,a||r)}return this};X.prototype.off=X.prototype.removeListener;X.prototype.removeAllListeners=function(e){var r,n,i;if(n=this._events,n===void 0)return this;if(n.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):n[e]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete n[e]),this;if(arguments.length===0){var s=Object.keys(n),o;for(i=0;i<s.length;++i)o=s[i],o!=="removeListener"&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(r=n[e],typeof r=="function")this.removeListener(e,r);else if(r!==void 0)for(i=r.length-1;i>=0;i--)this.removeListener(e,r[i]);return this};function el(t,e,r){var n=t._events;if(n===void 0)return[];var i=n[e];return i===void 0?[]:typeof i=="function"?r?[i.listener||i]:[i]:r?wp(i):rl(i,i.length)}X.prototype.listeners=function(e){return el(this,e,!0)};X.prototype.rawListeners=function(e){return el(this,e,!1)};X.listenerCount=function(t,e){return typeof t.listenerCount=="function"?t.listenerCount(e):tl.call(t,e)};X.prototype.listenerCount=tl;function tl(t){var e=this._events;if(e!==void 0){var r=e[t];if(typeof r=="function")return 1;if(r!==void 0)return r.length}return 0}X.prototype.eventNames=function(){return this._eventsCount>0?zi(this._events):[]};function rl(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function bp(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}function wp(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}function _p(t,e){return new Promise(function(r,n){function i(o){t.removeListener(e,s),n(o)}function s(){typeof t.removeListener=="function"&&t.removeListener("error",i),r([].slice.call(arguments))}nl(t,e,s,{once:!0}),e!=="error"&&Ep(t,i,{once:!0})})}function Ep(t,e,r){typeof t.on=="function"&&nl(t,"error",e,r)}function nl(t,e,r,n){if(typeof t.on=="function")n.once?t.once(e,r):t.on(e,r);else if(typeof t.addEventListener=="function")t.addEventListener(e,function i(s){n.once&&t.removeEventListener(e,i),r(s)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t)}});var il=B(Zi=>{"use strict";d();Object.defineProperty(Zi,"__esModule",{value:!0});Zi.AsyncEventEmitter=void 0;var mp=Yi();async function Bp(t,e,r){let n;for await(let i of e)try{i.length<2?i.call(t,r):await new Promise((s,o)=>{i.call(t,r,a=>{a?o(a):s()})})}catch(s){n=s}if(n)throw n}var sa=class extends mp.EventEmitter{emit(e,...r){var a;let[n,i]=r,s=this,o=(a=s._events[e])!=null?a:[];return i===void 0&&typeof n=="function"&&(i=n,n=void 0),(e==="newListener"||e==="removeListener")&&(n={event:n,fn:i},i=void 0),o=Array.isArray(o)?o:[o],Bp(s,o.slice(),n).then(i).catch(i),s.listenerCount(e)>0}once(e,r){let n=this,i;if(typeof r!="function")throw new TypeError("listener must be a function");return r.length>=2?i=function(s,o){n.removeListener(e,i),r(s,o)}:i=function(s){n.removeListener(e,i),r(s,i)},n.on(e,i),n}first(e,r){var i;let n=(i=this._events[e])!=null?i:[];if(typeof r!="function")throw new TypeError("listener must be a function");return Array.isArray(n)||(this._events[e]=n=[n]),n.unshift(r),this}before(e,r,n){return this.beforeOrAfter(e,r,n)}after(e,r,n){return this.beforeOrAfter(e,r,n,"after")}beforeOrAfter(e,r,n,i){var c;let s=(c=this._events[e])!=null?c:[],o,a,u=i==="after"?1:0;if(typeof n!="function")throw new TypeError("listener must be a function");if(typeof r!="function")throw new TypeError("target must be a function");for(Array.isArray(s)||(this._events[e]=s=[s]),a=s.length,o=s.length;o--;)if(s[o]===r){a=o+u;break}return s.splice(a,0,n),this}on(e,r){return super.on(e,r)}addListener(e,r){return super.addListener(e,r)}prependListener(e,r){return super.prependListener(e,r)}prependOnceListener(e,r){return super.prependOnceListener(e,r)}removeAllListeners(e){return super.removeAllListeners(e)}removeListener(e,r){return super.removeListener(e,r)}eventNames(){return super.eventNames()}listeners(e){return super.listeners(e)}listenerCount(e){return super.listenerCount(e)}getMaxListeners(){return super.getMaxListeners()}setMaxListeners(e){return super.setMaxListeners(e)}};Zi.AsyncEventEmitter=sa});var sl=B(Xi=>{"use strict";d();Object.defineProperty(Xi,"__esModule",{value:!0});Xi.sha256=void 0;var xp=wo(),Tp=Sr();Xi.sha256=(0,Tp.wrapHash)(xp.sha256)});var ol=B(Je=>{"use strict";d();Object.defineProperty(Je,"__esModule",{value:!0});Je.commitmentsToVersionedHashes=Je.computeVersionedHash=Je.blobsToProofs=Je.blobsToCommitments=Je.getBlobs=void 0;var vp=sl(),Ip=$e(),Sp=32,oa=4096,Xn=32*oa,Ap=2,Rp=Xn*Ap-1,Np=Sp*oa;function Lp(t,e){let r=new Uint8Array(e*Xn).fill(0);return r.set(t),r[t.byteLength]=128,r}function Op(t){let e=new Uint8Array(Np);for(let r=0;r<oa;r++){let n=new Uint8Array(32);n.set(t.subarray(r*31,(r+1)*31),0),e.set(n,r*32)}return e}var Cp=t=>{let e=(0,Ip.utf8ToBytes)(t),r=e.byteLength;if(r===0)throw Error("invalid blob data");if(r>Rp)throw Error("blob data is too large");let n=Math.ceil(r/Xn),i=Lp(e,n),s=[];for(let o=0;o<n;o++){let a=i.subarray(o*Xn,(o+1)*Xn),u=Op(a);s.push(u)}return s};Je.getBlobs=Cp;var Pp=(t,e)=>{let r=[];for(let n of e)r.push(t.blobToKzgCommitment(n));return r};Je.blobsToCommitments=Pp;var kp=(t,e,r)=>e.map((i,s)=>t.computeBlobKzgProof(i,r[s]));Je.blobsToProofs=kp;var Up=(t,e)=>{let r=new Uint8Array(32);return r.set([e],0),r.set((0,vp.sha256)(t).subarray(1),1),r};Je.computeVersionedHash=Up;var Hp=t=>{let e=[];for(let r of t)e.push((0,Je.computeVersionedHash)(r,1));return e};Je.commitmentsToVersionedHashes=Hp});var al=B(Ji=>{"use strict";d();Object.defineProperty(Ji,"__esModule",{value:!0});Ji.parseGethGenesisState=void 0;var Qi=$e(),qp=Ar();function Mp(t){let e={};for(let r of Object.keys(t.alloc)){let{balance:n,code:i,storage:s,nonce:o}=t.alloc[r],a=(0,Qi.addHexPrefix)(r.toLowerCase());n=(0,qp.isHexString)(n)?n:(0,Qi.bigIntToHex)(BigInt(n)),i=i!==void 0?(0,Qi.addHexPrefix)(i):void 0,s=s!==void 0?Object.entries(s):void 0,o=o!==void 0?(0,Qi.addHexPrefix)(o):void 0,e[a]=[n,i,s,o]}return e}Ji.parseGethGenesisState=Mp});var ul=B(es=>{"use strict";d();Object.defineProperty(es,"__esModule",{value:!0});es.initKZG=void 0;function Fp(t,e){t.loadTrustedSetup()}es.initKZG=Fp});var cl=B(ts=>{"use strict";d();Object.defineProperty(ts,"__esModule",{value:!0});ts.Lock=void 0;var aa=class{constructor(){this.permits=1,this.promiseResolverQueue=[]}async acquire(){return this.permits>0?(this.permits-=1,Promise.resolve(!0)):new Promise(e=>this.promiseResolverQueue.push(e))}release(){if(this.permits+=1,this.permits>1&&this.promiseResolverQueue.length>0)console.warn("Lock.permits should never be > 0 when there is someone waiting.");else if(this.permits===1&&this.promiseResolverQueue.length>0){this.permits-=1;let e=this.promiseResolverQueue.shift();e&&e(!0)}}};ts.Lock=aa});var fl=B(rs=>{"use strict";d();Object.defineProperty(rs,"__esModule",{value:!0});rs.MapDB=void 0;var ua=$e(),ca=class t{constructor(e){this._database=e!=null?e:new Map}async get(e){let r=e instanceof Uint8Array?(0,ua.bytesToUnprefixedHex)(e):e.toString();return this._database.get(r)}async put(e,r){let n=e instanceof Uint8Array?(0,ua.bytesToUnprefixedHex)(e):e.toString();this._database.set(n,r)}async del(e){let r=e instanceof Uint8Array?(0,ua.bytesToUnprefixedHex)(e):e.toString();this._database.delete(r)}async batch(e){for(let r of e)r.type==="del"&&await this.del(r.key),r.type==="put"&&await this.put(r.key,r.value)}shallowCopy(){return new t(this._database)}open(){return Promise.resolve()}};rs.MapDB=ca});var ll=B(hn=>{"use strict";d();Object.defineProperty(hn,"__esModule",{value:!0});hn.getProvider=hn.fetchFromProvider=void 0;var jp=async(t,e)=>{let r=JSON.stringify({method:e.method,params:e.params,jsonrpc:"2.0",id:1}),n=await fetch(t,{headers:{"content-type":"application/json"},method:"POST",body:r});if(!n.ok)throw new Error(`JSONRpcError: ${JSON.stringify({method:e.method,status:n.status,message:await n.text().catch(()=>"Could not parse error message likely because of a network error")},null,2)}`);return(await n.json()).result};hn.fetchFromProvider=jp;var Dp=t=>{if(typeof t=="string")return t;if(typeof t=="object"&&t._getConnection!==void 0)return t._getConnection().url;throw new Error("Must provide valid provider URL or Web3Provider")};hn.getProvider=Dp});var hl=B(qe=>{"use strict";d();Object.defineProperty(qe,"__esModule",{value:!0});qe.CLRequestFactory=qe.ConsolidationRequest=qe.WithdrawalRequest=qe.DepositRequest=qe.CLRequest=qe.CLRequestType=void 0;var dn=zo(),ha=Sr(),Q=$e(),fa=or(),Lr;(function(t){t[t.Deposit=0]="Deposit",t[t.Withdrawal=1]="Withdrawal",t[t.Consolidation=2]="Consolidation"})(Lr=qe.CLRequestType||(qe.CLRequestType={}));var yn=class{constructor(e){this.type=e}};qe.CLRequest=yn;var ns=class t extends yn{constructor(e,r,n,i,s){super(Lr.Deposit),this.pubkey=e,this.withdrawalCredentials=r,this.amount=n,this.signature=i,this.index=s}static fromRequestData(e){let{pubkey:r,withdrawalCredentials:n,amount:i,signature:s,index:o}=e;return new t(r,n,i,s,o)}static fromJSON(e){let{pubkey:r,withdrawalCredentials:n,amount:i,signature:s,index:o}=e;return this.fromRequestData({pubkey:(0,Q.hexToBytes)(r),withdrawalCredentials:(0,Q.hexToBytes)(n),amount:(0,Q.hexToBigInt)(i),signature:(0,Q.hexToBytes)(s),index:(0,Q.hexToBigInt)(o)})}serialize(){let e=this.index===fa.BIGINT_0?new Uint8Array:(0,Q.bigIntToBytes)(this.index),r=this.amount===fa.BIGINT_0?new Uint8Array:(0,Q.bigIntToBytes)(this.amount);return(0,ha.concatBytes)(Uint8Array.from([this.type]),dn.RLP.encode([this.pubkey,this.withdrawalCredentials,r,this.signature,e]))}toJSON(){return{pubkey:(0,Q.bytesToHex)(this.pubkey),withdrawalCredentials:(0,Q.bytesToHex)(this.withdrawalCredentials),amount:(0,Q.bigIntToHex)(this.amount),signature:(0,Q.bytesToHex)(this.signature),index:(0,Q.bigIntToHex)(this.index)}}static deserialize(e){let[r,n,i,s,o]=dn.RLP.decode(e.slice(1));return this.fromRequestData({pubkey:r,withdrawalCredentials:n,amount:(0,Q.bytesToBigInt)(i),signature:s,index:(0,Q.bytesToBigInt)(o)})}};qe.DepositRequest=ns;var is=class t extends yn{constructor(e,r,n){super(Lr.Withdrawal),this.sourceAddress=e,this.validatorPubkey=r,this.amount=n}static fromRequestData(e){let{sourceAddress:r,validatorPubkey:n,amount:i}=e;return new t(r,n,i)}static fromJSON(e){let{sourceAddress:r,validatorPubkey:n,amount:i}=e;return this.fromRequestData({sourceAddress:(0,Q.hexToBytes)(r),validatorPubkey:(0,Q.hexToBytes)(n),amount:(0,Q.hexToBigInt)(i)})}serialize(){let e=this.amount===fa.BIGINT_0?new Uint8Array:(0,Q.bigIntToBytes)(this.amount);return(0,ha.concatBytes)(Uint8Array.from([this.type]),dn.RLP.encode([this.sourceAddress,this.validatorPubkey,e]))}toJSON(){return{sourceAddress:(0,Q.bytesToHex)(this.sourceAddress),validatorPubkey:(0,Q.bytesToHex)(this.validatorPubkey),amount:(0,Q.bigIntToHex)(this.amount)}}static deserialize(e){let[r,n,i]=dn.RLP.decode(e.slice(1));return this.fromRequestData({sourceAddress:r,validatorPubkey:n,amount:(0,Q.bytesToBigInt)(i)})}};qe.WithdrawalRequest=is;var ss=class t extends yn{constructor(e,r,n){super(Lr.Consolidation),this.sourceAddress=e,this.sourcePubkey=r,this.targetPubkey=n}static fromRequestData(e){let{sourceAddress:r,sourcePubkey:n,targetPubkey:i}=e;return new t(r,n,i)}static fromJSON(e){let{sourceAddress:r,sourcePubkey:n,targetPubkey:i}=e;return this.fromRequestData({sourceAddress:(0,Q.hexToBytes)(r),sourcePubkey:(0,Q.hexToBytes)(n),targetPubkey:(0,Q.hexToBytes)(i)})}serialize(){return(0,ha.concatBytes)(Uint8Array.from([this.type]),dn.RLP.encode([this.sourceAddress,this.sourcePubkey,this.targetPubkey]))}toJSON(){return{sourceAddress:(0,Q.bytesToHex)(this.sourceAddress),sourcePubkey:(0,Q.bytesToHex)(this.sourcePubkey),targetPubkey:(0,Q.bytesToHex)(this.targetPubkey)}}static deserialize(e){let[r,n,i]=dn.RLP.decode(e.slice(1));return this.fromRequestData({sourceAddress:r,sourcePubkey:n,targetPubkey:i})}};qe.ConsolidationRequest=ss;var la=class{static fromSerializedRequest(e){switch(e[0]){case Lr.Deposit:return ns.deserialize(e);case Lr.Withdrawal:return is.deserialize(e);case Lr.Consolidation:return ss.deserialize(e);default:throw Error(`Invalid request type=${e[0]}`)}}};qe.CLRequestFactory=la});var gl=B(k=>{"use strict";d();Object.defineProperty(k,"__esModule",{value:!0});k.getVerkleTreeKeyForStorageSlot=k.chunkifyCode=k.getVerkleTreeKeyForCodeChunk=k.getVerkleTreeIndicesForCodeChunk=k.getVerkleTreeIndexesForStorageSlot=k.getVerkleKey=k.VERKLE_MAIN_STORAGE_OFFSET=k.VERKLE_NODE_WIDTH=k.VERKLE_CODE_OFFSET=k.VERKLE_HEADER_STORAGE_OFFSET=k.VERKLE_CODE_SIZE_LEAF_KEY=k.VERKLE_CODE_HASH_LEAF_KEY=k.VERKLE_NONCE_LEAF_KEY=k.VERKLE_BALANCE_LEAF_KEY=k.VERKLE_VERSION_LEAF_KEY=k.VerkleLeafType=k.verifyVerkleProof=k.getVerkleStem=void 0;var he=$e();function da(t,e,r=0){let n=(0,he.setLengthLeft)(e.toBytes(),32),i;return typeof r=="number"?i=(0,he.setLengthRight)((0,he.int32ToBytes)(Number(r),!0),32):i=(0,he.setLengthRight)((0,he.bigIntToBytes)(BigInt(r),!0).slice(0,32),32),t.getTreeKey(n,i,0).slice(0,31)}k.getVerkleStem=da;function Kp(t,e,r){return t.verifyExecutionWitnessPreState((0,he.bytesToHex)(e),JSON.stringify(r))}k.verifyVerkleProof=Kp;var gt;(function(t){t[t.Version=0]="Version",t[t.Balance=1]="Balance",t[t.Nonce=2]="Nonce",t[t.CodeHash=3]="CodeHash",t[t.CodeSize=4]="CodeSize"})(gt=k.VerkleLeafType||(k.VerkleLeafType={}));k.VERKLE_VERSION_LEAF_KEY=(0,he.intToBytes)(gt.Version);k.VERKLE_BALANCE_LEAF_KEY=(0,he.intToBytes)(gt.Balance);k.VERKLE_NONCE_LEAF_KEY=(0,he.intToBytes)(gt.Nonce);k.VERKLE_CODE_HASH_LEAF_KEY=(0,he.intToBytes)(gt.CodeHash);k.VERKLE_CODE_SIZE_LEAF_KEY=(0,he.intToBytes)(gt.CodeSize);k.VERKLE_HEADER_STORAGE_OFFSET=64;k.VERKLE_CODE_OFFSET=128;k.VERKLE_NODE_WIDTH=256;k.VERKLE_MAIN_STORAGE_OFFSET=BigInt(256)**BigInt(31);var Gp=(t,e)=>{switch(e){case gt.Version:return(0,he.concatBytes)(t,k.VERKLE_VERSION_LEAF_KEY);case gt.Balance:return(0,he.concatBytes)(t,k.VERKLE_BALANCE_LEAF_KEY);case gt.Nonce:return(0,he.concatBytes)(t,k.VERKLE_NONCE_LEAF_KEY);case gt.CodeHash:return(0,he.concatBytes)(t,k.VERKLE_CODE_HASH_LEAF_KEY);case gt.CodeSize:return(0,he.concatBytes)(t,k.VERKLE_CODE_SIZE_LEAF_KEY);default:return(0,he.concatBytes)(t,e)}};k.getVerkleKey=Gp;function dl(t){let e;t<k.VERKLE_CODE_OFFSET-k.VERKLE_HEADER_STORAGE_OFFSET?e=BigInt(k.VERKLE_HEADER_STORAGE_OFFSET)+t:e=k.VERKLE_MAIN_STORAGE_OFFSET+t;let r=e/BigInt(k.VERKLE_NODE_WIDTH),n=Number(e%BigInt(k.VERKLE_NODE_WIDTH));return{treeIndex:r,subIndex:n}}k.getVerkleTreeIndexesForStorageSlot=dl;function yl(t){let e=Math.floor((k.VERKLE_CODE_OFFSET+t)/k.VERKLE_NODE_WIDTH),r=(k.VERKLE_CODE_OFFSET+t)%k.VERKLE_NODE_WIDTH;return{treeIndex:e,subIndex:r}}k.getVerkleTreeIndicesForCodeChunk=yl;var Vp=async(t,e,r)=>{let{treeIndex:n,subIndex:i}=yl(e);return(0,he.concatBytes)(da(r,t,n),(0,he.toBytes)(i))};k.getVerkleTreeKeyForCodeChunk=Vp;var $p=t=>{if(t.length%31!==0){let e=31-t.length%31;t=(0,he.setLengthRight)(t,t.length+e)}throw new Error("Not implemented")};k.chunkifyCode=$p;var zp=async(t,e,r)=>{let{treeIndex:n,subIndex:i}=dl(e);return(0,he.concatBytes)(da(r,t,n),(0,he.toBytes)(i))};k.getVerkleTreeKeyForStorageSlot=zp});var cr=B(K=>{"use strict";d();var Wp=K&&K.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),Ae=K&&K.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Wp(e,t,r)};Object.defineProperty(K,"__esModule",{value:!0});K.toAscii=K.stripHexPrefix=K.padToEven=K.isHexString=K.getKeys=K.getBinarySize=K.fromUtf8=K.fromAscii=K.arrayContainsArray=void 0;Ae(or(),K);Ae(tf(),K);Ae(Xo(),K);Ae(Jo(),K);Ae(Kf(),K);Ae(Vf(),K);Ae(zf(),K);Ae($e(),K);Ae(ea(),K);Ae(il(),K);Ae(ol(),K);Ae(al(),K);var Vt=Ar();Object.defineProperty(K,"arrayContainsArray",{enumerable:!0,get:function(){return Vt.arrayContainsArray}});Object.defineProperty(K,"fromAscii",{enumerable:!0,get:function(){return Vt.fromAscii}});Object.defineProperty(K,"fromUtf8",{enumerable:!0,get:function(){return Vt.fromUtf8}});Object.defineProperty(K,"getBinarySize",{enumerable:!0,get:function(){return Vt.getBinarySize}});Object.defineProperty(K,"getKeys",{enumerable:!0,get:function(){return Vt.getKeys}});Object.defineProperty(K,"isHexString",{enumerable:!0,get:function(){return Vt.isHexString}});Object.defineProperty(K,"padToEven",{enumerable:!0,get:function(){return Vt.padToEven}});Object.defineProperty(K,"stripHexPrefix",{enumerable:!0,get:function(){return Vt.stripHexPrefix}});Object.defineProperty(K,"toAscii",{enumerable:!0,get:function(){return Vt.toAscii}});Ae(ul(),K);Ae(cl(),K);Ae(fl(),K);Ae(ll(),K);Ae(hl(),K);Ae(gl(),K)});var Bl=B(cs=>{"use strict";d();Object.defineProperty(cs,"__esModule",{value:!0});cs.LRUCache=void 0;var gn=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,wl=new Set,ya=typeof process=="object"&&process?process:{},_l=(t,e,r,n)=>{typeof ya.emitWarning=="function"?ya.emitWarning(t,e,r,n):console.error(`[${r}] ${e}: ${t}`)},us=globalThis.AbortController,pl=globalThis.AbortSignal,bl;if(typeof us=="undefined"){pl=class{constructor(){ue(this,"onabort");ue(this,"_onabort",[]);ue(this,"reason");ue(this,"aborted",!1)}addEventListener(n,i){this._onabort.push(i)}},us=class{constructor(){ue(this,"signal",new pl);e()}abort(n){var i,s;if(!this.signal.aborted){this.signal.reason=n,this.signal.aborted=!0;for(let o of this.signal._onabort)o(n);(s=(i=this.signal).onabort)==null||s.call(i,n)}}};let t=((bl=ya.env)==null?void 0:bl.LRU_CACHE_IGNORE_AC_WARNING)!=="1",e=()=>{t&&(t=!1,_l("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",e))}}var Yp=t=>!wl.has(t),iB=Symbol("type"),fr=t=>t&&t===Math.floor(t)&&t>0&&isFinite(t),El=t=>fr(t)?t<=Math.pow(2,8)?Uint8Array:t<=Math.pow(2,16)?Uint16Array:t<=Math.pow(2,32)?Uint32Array:t<=Number.MAX_SAFE_INTEGER?pn:null:null,pn=class extends Array{constructor(e){super(e),this.fill(0)}},bn,Or=class Or{constructor(e,r){ue(this,"heap");ue(this,"length");if(!h(Or,bn))throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new r(e),this.length=0}static create(e){let r=El(e);if(!r)return[];q(Or,bn,!0);let n=new Or(e,r);return q(Or,bn,!1),n}push(e){this.heap[this.length++]=e}pop(){return this.heap[--this.length]}};bn=new WeakMap,Y(Or,bn,!1);var ga=Or,pt,et,bt,wt,wn,Be,_t,we,se,D,Me,tt,Ue,Re,Et,Ne,mt,Bt,rt,xt,dr,Fe,A,ba,Cr,$t,Jn,nt,ml,Pr,_n,ei,lr,hr,wa,os,as,ie,_a,Qn,Ea=class Ea{constructor(e){Y(this,A);Y(this,pt);Y(this,et);Y(this,bt);Y(this,wt);Y(this,wn);ue(this,"ttl");ue(this,"ttlResolution");ue(this,"ttlAutopurge");ue(this,"updateAgeOnGet");ue(this,"updateAgeOnHas");ue(this,"allowStale");ue(this,"noDisposeOnSet");ue(this,"noUpdateTTL");ue(this,"maxEntrySize");ue(this,"sizeCalculation");ue(this,"noDeleteOnFetchRejection");ue(this,"noDeleteOnStaleGet");ue(this,"allowStaleOnFetchAbort");ue(this,"allowStaleOnFetchRejection");ue(this,"ignoreFetchAbort");Y(this,Be);Y(this,_t);Y(this,we);Y(this,se);Y(this,D);Y(this,Me);Y(this,tt);Y(this,Ue);Y(this,Re);Y(this,Et);Y(this,Ne);Y(this,mt);Y(this,Bt);Y(this,rt);Y(this,xt);Y(this,dr);Y(this,Fe);Y(this,Cr,()=>{});Y(this,$t,()=>{});Y(this,Jn,()=>{});Y(this,nt,()=>!1);Y(this,Pr,e=>{});Y(this,_n,(e,r,n)=>{});Y(this,ei,(e,r,n,i)=>{if(n||i)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0});let{max:r=0,ttl:n,ttlResolution:i=1,ttlAutopurge:s,updateAgeOnGet:o,updateAgeOnHas:a,allowStale:u,dispose:c,disposeAfter:l,noDisposeOnSet:f,noUpdateTTL:b,maxSize:y=0,maxEntrySize:E=0,sizeCalculation:g,fetchMethod:_,noDeleteOnFetchRejection:p,noDeleteOnStaleGet:x,allowStaleOnFetchRejection:v,allowStaleOnFetchAbort:S,ignoreFetchAbort:P}=e;if(r!==0&&!fr(r))throw new TypeError("max option must be a nonnegative integer");let R=r?El(r):Array;if(!R)throw new Error("invalid max value: "+r);if(q(this,pt,r),q(this,et,y),this.maxEntrySize=E||h(this,et),this.sizeCalculation=g,this.sizeCalculation){if(!h(this,et)&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(_!==void 0&&typeof _!="function")throw new TypeError("fetchMethod must be a function if specified");if(q(this,wn,_),q(this,dr,!!_),q(this,we,new Map),q(this,se,new Array(r).fill(void 0)),q(this,D,new Array(r).fill(void 0)),q(this,Me,new R(r)),q(this,tt,new R(r)),q(this,Ue,0),q(this,Re,0),q(this,Et,ga.create(r)),q(this,Be,0),q(this,_t,0),typeof c=="function"&&q(this,bt,c),typeof l=="function"?(q(this,wt,l),q(this,Ne,[])):(q(this,wt,void 0),q(this,Ne,void 0)),q(this,xt,!!h(this,bt)),q(this,Fe,!!h(this,wt)),this.noDisposeOnSet=!!f,this.noUpdateTTL=!!b,this.noDeleteOnFetchRejection=!!p,this.allowStaleOnFetchRejection=!!v,this.allowStaleOnFetchAbort=!!S,this.ignoreFetchAbort=!!P,this.maxEntrySize!==0){if(h(this,et)!==0&&!fr(h(this,et)))throw new TypeError("maxSize must be a positive integer if specified");if(!fr(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");C(this,A,ml).call(this)}if(this.allowStale=!!u,this.noDeleteOnStaleGet=!!x,this.updateAgeOnGet=!!o,this.updateAgeOnHas=!!a,this.ttlResolution=fr(i)||i===0?i:1,this.ttlAutopurge=!!s,this.ttl=n||0,this.ttl){if(!fr(this.ttl))throw new TypeError("ttl must be a positive integer if specified");C(this,A,ba).call(this)}if(h(this,pt)===0&&this.ttl===0&&h(this,et)===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!h(this,pt)&&!h(this,et)){let O="LRU_CACHE_UNBOUNDED";Yp(O)&&(wl.add(O),_l("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",O,Ea))}}static unsafeExposeInternals(e){return{starts:h(e,Bt),ttls:h(e,rt),sizes:h(e,mt),keyMap:h(e,we),keyList:h(e,se),valList:h(e,D),next:h(e,Me),prev:h(e,tt),get head(){return h(e,Ue)},get tail(){return h(e,Re)},free:h(e,Et),isBackgroundFetch:r=>{var n;return C(n=e,A,ie).call(n,r)},backgroundFetch:(r,n,i,s)=>{var o;return C(o=e,A,as).call(o,r,n,i,s)},moveToTail:r=>{var n;return C(n=e,A,Qn).call(n,r)},indexes:r=>{var n;return C(n=e,A,lr).call(n,r)},rindexes:r=>{var n;return C(n=e,A,hr).call(n,r)},isStale:r=>{var n;return h(n=e,nt).call(n,r)}}}get max(){return h(this,pt)}get maxSize(){return h(this,et)}get calculatedSize(){return h(this,_t)}get size(){return h(this,Be)}get fetchMethod(){return h(this,wn)}get dispose(){return h(this,bt)}get disposeAfter(){return h(this,wt)}getRemainingTTL(e){return h(this,we).has(e)?1/0:0}*entries(){for(let e of C(this,A,lr).call(this))h(this,D)[e]!==void 0&&h(this,se)[e]!==void 0&&!C(this,A,ie).call(this,h(this,D)[e])&&(yield[h(this,se)[e],h(this,D)[e]])}*rentries(){for(let e of C(this,A,hr).call(this))h(this,D)[e]!==void 0&&h(this,se)[e]!==void 0&&!C(this,A,ie).call(this,h(this,D)[e])&&(yield[h(this,se)[e],h(this,D)[e]])}*keys(){for(let e of C(this,A,lr).call(this)){let r=h(this,se)[e];r!==void 0&&!C(this,A,ie).call(this,h(this,D)[e])&&(yield r)}}*rkeys(){for(let e of C(this,A,hr).call(this)){let r=h(this,se)[e];r!==void 0&&!C(this,A,ie).call(this,h(this,D)[e])&&(yield r)}}*values(){for(let e of C(this,A,lr).call(this))h(this,D)[e]!==void 0&&!C(this,A,ie).call(this,h(this,D)[e])&&(yield h(this,D)[e])}*rvalues(){for(let e of C(this,A,hr).call(this))h(this,D)[e]!==void 0&&!C(this,A,ie).call(this,h(this,D)[e])&&(yield h(this,D)[e])}[Symbol.iterator](){return this.entries()}find(e,r={}){for(let n of C(this,A,lr).call(this)){let i=h(this,D)[n],s=C(this,A,ie).call(this,i)?i.__staleWhileFetching:i;if(s!==void 0&&e(s,h(this,se)[n],this))return this.get(h(this,se)[n],r)}}forEach(e,r=this){for(let n of C(this,A,lr).call(this)){let i=h(this,D)[n],s=C(this,A,ie).call(this,i)?i.__staleWhileFetching:i;s!==void 0&&e.call(r,s,h(this,se)[n],this)}}rforEach(e,r=this){for(let n of C(this,A,hr).call(this)){let i=h(this,D)[n],s=C(this,A,ie).call(this,i)?i.__staleWhileFetching:i;s!==void 0&&e.call(r,s,h(this,se)[n],this)}}purgeStale(){let e=!1;for(let r of C(this,A,hr).call(this,{allowStale:!0}))h(this,nt).call(this,r)&&(this.delete(h(this,se)[r]),e=!0);return e}info(e){let r=h(this,we).get(e);if(r===void 0)return;let n=h(this,D)[r],i=C(this,A,ie).call(this,n)?n.__staleWhileFetching:n;if(i===void 0)return;let s={value:i};if(h(this,rt)&&h(this,Bt)){let o=h(this,rt)[r],a=h(this,Bt)[r];if(o&&a){let u=o-(gn.now()-a);s.ttl=u,s.start=Date.now()}}return h(this,mt)&&(s.size=h(this,mt)[r]),s}dump(){let e=[];for(let r of C(this,A,lr).call(this,{allowStale:!0})){let n=h(this,se)[r],i=h(this,D)[r],s=C(this,A,ie).call(this,i)?i.__staleWhileFetching:i;if(s===void 0||n===void 0)continue;let o={value:s};if(h(this,rt)&&h(this,Bt)){o.ttl=h(this,rt)[r];let a=gn.now()-h(this,Bt)[r];o.start=Math.floor(Date.now()-a)}h(this,mt)&&(o.size=h(this,mt)[r]),e.unshift([n,o])}return e}load(e){this.clear();for(let[r,n]of e){if(n.start){let i=Date.now()-n.start;n.start=gn.now()-i}this.set(r,n.value,n)}}set(e,r,n={}){var b,y,E,g,_;if(r===void 0)return this.delete(e),this;let{ttl:i=this.ttl,start:s,noDisposeOnSet:o=this.noDisposeOnSet,sizeCalculation:a=this.sizeCalculation,status:u}=n,{noUpdateTTL:c=this.noUpdateTTL}=n,l=h(this,ei).call(this,e,r,n.size||0,a);if(this.maxEntrySize&&l>this.maxEntrySize)return u&&(u.set="miss",u.maxEntrySizeExceeded=!0),this.delete(e),this;let f=h(this,Be)===0?void 0:h(this,we).get(e);if(f===void 0)f=h(this,Be)===0?h(this,Re):h(this,Et).length!==0?h(this,Et).pop():h(this,Be)===h(this,pt)?C(this,A,os).call(this,!1):h(this,Be),h(this,se)[f]=e,h(this,D)[f]=r,h(this,we).set(e,f),h(this,Me)[h(this,Re)]=f,h(this,tt)[f]=h(this,Re),q(this,Re,f),li(this,Be)._++,h(this,_n).call(this,f,l,u),u&&(u.set="add"),c=!1;else{C(this,A,Qn).call(this,f);let p=h(this,D)[f];if(r!==p){if(h(this,dr)&&C(this,A,ie).call(this,p)){p.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:x}=p;x!==void 0&&!o&&(h(this,xt)&&((b=h(this,bt))==null||b.call(this,x,e,"set")),h(this,Fe)&&((y=h(this,Ne))==null||y.push([x,e,"set"])))}else o||(h(this,xt)&&((E=h(this,bt))==null||E.call(this,p,e,"set")),h(this,Fe)&&((g=h(this,Ne))==null||g.push([p,e,"set"])));if(h(this,Pr).call(this,f),h(this,_n).call(this,f,l,u),h(this,D)[f]=r,u){u.set="replace";let x=p&&C(this,A,ie).call(this,p)?p.__staleWhileFetching:p;x!==void 0&&(u.oldValue=x)}}else u&&(u.set="update")}if(i!==0&&!h(this,rt)&&C(this,A,ba).call(this),h(this,rt)&&(c||h(this,Jn).call(this,f,i,s),u&&h(this,$t).call(this,u,f)),!o&&h(this,Fe)&&h(this,Ne)){let p=h(this,Ne),x;for(;x=p==null?void 0:p.shift();)(_=h(this,wt))==null||_.call(this,...x)}return this}pop(){var e;try{for(;h(this,Be);){let r=h(this,D)[h(this,Ue)];if(C(this,A,os).call(this,!0),C(this,A,ie).call(this,r)){if(r.__staleWhileFetching)return r.__staleWhileFetching}else if(r!==void 0)return r}}finally{if(h(this,Fe)&&h(this,Ne)){let r=h(this,Ne),n;for(;n=r==null?void 0:r.shift();)(e=h(this,wt))==null||e.call(this,...n)}}}has(e,r={}){let{updateAgeOnHas:n=this.updateAgeOnHas,status:i}=r,s=h(this,we).get(e);if(s!==void 0){let o=h(this,D)[s];if(C(this,A,ie).call(this,o)&&o.__staleWhileFetching===void 0)return!1;if(h(this,nt).call(this,s))i&&(i.has="stale",h(this,$t).call(this,i,s));else return n&&h(this,Cr).call(this,s),i&&(i.has="hit",h(this,$t).call(this,i,s)),!0}else i&&(i.has="miss");return!1}peek(e,r={}){let{allowStale:n=this.allowStale}=r,i=h(this,we).get(e);if(i===void 0||!n&&h(this,nt).call(this,i))return;let s=h(this,D)[i];return C(this,A,ie).call(this,s)?s.__staleWhileFetching:s}async fetch(e,r={}){let{allowStale:n=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:s=this.noDeleteOnStaleGet,ttl:o=this.ttl,noDisposeOnSet:a=this.noDisposeOnSet,size:u=0,sizeCalculation:c=this.sizeCalculation,noUpdateTTL:l=this.noUpdateTTL,noDeleteOnFetchRejection:f=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:b=this.allowStaleOnFetchRejection,ignoreFetchAbort:y=this.ignoreFetchAbort,allowStaleOnFetchAbort:E=this.allowStaleOnFetchAbort,context:g,forceRefresh:_=!1,status:p,signal:x}=r;if(!h(this,dr))return p&&(p.fetch="get"),this.get(e,{allowStale:n,updateAgeOnGet:i,noDeleteOnStaleGet:s,status:p});let v={allowStale:n,updateAgeOnGet:i,noDeleteOnStaleGet:s,ttl:o,noDisposeOnSet:a,size:u,sizeCalculation:c,noUpdateTTL:l,noDeleteOnFetchRejection:f,allowStaleOnFetchRejection:b,allowStaleOnFetchAbort:E,ignoreFetchAbort:y,status:p,signal:x},S=h(this,we).get(e);if(S===void 0){p&&(p.fetch="miss");let P=C(this,A,as).call(this,e,S,v,g);return P.__returned=P}else{let P=h(this,D)[S];if(C(this,A,ie).call(this,P)){let J=n&&P.__staleWhileFetching!==void 0;return p&&(p.fetch="inflight",J&&(p.returnedStale=!0)),J?P.__staleWhileFetching:P.__returned=P}let R=h(this,nt).call(this,S);if(!_&&!R)return p&&(p.fetch="hit"),C(this,A,Qn).call(this,S),i&&h(this,Cr).call(this,S),p&&h(this,$t).call(this,p,S),P;let O=C(this,A,as).call(this,e,S,v,g),ge=O.__staleWhileFetching!==void 0&&n;return p&&(p.fetch=R?"stale":"refresh",ge&&R&&(p.returnedStale=!0)),ge?O.__staleWhileFetching:O.__returned=O}}get(e,r={}){let{allowStale:n=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:s=this.noDeleteOnStaleGet,status:o}=r,a=h(this,we).get(e);if(a!==void 0){let u=h(this,D)[a],c=C(this,A,ie).call(this,u);return o&&h(this,$t).call(this,o,a),h(this,nt).call(this,a)?(o&&(o.get="stale"),c?(o&&n&&u.__staleWhileFetching!==void 0&&(o.returnedStale=!0),n?u.__staleWhileFetching:void 0):(s||this.delete(e),o&&n&&(o.returnedStale=!0),n?u:void 0)):(o&&(o.get="hit"),c?u.__staleWhileFetching:(C(this,A,Qn).call(this,a),i&&h(this,Cr).call(this,a),u))}else o&&(o.get="miss")}delete(e){var n,i,s,o;let r=!1;if(h(this,Be)!==0){let a=h(this,we).get(e);if(a!==void 0)if(r=!0,h(this,Be)===1)this.clear();else{h(this,Pr).call(this,a);let u=h(this,D)[a];if(C(this,A,ie).call(this,u)?u.__abortController.abort(new Error("deleted")):(h(this,xt)||h(this,Fe))&&(h(this,xt)&&((n=h(this,bt))==null||n.call(this,u,e,"delete")),h(this,Fe)&&((i=h(this,Ne))==null||i.push([u,e,"delete"]))),h(this,we).delete(e),h(this,se)[a]=void 0,h(this,D)[a]=void 0,a===h(this,Re))q(this,Re,h(this,tt)[a]);else if(a===h(this,Ue))q(this,Ue,h(this,Me)[a]);else{let c=h(this,tt)[a];h(this,Me)[c]=h(this,Me)[a];let l=h(this,Me)[a];h(this,tt)[l]=h(this,tt)[a]}li(this,Be)._--,h(this,Et).push(a)}}if(h(this,Fe)&&((s=h(this,Ne))!=null&&s.length)){let a=h(this,Ne),u;for(;u=a==null?void 0:a.shift();)(o=h(this,wt))==null||o.call(this,...u)}return r}clear(){var e,r,n;for(let i of C(this,A,hr).call(this,{allowStale:!0})){let s=h(this,D)[i];if(C(this,A,ie).call(this,s))s.__abortController.abort(new Error("deleted"));else{let o=h(this,se)[i];h(this,xt)&&((e=h(this,bt))==null||e.call(this,s,o,"delete")),h(this,Fe)&&((r=h(this,Ne))==null||r.push([s,o,"delete"]))}}if(h(this,we).clear(),h(this,D).fill(void 0),h(this,se).fill(void 0),h(this,rt)&&h(this,Bt)&&(h(this,rt).fill(0),h(this,Bt).fill(0)),h(this,mt)&&h(this,mt).fill(0),q(this,Ue,0),q(this,Re,0),h(this,Et).length=0,q(this,_t,0),q(this,Be,0),h(this,Fe)&&h(this,Ne)){let i=h(this,Ne),s;for(;s=i==null?void 0:i.shift();)(n=h(this,wt))==null||n.call(this,...s)}}};pt=new WeakMap,et=new WeakMap,bt=new WeakMap,wt=new WeakMap,wn=new WeakMap,Be=new WeakMap,_t=new WeakMap,we=new WeakMap,se=new WeakMap,D=new WeakMap,Me=new WeakMap,tt=new WeakMap,Ue=new WeakMap,Re=new WeakMap,Et=new WeakMap,Ne=new WeakMap,mt=new WeakMap,Bt=new WeakMap,rt=new WeakMap,xt=new WeakMap,dr=new WeakMap,Fe=new WeakMap,A=new WeakSet,ba=function(){let e=new pn(h(this,pt)),r=new pn(h(this,pt));q(this,rt,e),q(this,Bt,r),q(this,Jn,(s,o,a=gn.now())=>{if(r[s]=o!==0?a:0,e[s]=o,o!==0&&this.ttlAutopurge){let u=setTimeout(()=>{h(this,nt).call(this,s)&&this.delete(h(this,se)[s])},o+1);u.unref&&u.unref()}}),q(this,Cr,s=>{r[s]=e[s]!==0?gn.now():0}),q(this,$t,(s,o)=>{if(e[o]){let a=e[o],u=r[o];if(!a||!u)return;s.ttl=a,s.start=u,s.now=n||i();let c=s.now-u;s.remainingTTL=a-c}});let n=0,i=()=>{let s=gn.now();if(this.ttlResolution>0){n=s;let o=setTimeout(()=>n=0,this.ttlResolution);o.unref&&o.unref()}return s};this.getRemainingTTL=s=>{let o=h(this,we).get(s);if(o===void 0)return 0;let a=e[o],u=r[o];if(!a||!u)return 1/0;let c=(n||i())-u;return a-c},q(this,nt,s=>{let o=r[s],a=e[s];return!!a&&!!o&&(n||i())-o>a})},Cr=new WeakMap,$t=new WeakMap,Jn=new WeakMap,nt=new WeakMap,ml=function(){let e=new pn(h(this,pt));q(this,_t,0),q(this,mt,e),q(this,Pr,r=>{q(this,_t,h(this,_t)-e[r]),e[r]=0}),q(this,ei,(r,n,i,s)=>{if(C(this,A,ie).call(this,n))return 0;if(!fr(i))if(s){if(typeof s!="function")throw new TypeError("sizeCalculation must be a function");if(i=s(n,r),!fr(i))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return i}),q(this,_n,(r,n,i)=>{if(e[r]=n,h(this,et)){let s=h(this,et)-e[r];for(;h(this,_t)>s;)C(this,A,os).call(this,!0)}q(this,_t,h(this,_t)+e[r]),i&&(i.entrySize=n,i.totalCalculatedSize=h(this,_t))})},Pr=new WeakMap,_n=new WeakMap,ei=new WeakMap,lr=function*({allowStale:e=this.allowStale}={}){if(h(this,Be))for(let r=h(this,Re);!(!C(this,A,wa).call(this,r)||((e||!h(this,nt).call(this,r))&&(yield r),r===h(this,Ue)));)r=h(this,tt)[r]},hr=function*({allowStale:e=this.allowStale}={}){if(h(this,Be))for(let r=h(this,Ue);!(!C(this,A,wa).call(this,r)||((e||!h(this,nt).call(this,r))&&(yield r),r===h(this,Re)));)r=h(this,Me)[r]},wa=function(e){return e!==void 0&&h(this,we).get(h(this,se)[e])===e},os=function(e){var s,o;let r=h(this,Ue),n=h(this,se)[r],i=h(this,D)[r];return h(this,dr)&&C(this,A,ie).call(this,i)?i.__abortController.abort(new Error("evicted")):(h(this,xt)||h(this,Fe))&&(h(this,xt)&&((s=h(this,bt))==null||s.call(this,i,n,"evict")),h(this,Fe)&&((o=h(this,Ne))==null||o.push([i,n,"evict"]))),h(this,Pr).call(this,r),e&&(h(this,se)[r]=void 0,h(this,D)[r]=void 0,h(this,Et).push(r)),h(this,Be)===1?(q(this,Ue,q(this,Re,0)),h(this,Et).length=0):q(this,Ue,h(this,Me)[r]),h(this,we).delete(n),li(this,Be)._--,r},as=function(e,r,n,i){let s=r===void 0?void 0:h(this,D)[r];if(C(this,A,ie).call(this,s))return s;let o=new us,{signal:a}=n;a==null||a.addEventListener("abort",()=>o.abort(a.reason),{signal:o.signal});let u={signal:o.signal,options:n,context:i},c=(g,_=!1)=>{let{aborted:p}=o.signal,x=n.ignoreFetchAbort&&g!==void 0;if(n.status&&(p&&!_?(n.status.fetchAborted=!0,n.status.fetchError=o.signal.reason,x&&(n.status.fetchAbortIgnored=!0)):n.status.fetchResolved=!0),p&&!x&&!_)return f(o.signal.reason);let v=y;return h(this,D)[r]===y&&(g===void 0?v.__staleWhileFetching?h(this,D)[r]=v.__staleWhileFetching:this.delete(e):(n.status&&(n.status.fetchUpdated=!0),this.set(e,g,u.options))),g},l=g=>(n.status&&(n.status.fetchRejected=!0,n.status.fetchError=g),f(g)),f=g=>{let{aborted:_}=o.signal,p=_&&n.allowStaleOnFetchAbort,x=p||n.allowStaleOnFetchRejection,v=x||n.noDeleteOnFetchRejection,S=y;if(h(this,D)[r]===y&&(!v||S.__staleWhileFetching===void 0?this.delete(e):p||(h(this,D)[r]=S.__staleWhileFetching)),x)return n.status&&S.__staleWhileFetching!==void 0&&(n.status.returnedStale=!0),S.__staleWhileFetching;if(S.__returned===S)throw g},b=(g,_)=>{var x;let p=(x=h(this,wn))==null?void 0:x.call(this,e,s,u);p&&p instanceof Promise&&p.then(v=>g(v===void 0?void 0:v),_),o.signal.addEventListener("abort",()=>{(!n.ignoreFetchAbort||n.allowStaleOnFetchAbort)&&(g(void 0),n.allowStaleOnFetchAbort&&(g=v=>c(v,!0)))})};n.status&&(n.status.fetchDispatched=!0);let y=new Promise(b).then(c,l),E=Object.assign(y,{__abortController:o,__staleWhileFetching:s,__returned:void 0});return r===void 0?(this.set(e,E,{...u.options,status:void 0}),r=h(this,we).get(e)):h(this,D)[r]=E,E},ie=function(e){if(!h(this,dr))return!1;let r=e;return!!r&&r instanceof Promise&&r.hasOwnProperty("__staleWhileFetching")&&r.__abortController instanceof us},_a=function(e,r){h(this,tt)[r]=e,h(this,Me)[e]=r},Qn=function(e){e!==h(this,Re)&&(e===h(this,Ue)?q(this,Ue,h(this,Me)[e]):C(this,A,_a).call(this,h(this,tt)[e],h(this,Me)[e]),C(this,A,_a).call(this,h(this,Re),e),q(this,Re,e))};var pa=Ea;cs.LRUCache=pa});var xl=B(fs=>{"use strict";d();Object.defineProperty(fs,"__esModule",{value:!0});fs.CheckpointDB=void 0;var je=cr(),Zp=Bl(),ma=class t{constructor(e){var r,n;this._stats={cache:{reads:0,hits:0,writes:0},db:{reads:0,hits:0,writes:0}},this.db=e.db,this.cacheSize=(r=e.cacheSize)!=null?r:0,this.valueEncoding=(n=e.valueEncoding)!=null?n:je.ValueEncoding.String,this.checkpoints=[],this.cacheSize>0&&(this._cache=new Zp.LRUCache({max:this.cacheSize,updateAgeOnGet:!0}))}setCheckpoints(e){this.checkpoints=[];for(let r=0;r<e.length;r++)this.checkpoints.push({root:e[r].root,keyValueMap:new Map(e[r].keyValueMap)})}hasCheckpoints(){return this.checkpoints.length>0}checkpoint(e){this.checkpoints.push({keyValueMap:new Map,root:e})}async commit(){let{keyValueMap:e}=this.checkpoints.pop();if(this.hasCheckpoints()){let r=this.checkpoints[this.checkpoints.length-1].keyValueMap;for(let[n,i]of e.entries())r.set(n,i)}else{let r=[];for(let[n,i]of e.entries())i===void 0?r.push({type:"del",key:(0,je.unprefixedHexToBytes)(n)}):r.push({type:"put",key:(0,je.unprefixedHexToBytes)(n),value:i});await this.batch(r)}}async revert(){let{root:e}=this.checkpoints.pop();return e}async get(e){var s;let r=(0,je.bytesToUnprefixedHex)(e);if(this._cache!==void 0){let o=this._cache.get(r);if(this._stats.cache.reads+=1,o!==void 0)return this._stats.cache.hits+=1,o}for(let o=this.checkpoints.length-1;o>=0;o--)if(this.checkpoints[o].keyValueMap.has(r))return this.checkpoints[o].keyValueMap.get(r);let n=await this.db.get(r,{keyEncoding:je.KeyEncoding.String,valueEncoding:this.valueEncoding});this._stats.db.reads+=1,n!==void 0&&(this._stats.db.hits+=1);let i=n!==void 0?n instanceof Uint8Array?n:(0,je.unprefixedHexToBytes)(n):void 0;return(s=this._cache)==null||s.set(r,i),this.hasCheckpoints()&&this.checkpoints[this.checkpoints.length-1].keyValueMap.set(r,i),i}async put(e,r){let n=(0,je.bytesToUnprefixedHex)(e);if(this.hasCheckpoints())this.checkpoints[this.checkpoints.length-1].keyValueMap.set(n,r);else{let i=this.valueEncoding===je.ValueEncoding.Bytes?r:(0,je.bytesToUnprefixedHex)(r);await this.db.put(n,i,{keyEncoding:je.KeyEncoding.String,valueEncoding:this.valueEncoding}),this._stats.db.writes+=1,this._cache!==void 0&&(this._cache.set(n,r),this._stats.cache.writes+=1)}}async del(e){let r=(0,je.bytesToUnprefixedHex)(e);this.hasCheckpoints()?this.checkpoints[this.checkpoints.length-1].keyValueMap.set(r,void 0):(await this.db.del(r,{keyEncoding:je.KeyEncoding.String}),this._stats.db.writes+=1,this._cache!==void 0&&(this._cache.set(r,void 0),this._stats.cache.writes+=1))}async batch(e){if(this.hasCheckpoints())for(let r of e)r.type==="put"?await this.put(r.key,r.value):r.type==="del"&&await this.del(r.key);else{let r=e.map(n=>{let i={key:(0,je.bytesToUnprefixedHex)(n.key),value:n.type==="put"?n.value:void 0,type:n.type,opts:{...n.opts,valueEncoding:this.valueEncoding}};return this._stats.db.writes+=1,n.type==="put"&&this.valueEncoding===je.ValueEncoding.String&&(i.value=(0,je.bytesToUnprefixedHex)(i.value)),i});await this.db.batch(r)}}stats(e=!0){var n,i;let r={...this._stats,size:(i=(n=this._cache)==null?void 0:n.size)!=null?i:0};return e&&(this._stats={cache:{reads:0,hits:0,writes:0},db:{reads:0,hits:0,writes:0}}),r}shallowCopy(){return new t({db:this.db,cacheSize:this.cacheSize,valueEncoding:this.valueEncoding})}open(){return Promise.resolve()}};fs.CheckpointDB=ma});var Ba=B(kr=>{"use strict";d();var Xp=kr&&kr.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),Qp=kr&&kr.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Xp(e,t,r)};Object.defineProperty(kr,"__esModule",{value:!0});Qp(xl(),kr)});var Ur=B(Pt=>{"use strict";d();Object.defineProperty(Pt,"__esModule",{value:!0});Pt.RLP=Pt.utils=Pt.decode=Pt.encode=void 0;function Ia(t){if(Array.isArray(t)){let r=[],n=0;for(let i=0;i<t.length;i++){let s=Ia(t[i]);r.push(s),n+=s.length}return Ta(vl(n,192),...r)}let e=Ll(t);return e.length===1&&e[0]<128?e:Ta(vl(e.length,128),e)}Pt.encode=Ia;function En(t,e,r){if(r>t.length)throw new Error("invalid RLP (safeSlice): end slice of Uint8Array out-of-bounds");return t.slice(e,r)}function Tl(t){if(t[0]===0)throw new Error("invalid RLP: extra zeros");return Al(Sl(t))}function vl(t,e){if(t<56)return Uint8Array.from([t+e]);let r=va(t),n=r.length/2,i=va(e+55+n);return Uint8Array.from(ls(i+r))}function Il(t,e=!1){if(typeof t=="undefined"||t===null||t.length===0)return Uint8Array.from([]);let r=Ll(t),n=xa(r);if(e)return{data:n.data,remainder:n.remainder.slice()};if(n.remainder.length!==0)throw new Error("invalid RLP: remainder must be zero");return n.data}Pt.decode=Il;function xa(t){let e,r,n,i,s,o=[],a=t[0];if(a<=127)return{data:t.slice(0,1),remainder:t.subarray(1)};if(a<=183){if(e=a-127,a===128?n=Uint8Array.from([]):n=En(t,1,e),e===2&&n[0]<128)throw new Error("invalid RLP encoding: invalid prefix, single byte < 0x80 are not prefixed");return{data:n,remainder:t.subarray(e)}}else if(a<=191){if(r=a-182,t.length-1<r)throw new Error("invalid RLP: not enough bytes for string length");if(e=Tl(En(t,1,r)),e<=55)throw new Error("invalid RLP: expected string length to be greater than 55");return n=En(t,r,e+r),{data:n,remainder:t.subarray(e+r)}}else if(a<=247){for(e=a-191,i=En(t,1,e);i.length;)s=xa(i),o.push(s.data),i=s.remainder;return{data:o,remainder:t.subarray(e)}}else{if(r=a-246,e=Tl(En(t,1,r)),e<56)throw new Error("invalid RLP: encoded list too short");let u=r+e;if(u>t.length)throw new Error("invalid RLP: total length is larger than the data");for(i=En(t,r,u);i.length;)s=xa(i),o.push(s.data),i=s.remainder;return{data:o,remainder:t.subarray(u)}}}var Jp=Array.from({length:256},(t,e)=>e.toString(16).padStart(2,"0"));function Sl(t){let e="";for(let r=0;r<t.length;r++)e+=Jp[t[r]];return e}function Al(t){let e=Number.parseInt(t,16);if(Number.isNaN(e))throw new Error("Invalid byte sequence");return e}function ls(t){if(typeof t!="string")throw new TypeError("hexToBytes: expected string, got "+typeof t);if(t.length%2)throw new Error("hexToBytes: received invalid unpadded hex");let e=new Uint8Array(t.length/2);for(let r=0;r<e.length;r++){let n=r*2;e[r]=Al(t.slice(n,n+2))}return e}function Ta(...t){if(t.length===1)return t[0];let e=t.reduce((n,i)=>n+i.length,0),r=new Uint8Array(e);for(let n=0,i=0;n<t.length;n++){let s=t[n];r.set(s,i),i+=s.length}return r}function Rl(t){return new TextEncoder().encode(t)}function va(t){if(t<0)throw new Error("Invalid integer as argument, must be unsigned!");let e=t.toString(16);return e.length%2?`0${e}`:e}function eb(t){return t.length%2?`0${t}`:t}function Nl(t){return t.length>=2&&t[0]==="0"&&t[1]==="x"}function tb(t){return typeof t!="string"?t:Nl(t)?t.slice(2):t}function Ll(t){if(t instanceof Uint8Array)return t;if(typeof t=="string")return Nl(t)?ls(eb(tb(t))):Rl(t);if(typeof t=="number"||typeof t=="bigint")return t?ls(va(t)):Uint8Array.from([]);if(t==null)return Uint8Array.from([]);throw new Error("toBytes: received unsupported type "+typeof t)}Pt.utils={bytesToHex:Sl,concatBytes:Ta,hexToBytes:ls,utf8ToBytes:Rl};Pt.RLP={encode:Ia,decode:Il}});var ds=B(hs=>{"use strict";d();Object.defineProperty(hs,"__esModule",{value:!0});hs.BranchNode=void 0;var rb=Ur(),Sa=class t{constructor(){this._branches=new Array(16).fill(null),this._value=null}static fromArray(e){let r=new t;return r._branches=e.slice(0,16),r._value=e[16],r}value(e){return e!=null&&(this._value=e),this._value&&this._value.length>0?this._value:null}setBranch(e,r){this._branches[e]=r}raw(){return[...this._branches,this._value]}serialize(){return rb.RLP.encode(this.raw())}getBranch(e){let r=this._branches[e];return r!==null&&r.length>0?r:null}getChildren(){let e=[];for(let r=0;r<16;r++){let n=this._branches[r];n!==null&&n.length>0&&e.push([r,n])}return e}};hs.BranchNode=Sa});var ti=B(yr=>{"use strict";d();Object.defineProperty(yr,"__esModule",{value:!0});yr.isTerminator=yr.removeHexPrefix=yr.addHexPrefix=void 0;function nb(t,e){return t.length%2?t.unshift(1):(t.unshift(0),t.unshift(0)),e&&(t[0]+=2),t}yr.addHexPrefix=nb;function ib(t){return t[0]%2?t=t.slice(1):t=t.slice(2),t}yr.removeHexPrefix=ib;function sb(t){return t[0]>1}yr.isTerminator=sb});var mn=B(ut=>{"use strict";d();Object.defineProperty(ut,"__esModule",{value:!0});ut.doKeysMatch=ut.matchingNibbleLength=ut.nibblesCompare=ut.nibblestoBytes=ut.bytesToNibbles=void 0;var ob=cr();function ab(t){let e=(0,ob.toBytes)(t),r=[];for(let n=0;n<e.length;n++){let i=n*2;r[i]=e[n]>>4,++i,r[i]=e[n]%16}return r}ut.bytesToNibbles=ab;function ub(t){let e=new Uint8Array(t.length/2);for(let r=0;r<e.length;r++){let n=r*2;e[r]=(t[n]<<4)+t[++n]}return e}ut.nibblestoBytes=ub;function cb(t,e){let r=Math.min(t.length,e.length),n=0;for(let i=0;i<r;i++)if(t[i]<e[i]){n=-1;break}else if(t[i]>e[i]){n=1;break}return n===0&&(t.length<e.length?n=-1:t.length>e.length&&(n=1)),n}ut.nibblesCompare=cb;function Ol(t,e){let r=0;for(;t[r]===e[r]&&t.length>r;)r++;return r}ut.matchingNibbleLength=Ol;function fb(t,e){let r=Ol(t,e);return r===t.length&&r===e.length}ut.doKeysMatch=fb});var Ra=B(ys=>{"use strict";d();Object.defineProperty(ys,"__esModule",{value:!0});ys.Node=void 0;var lb=Ur(),Cl=ti(),hb=mn(),Aa=class{constructor(e,r,n){this._nibbles=e,this._value=r,this._terminator=n}static decodeKey(e){return(0,Cl.removeHexPrefix)(e)}key(e){return e!==void 0&&(this._nibbles=e),this._nibbles.slice(0)}keyLength(){return this._nibbles.length}value(e){return e!==void 0&&(this._value=e),this._value}encodedKey(){return(0,Cl.addHexPrefix)(this._nibbles.slice(0),this._terminator)}raw(){return[(0,hb.nibblestoBytes)(this.encodedKey()),this._value]}serialize(){return lb.RLP.encode(this.raw())}};ys.Node=Aa});var ps=B(gs=>{"use strict";d();Object.defineProperty(gs,"__esModule",{value:!0});gs.ExtensionNode=void 0;var db=ti(),yb=Ra(),Na=class extends yb.Node{constructor(e,r){super(e,r,!1)}static encodeKey(e){return(0,db.addHexPrefix)(e,!1)}};gs.ExtensionNode=Na});var Oa=B(bs=>{"use strict";d();Object.defineProperty(bs,"__esModule",{value:!0});bs.LeafNode=void 0;var gb=ti(),pb=Ra(),La=class extends pb.Node{constructor(e,r){super(e,r,!0)}static encodeKey(e){return(0,gb.addHexPrefix)(e,!0)}};bs.LeafNode=La});var ql=B(gr=>{"use strict";d();Object.defineProperty(gr,"__esModule",{value:!0});gr.decodeNode=gr.isRawNode=gr.decodeRawNode=void 0;var bb=Ur(),wb=ti(),_b=mn(),Eb=ds(),Pl=ps(),kl=Oa();function Ul(t){if(t.length===17)return Eb.BranchNode.fromArray(t);if(t.length===2){let e=(0,_b.bytesToNibbles)(t[0]);return(0,wb.isTerminator)(e)?new kl.LeafNode(kl.LeafNode.decodeKey(e),t[1]):new Pl.ExtensionNode(Pl.ExtensionNode.decodeKey(e),t[1])}else throw new Error("Invalid node")}gr.decodeRawNode=Ul;function Hl(t){return Array.isArray(t)&&!(t instanceof Uint8Array)}gr.isRawNode=Hl;function mb(t){let e=bb.RLP.decode(Uint8Array.from(t));if(!Hl(e))throw new Error("Invalid node");return Ul(e)}gr.decodeNode=mb});var Bn=B(kt=>{"use strict";d();var Bb=kt&&kt.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),ws=kt&&kt.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Bb(e,t,r)};Object.defineProperty(kt,"__esModule",{value:!0});ws(ds(),kt);ws(ps(),kt);ws(Oa(),kt);ws(ql(),kt)});var Fl=B((NB,Ml)=>{d();var xn=1e3,Tn=xn*60,vn=Tn*60,Hr=vn*24,xb=Hr*7,Tb=Hr*365.25;Ml.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return vb(t);if(r==="number"&&isFinite(t))return e.long?Sb(t):Ib(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function vb(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*Tb;case"weeks":case"week":case"w":return r*xb;case"days":case"day":case"d":return r*Hr;case"hours":case"hour":case"hrs":case"hr":case"h":return r*vn;case"minutes":case"minute":case"mins":case"min":case"m":return r*Tn;case"seconds":case"second":case"secs":case"sec":case"s":return r*xn;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function Ib(t){var e=Math.abs(t);return e>=Hr?Math.round(t/Hr)+"d":e>=vn?Math.round(t/vn)+"h":e>=Tn?Math.round(t/Tn)+"m":e>=xn?Math.round(t/xn)+"s":t+"ms"}function Sb(t){var e=Math.abs(t);return e>=Hr?_s(t,e,Hr,"day"):e>=vn?_s(t,e,vn,"hour"):e>=Tn?_s(t,e,Tn,"minute"):e>=xn?_s(t,e,xn,"second"):t+" ms"}function _s(t,e,r,n){var i=e>=r*1.5;return Math.round(t/r)+" "+n+(i?"s":"")}});var Dl=B((OB,jl)=>{d();function Ab(t){r.debug=r,r.default=r,r.coerce=u,r.disable=o,r.enable=i,r.enabled=a,r.humanize=Fl(),r.destroy=c,Object.keys(t).forEach(l=>{r[l]=t[l]}),r.names=[],r.skips=[],r.formatters={};function e(l){let f=0;for(let b=0;b<l.length;b++)f=(f<<5)-f+l.charCodeAt(b),f|=0;return r.colors[Math.abs(f)%r.colors.length]}r.selectColor=e;function r(l){let f,b=null,y,E;function g(..._){if(!g.enabled)return;let p=g,x=Number(new Date),v=x-(f||x);p.diff=v,p.prev=f,p.curr=x,f=x,_[0]=r.coerce(_[0]),typeof _[0]!="string"&&_.unshift("%O");let S=0;_[0]=_[0].replace(/%([a-zA-Z%])/g,(R,O)=>{if(R==="%%")return"%";S++;let M=r.formatters[O];if(typeof M=="function"){let ge=_[S];R=M.call(p,ge),_.splice(S,1),S--}return R}),r.formatArgs.call(p,_),(p.log||r.log).apply(p,_)}return g.namespace=l,g.useColors=r.useColors(),g.color=r.selectColor(l),g.extend=n,g.destroy=r.destroy,Object.defineProperty(g,"enabled",{enumerable:!0,configurable:!1,get:()=>b!==null?b:(y!==r.namespaces&&(y=r.namespaces,E=r.enabled(l)),E),set:_=>{b=_}}),typeof r.init=="function"&&r.init(g),g}function n(l,f){let b=r(this.namespace+(typeof f=="undefined"?":":f)+l);return b.log=this.log,b}function i(l){r.save(l),r.namespaces=l,r.names=[],r.skips=[];let f=(typeof l=="string"?l:"").trim().replace(/\s+/g,",").split(",").filter(Boolean);for(let b of f)b[0]==="-"?r.skips.push(b.slice(1)):r.names.push(b)}function s(l,f){let b=0,y=0,E=-1,g=0;for(;b<l.length;)if(y<f.length&&(f[y]===l[b]||f[y]==="*"))f[y]==="*"?(E=y,g=b,y++):(b++,y++);else if(E!==-1)y=E+1,g++,b=g;else return!1;for(;y<f.length&&f[y]==="*";)y++;return y===f.length}function o(){let l=[...r.names,...r.skips.map(f=>"-"+f)].join(",");return r.enable(""),l}function a(l){for(let f of r.skips)if(s(l,f))return!1;for(let f of r.names)if(s(l,f))return!0;return!1}function u(l){return l instanceof Error?l.stack||l.message:l}function c(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}jl.exports=Ab});var Kl=B((ze,Es)=>{d();ze.formatArgs=Nb;ze.save=Lb;ze.load=Ob;ze.useColors=Rb;ze.storage=Cb();ze.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();ze.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function Rb(){if(typeof window!="undefined"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let t;return typeof document!="undefined"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window!="undefined"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator!="undefined"&&navigator.userAgent&&(t=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(t[1],10)>=31||typeof navigator!="undefined"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function Nb(t){if(t[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+t[0]+(this.useColors?"%c ":" ")+"+"+Es.exports.humanize(this.diff),!this.useColors)return;let e="color: "+this.color;t.splice(1,0,e,"color: inherit");let r=0,n=0;t[0].replace(/%[a-zA-Z%]/g,i=>{i!=="%%"&&(r++,i==="%c"&&(n=r))}),t.splice(n,0,e)}ze.log=console.debug||console.log||(()=>{});function Lb(t){try{t?ze.storage.setItem("debug",t):ze.storage.removeItem("debug")}catch{}}function Ob(){let t;try{t=ze.storage.getItem("debug")||ze.storage.getItem("DEBUG")}catch{}return!t&&typeof process!="undefined"&&"env"in process&&(t=process.env.DEBUG),t}function Cb(){try{return localStorage}catch{}}Es.exports=Dl()(ze);var{formatters:Pb}=Es.exports;Pb.j=function(t){try{return JSON.stringify(t)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}}});var Ca=B(ms=>{"use strict";d();Object.defineProperty(ms,"__esModule",{value:!0});ms.ROOT_DB_KEY=void 0;var kb=cr();ms.ROOT_DB_KEY=(0,kb.utf8ToBytes)("__root__")});var Gl=B(Bs=>{"use strict";d();Object.defineProperty(Bs,"__esModule",{value:!0});Bs._walkTrie=void 0;var Ub=Ur(),Pa=Sr(),Hb=ds(),qb=ps();async function*ka(t,e=[],r=async(s,o)=>{},n=async(s,o)=>!0,i=new Set){if(!(0,Pa.equalsBytes)(t,this.EMPTY_TRIE_ROOT))try{let s=await this.lookupNode(t);if(s===void 0||i.has((0,Pa.toHex)(this.hash(s.serialize()))))return;if(i.add((0,Pa.toHex)(this.hash(s.serialize()))),await r(s,e),await n(s,e)&&(yield{node:s,currentKey:e}),s instanceof Hb.BranchNode)for(let[o,a]of s._branches.entries()){let u=[...e,o],c=a instanceof Uint8Array?a:this.hash(Ub.RLP.encode(a));yield*ka.bind(this)(c,u,r,n,i)}else if(s instanceof qb.ExtensionNode){let o=s.value(),a=[...e,...s._nibbles];yield*ka.bind(this)(o,a,r,n,i)}}catch{return}}Bs._walkTrie=ka});var Ua=B((MB,Vl)=>{d();Vl.exports=Yi().EventEmitter});var Ha=B(()=>{d()});var Xl=B((GB,Zl)=>{"use strict";d();function $l(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function zl(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?$l(Object(r),!0).forEach(function(n){Mb(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):$l(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Mb(t,e,r){return e=Yl(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Fb(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Wl(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,Yl(n.key),n)}}function jb(t,e,r){return e&&Wl(t.prototype,e),r&&Wl(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function Yl(t){var e=Db(t,"string");return typeof e=="symbol"?e:String(e)}function Db(t,e){if(typeof t!="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Kb=en(),xs=Kb.Buffer,Gb=Ha(),qa=Gb.inspect,Vb=qa&&qa.custom||"inspect";function $b(t,e,r){xs.prototype.copy.call(t,e,r)}Zl.exports=(function(){function t(){Fb(this,t),this.head=null,this.tail=null,this.length=0}return jb(t,[{key:"push",value:function(r){var n={data:r,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length}},{key:"unshift",value:function(r){var n={data:r,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length}},{key:"shift",value:function(){if(this.length!==0){var r=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,r}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(r){if(this.length===0)return"";for(var n=this.head,i=""+n.data;n=n.next;)i+=r+n.data;return i}},{key:"concat",value:function(r){if(this.length===0)return xs.alloc(0);for(var n=xs.allocUnsafe(r>>>0),i=this.head,s=0;i;)$b(i.data,n,s),s+=i.data.length,i=i.next;return n}},{key:"consume",value:function(r,n){var i;return r<this.head.data.length?(i=this.head.data.slice(0,r),this.head.data=this.head.data.slice(r)):r===this.head.data.length?i=this.shift():i=n?this._getString(r):this._getBuffer(r),i}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(r){var n=this.head,i=1,s=n.data;for(r-=s.length;n=n.next;){var o=n.data,a=r>o.length?o.length:r;if(a===o.length?s+=o:s+=o.slice(0,r),r-=a,r===0){a===o.length?(++i,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=o.slice(a));break}++i}return this.length-=i,s}},{key:"_getBuffer",value:function(r){var n=xs.allocUnsafe(r),i=this.head,s=1;for(i.data.copy(n),r-=i.data.length;i=i.next;){var o=i.data,a=r>o.length?o.length:r;if(o.copy(n,n.length-r,0,a),r-=a,r===0){a===o.length?(++s,i.next?this.head=i.next:this.head=this.tail=null):(this.head=i,i.data=o.slice(a));break}++s}return this.length-=s,n}},{key:Vb,value:function(r,n){return qa(this,zl(zl({},n),{},{depth:0,customInspect:!1}))}}]),t})()});var Fa=B(($B,Jl)=>{"use strict";d();function zb(t,e){var r=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?(e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(Ma,this,t)):process.nextTick(Ma,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(s){!e&&s?r._writableState?r._writableState.errorEmitted?process.nextTick(Ts,r):(r._writableState.errorEmitted=!0,process.nextTick(Ql,r,s)):process.nextTick(Ql,r,s):e?(process.nextTick(Ts,r),e(s)):process.nextTick(Ts,r)}),this)}function Ql(t,e){Ma(t,e),Ts(t)}function Ts(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function Wb(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function Ma(t,e){t.emit("error",e)}function Yb(t,e){var r=t._readableState,n=t._writableState;r&&r.autoDestroy||n&&n.autoDestroy?t.destroy(e):t.emit("error",e)}Jl.exports={destroy:zb,undestroy:Wb,errorOrDestroy:Yb}});var qr=B((WB,rh)=>{"use strict";d();function Zb(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var th={};function ct(t,e,r){r||(r=Error);function n(s,o,a){return typeof e=="string"?e:e(s,o,a)}var i=(function(s){Zb(o,s);function o(a,u,c){return s.call(this,n(a,u,c))||this}return o})(r);i.prototype.name=r.name,i.prototype.code=t,th[t]=i}function eh(t,e){if(Array.isArray(t)){var r=t.length;return t=t.map(function(n){return String(n)}),r>2?"one of ".concat(e," ").concat(t.slice(0,r-1).join(", "),", or ")+t[r-1]:r===2?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}else return"of ".concat(e," ").concat(String(t))}function Xb(t,e,r){return t.substr(!r||r<0?0:+r,e.length)===e}function Qb(t,e,r){return(r===void 0||r>t.length)&&(r=t.length),t.substring(r-e.length,r)===e}function Jb(t,e,r){return typeof r!="number"&&(r=0),r+e.length>t.length?!1:t.indexOf(e,r)!==-1}ct("ERR_INVALID_OPT_VALUE",function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'},TypeError);ct("ERR_INVALID_ARG_TYPE",function(t,e,r){var n;typeof e=="string"&&Xb(e,"not ")?(n="must not be",e=e.replace(/^not /,"")):n="must be";var i;if(Qb(t," argument"))i="The ".concat(t," ").concat(n," ").concat(eh(e,"type"));else{var s=Jb(t,".")?"property":"argument";i='The "'.concat(t,'" ').concat(s," ").concat(n," ").concat(eh(e,"type"))}return i+=". Received type ".concat(typeof r),i},TypeError);ct("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");ct("ERR_METHOD_NOT_IMPLEMENTED",function(t){return"The "+t+" method is not implemented"});ct("ERR_STREAM_PREMATURE_CLOSE","Premature close");ct("ERR_STREAM_DESTROYED",function(t){return"Cannot call "+t+" after a stream was destroyed"});ct("ERR_MULTIPLE_CALLBACK","Callback called multiple times");ct("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");ct("ERR_STREAM_WRITE_AFTER_END","write after end");ct("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);ct("ERR_UNKNOWN_ENCODING",function(t){return"Unknown encoding: "+t},TypeError);ct("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");rh.exports.codes=th});var ja=B((ZB,nh)=>{"use strict";d();var ew=qr().codes.ERR_INVALID_OPT_VALUE;function tw(t,e,r){return t.highWaterMark!=null?t.highWaterMark:e?t[r]:null}function rw(t,e,r,n){var i=tw(e,n,r);if(i!=null){if(!(isFinite(i)&&Math.floor(i)===i)||i<0){var s=n?r:"highWaterMark";throw new ew(s,i)}return Math.floor(i)}return t.objectMode?16:16*1024}nh.exports={getHighWaterMark:rw}});var In=B((QB,Da)=>{d();typeof Object.create=="function"?Da.exports=function(e,r){r&&(e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:Da.exports=function(e,r){if(r){e.super_=r;var n=function(){};n.prototype=r.prototype,e.prototype=new n,e.prototype.constructor=e}}});var sh=B((ex,ih)=>{d();ih.exports=nw;function nw(t,e){if(Ka("noDeprecation"))return t;var r=!1;function n(){if(!r){if(Ka("throwDeprecation"))throw new Error(e);Ka("traceDeprecation")?console.trace(e):console.warn(e),r=!0}return t.apply(this,arguments)}return n}function Ka(t){try{if(!window.localStorage)return!1}catch{return!1}var e=window.localStorage[t];return e==null?!1:String(e).toLowerCase()==="true"}});var $a=B((rx,lh)=>{"use strict";d();lh.exports=de;function ah(t){var e=this;this.next=null,this.entry=null,this.finish=function(){Nw(e,t)}}var Sn;de.WritableState=ni;var iw={deprecate:sh()},uh=Ua(),Is=en().Buffer,sw=(typeof window!="undefined"||typeof window!="undefined"?window:typeof self!="undefined"?self:{}).Uint8Array||function(){};function ow(t){return Is.from(t)}function aw(t){return Is.isBuffer(t)||t instanceof sw}var Va=Fa(),uw=ja(),cw=uw.getHighWaterMark,pr=qr().codes,fw=pr.ERR_INVALID_ARG_TYPE,lw=pr.ERR_METHOD_NOT_IMPLEMENTED,hw=pr.ERR_MULTIPLE_CALLBACK,dw=pr.ERR_STREAM_CANNOT_PIPE,yw=pr.ERR_STREAM_DESTROYED,gw=pr.ERR_STREAM_NULL_VALUES,pw=pr.ERR_STREAM_WRITE_AFTER_END,bw=pr.ERR_UNKNOWN_ENCODING,An=Va.errorOrDestroy;In()(de,uh);function ww(){}function ni(t,e,r){Sn=Sn||Mr(),t=t||{},typeof r!="boolean"&&(r=e instanceof Sn),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=cw(this,t,"writableHighWaterMark",r),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var n=t.decodeStrings===!1;this.decodeStrings=!n,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(i){vw(e,i)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=t.emitClose!==!1,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new ah(this)}ni.prototype.getBuffer=function(){for(var e=this.bufferedRequest,r=[];e;)r.push(e),e=e.next;return r};(function(){try{Object.defineProperty(ni.prototype,"buffer",{get:iw.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var vs;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(vs=Function.prototype[Symbol.hasInstance],Object.defineProperty(de,Symbol.hasInstance,{value:function(e){return vs.call(this,e)?!0:this!==de?!1:e&&e._writableState instanceof ni}})):vs=function(e){return e instanceof this};function de(t){Sn=Sn||Mr();var e=this instanceof Sn;if(!e&&!vs.call(de,this))return new de(t);this._writableState=new ni(t,this,e),this.writable=!0,t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final)),uh.call(this)}de.prototype.pipe=function(){An(this,new dw)};function _w(t,e){var r=new pw;An(t,r),process.nextTick(e,r)}function Ew(t,e,r,n){var i;return r===null?i=new gw:typeof r!="string"&&!e.objectMode&&(i=new fw("chunk",["string","Buffer"],r)),i?(An(t,i),process.nextTick(n,i),!1):!0}de.prototype.write=function(t,e,r){var n=this._writableState,i=!1,s=!n.objectMode&&aw(t);return s&&!Is.isBuffer(t)&&(t=ow(t)),typeof e=="function"&&(r=e,e=null),s?e="buffer":e||(e=n.defaultEncoding),typeof r!="function"&&(r=ww),n.ending?_w(this,r):(s||Ew(this,n,t,r))&&(n.pendingcb++,i=Bw(this,n,s,t,e,r)),i};de.prototype.cork=function(){this._writableState.corked++};de.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,!t.writing&&!t.corked&&!t.bufferProcessing&&t.bufferedRequest&&ch(this,t))};de.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new bw(e);return this._writableState.defaultEncoding=e,this};Object.defineProperty(de.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function mw(t,e,r){return!t.objectMode&&t.decodeStrings!==!1&&typeof e=="string"&&(e=Is.from(e,r)),e}Object.defineProperty(de.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function Bw(t,e,r,n,i,s){if(!r){var o=mw(e,n,i);n!==o&&(r=!0,i="buffer",n=o)}var a=e.objectMode?1:n.length;e.length+=a;var u=e.length<e.highWaterMark;if(u||(e.needDrain=!0),e.writing||e.corked){var c=e.lastBufferedRequest;e.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:s,next:null},c?c.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else Ga(t,e,!1,a,n,i,s);return u}function Ga(t,e,r,n,i,s,o){e.writelen=n,e.writecb=o,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new yw("write")):r?t._writev(i,e.onwrite):t._write(i,s,e.onwrite),e.sync=!1}function xw(t,e,r,n,i){--e.pendingcb,r?(process.nextTick(i,n),process.nextTick(ri,t,e),t._writableState.errorEmitted=!0,An(t,n)):(i(n),t._writableState.errorEmitted=!0,An(t,n),ri(t,e))}function Tw(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function vw(t,e){var r=t._writableState,n=r.sync,i=r.writecb;if(typeof i!="function")throw new hw;if(Tw(r),e)xw(t,r,n,e,i);else{var s=fh(r)||t.destroyed;!s&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&ch(t,r),n?process.nextTick(oh,t,r,s,i):oh(t,r,s,i)}}function oh(t,e,r,n){r||Iw(t,e),e.pendingcb--,n(),ri(t,e)}function Iw(t,e){e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function ch(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var n=e.bufferedRequestCount,i=new Array(n),s=e.corkedRequestsFree;s.entry=r;for(var o=0,a=!0;r;)i[o]=r,r.isBuf||(a=!1),r=r.next,o+=1;i.allBuffers=a,Ga(t,e,!0,e.length,i,"",s.finish),e.pendingcb++,e.lastBufferedRequest=null,s.next?(e.corkedRequestsFree=s.next,s.next=null):e.corkedRequestsFree=new ah(e),e.bufferedRequestCount=0}else{for(;r;){var u=r.chunk,c=r.encoding,l=r.callback,f=e.objectMode?1:u.length;if(Ga(t,e,!1,f,u,c,l),r=r.next,e.bufferedRequestCount--,e.writing)break}r===null&&(e.lastBufferedRequest=null)}e.bufferedRequest=r,e.bufferProcessing=!1}de.prototype._write=function(t,e,r){r(new lw("_write()"))};de.prototype._writev=null;de.prototype.end=function(t,e,r){var n=this._writableState;return typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null),t!=null&&this.write(t,e),n.corked&&(n.corked=1,this.uncork()),n.ending||Rw(this,n,r),this};Object.defineProperty(de.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function fh(t){return t.ending&&t.length===0&&t.bufferedRequest===null&&!t.finished&&!t.writing}function Sw(t,e){t._final(function(r){e.pendingcb--,r&&An(t,r),e.prefinished=!0,t.emit("prefinish"),ri(t,e)})}function Aw(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"&&!e.destroyed?(e.pendingcb++,e.finalCalled=!0,process.nextTick(Sw,t,e)):(e.prefinished=!0,t.emit("prefinish")))}function ri(t,e){var r=fh(e);if(r&&(Aw(t,e),e.pendingcb===0&&(e.finished=!0,t.emit("finish"),e.autoDestroy))){var n=t._readableState;(!n||n.autoDestroy&&n.endEmitted)&&t.destroy()}return r}function Rw(t,e,r){e.ending=!0,ri(t,e),r&&(e.finished?process.nextTick(r):t.once("finish",r)),e.ended=!0,t.writable=!1}function Nw(t,e,r){var n=t.entry;for(t.entry=null;n;){var i=n.callback;e.pendingcb--,i(r),n=n.next}e.corkedRequestsFree.next=t}Object.defineProperty(de.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}});de.prototype.destroy=Va.destroy;de.prototype._undestroy=Va.undestroy;de.prototype._destroy=function(t,e){e(t)}});var Mr=B((ix,dh)=>{"use strict";d();var Lw=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e};dh.exports=Ut;var hh=Ya(),Wa=$a();In()(Ut,hh);for(za=Lw(Wa.prototype),Ss=0;Ss<za.length;Ss++)As=za[Ss],Ut.prototype[As]||(Ut.prototype[As]=Wa.prototype[As]);var za,As,Ss;function Ut(t){if(!(this instanceof Ut))return new Ut(t);hh.call(this,t),Wa.call(this,t),this.allowHalfOpen=!0,t&&(t.readable===!1&&(this.readable=!1),t.writable===!1&&(this.writable=!1),t.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",Ow)))}Object.defineProperty(Ut.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});Object.defineProperty(Ut.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(Ut.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function Ow(){this._writableState.ended||process.nextTick(Cw,this)}function Cw(t){t.end()}Object.defineProperty(Ut.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(e){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=e,this._writableState.destroyed=e)}})});var ph=B((Za,gh)=>{d();var Rs=en(),Ht=Rs.Buffer;function yh(t,e){for(var r in t)e[r]=t[r]}Ht.from&&Ht.alloc&&Ht.allocUnsafe&&Ht.allocUnsafeSlow?gh.exports=Rs:(yh(Rs,Za),Za.Buffer=Fr);function Fr(t,e,r){return Ht(t,e,r)}Fr.prototype=Object.create(Ht.prototype);yh(Ht,Fr);Fr.from=function(t,e,r){if(typeof t=="number")throw new TypeError("Argument must not be a number");return Ht(t,e,r)};Fr.alloc=function(t,e,r){if(typeof t!="number")throw new TypeError("Argument must be a number");var n=Ht(t);return e!==void 0?typeof r=="string"?n.fill(e,r):n.fill(e):n.fill(0),n};Fr.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return Ht(t)};Fr.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return Rs.SlowBuffer(t)}});var Ja=B(wh=>{"use strict";d();var Qa=ph().Buffer,bh=Qa.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function Pw(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function kw(t){var e=Pw(t);if(typeof e!="string"&&(Qa.isEncoding===bh||!bh(t)))throw new Error("Unknown encoding: "+t);return e||t}wh.StringDecoder=ii;function ii(t){this.encoding=kw(t);var e;switch(this.encoding){case"utf16le":this.text=jw,this.end=Dw,e=4;break;case"utf8":this.fillLast=qw,e=4;break;case"base64":this.text=Kw,this.end=Gw,e=3;break;default:this.write=Vw,this.end=$w;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=Qa.allocUnsafe(e)}ii.prototype.write=function(t){if(t.length===0)return"";var e,r;if(this.lastNeed){if(e=this.fillLast(t),e===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""};ii.prototype.end=Fw;ii.prototype.text=Mw;ii.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};function Xa(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function Uw(t,e,r){var n=e.length-1;if(n<r)return 0;var i=Xa(e[n]);return i>=0?(i>0&&(t.lastNeed=i-1),i):--n<r||i===-2?0:(i=Xa(e[n]),i>=0?(i>0&&(t.lastNeed=i-2),i):--n<r||i===-2?0:(i=Xa(e[n]),i>=0?(i>0&&(i===2?i=0:t.lastNeed=i-3),i):0))}function Hw(t,e,r){if((e[0]&192)!==128)return t.lastNeed=0,"\uFFFD";if(t.lastNeed>1&&e.length>1){if((e[1]&192)!==128)return t.lastNeed=1,"\uFFFD";if(t.lastNeed>2&&e.length>2&&(e[2]&192)!==128)return t.lastNeed=2,"\uFFFD"}}function qw(t){var e=this.lastTotal-this.lastNeed,r=Hw(this,t,e);if(r!==void 0)return r;if(this.lastNeed<=t.length)return t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,e,0,t.length),this.lastNeed-=t.length}function Mw(t,e){var r=Uw(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)}function Fw(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"\uFFFD":e}function jw(t,e){if((t.length-e)%2===0){var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function Dw(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function Kw(t,e){var r=(t.length-e)%3;return r===0?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function Gw(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function Vw(t){return t.toString(this.encoding)}function $w(t){return t&&t.length?this.write(t):""}});var Ns=B((cx,mh)=>{"use strict";d();var _h=qr().codes.ERR_STREAM_PREMATURE_CLOSE;function zw(t){var e=!1;return function(){if(!e){e=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];t.apply(this,n)}}}function Ww(){}function Yw(t){return t.setHeader&&typeof t.abort=="function"}function Eh(t,e,r){if(typeof e=="function")return Eh(t,null,e);e||(e={}),r=zw(r||Ww);var n=e.readable||e.readable!==!1&&t.readable,i=e.writable||e.writable!==!1&&t.writable,s=function(){t.writable||a()},o=t._writableState&&t._writableState.finished,a=function(){i=!1,o=!0,n||r.call(t)},u=t._readableState&&t._readableState.endEmitted,c=function(){n=!1,u=!0,i||r.call(t)},l=function(E){r.call(t,E)},f=function(){var E;if(n&&!u)return(!t._readableState||!t._readableState.ended)&&(E=new _h),r.call(t,E);if(i&&!o)return(!t._writableState||!t._writableState.ended)&&(E=new _h),r.call(t,E)},b=function(){t.req.on("finish",a)};return Yw(t)?(t.on("complete",a),t.on("abort",f),t.req?b():t.on("request",b)):i&&!t._writableState&&(t.on("end",s),t.on("close",s)),t.on("end",c),t.on("finish",a),e.error!==!1&&t.on("error",l),t.on("close",f),function(){t.removeListener("complete",a),t.removeListener("abort",f),t.removeListener("request",b),t.req&&t.req.removeListener("finish",a),t.removeListener("end",s),t.removeListener("close",s),t.removeListener("finish",a),t.removeListener("end",c),t.removeListener("error",l),t.removeListener("close",f)}}mh.exports=Eh});var xh=B((lx,Bh)=>{"use strict";d();var Ls;function br(t,e,r){return e=Zw(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Zw(t){var e=Xw(t,"string");return typeof e=="symbol"?e:String(e)}function Xw(t,e){if(typeof t!="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Qw=Ns(),wr=Symbol("lastResolve"),jr=Symbol("lastReject"),si=Symbol("error"),Os=Symbol("ended"),Dr=Symbol("lastPromise"),eu=Symbol("handlePromise"),Kr=Symbol("stream");function _r(t,e){return{value:t,done:e}}function Jw(t){var e=t[wr];if(e!==null){var r=t[Kr].read();r!==null&&(t[Dr]=null,t[wr]=null,t[jr]=null,e(_r(r,!1)))}}function e_(t){process.nextTick(Jw,t)}function t_(t,e){return function(r,n){t.then(function(){if(e[Os]){r(_r(void 0,!0));return}e[eu](r,n)},n)}}var r_=Object.getPrototypeOf(function(){}),n_=Object.setPrototypeOf((Ls={get stream(){return this[Kr]},next:function(){var e=this,r=this[si];if(r!==null)return Promise.reject(r);if(this[Os])return Promise.resolve(_r(void 0,!0));if(this[Kr].destroyed)return new Promise(function(o,a){process.nextTick(function(){e[si]?a(e[si]):o(_r(void 0,!0))})});var n=this[Dr],i;if(n)i=new Promise(t_(n,this));else{var s=this[Kr].read();if(s!==null)return Promise.resolve(_r(s,!1));i=new Promise(this[eu])}return this[Dr]=i,i}},br(Ls,Symbol.asyncIterator,function(){return this}),br(Ls,"return",function(){var e=this;return new Promise(function(r,n){e[Kr].destroy(null,function(i){if(i){n(i);return}r(_r(void 0,!0))})})}),Ls),r_),i_=function(e){var r,n=Object.create(n_,(r={},br(r,Kr,{value:e,writable:!0}),br(r,wr,{value:null,writable:!0}),br(r,jr,{value:null,writable:!0}),br(r,si,{value:null,writable:!0}),br(r,Os,{value:e._readableState.endEmitted,writable:!0}),br(r,eu,{value:function(s,o){var a=n[Kr].read();a?(n[Dr]=null,n[wr]=null,n[jr]=null,s(_r(a,!1))):(n[wr]=s,n[jr]=o)},writable:!0}),r));return n[Dr]=null,Qw(e,function(i){if(i&&i.code!=="ERR_STREAM_PREMATURE_CLOSE"){var s=n[jr];s!==null&&(n[Dr]=null,n[wr]=null,n[jr]=null,s(i)),n[si]=i;return}var o=n[wr];o!==null&&(n[Dr]=null,n[wr]=null,n[jr]=null,o(_r(void 0,!0))),n[Os]=!0}),e.on("readable",e_.bind(null,n)),n};Bh.exports=i_});var vh=B((dx,Th)=>{d();Th.exports=function(){throw new Error("Readable.from is not available in the browser")}});var Ya=B((px,kh)=>{"use strict";d();kh.exports=z;var Rn;z.ReadableState=Rh;var gx=Yi().EventEmitter,Ah=function(e,r){return e.listeners(r).length},ai=Ua(),Cs=en().Buffer,s_=(typeof window!="undefined"||typeof window!="undefined"?window:typeof self!="undefined"?self:{}).Uint8Array||function(){};function o_(t){return Cs.from(t)}function a_(t){return Cs.isBuffer(t)||t instanceof s_}var tu=Ha(),G;tu&&tu.debuglog?G=tu.debuglog("stream"):G=function(){};var u_=Xl(),uu=Fa(),c_=ja(),f_=c_.getHighWaterMark,Ps=qr().codes,l_=Ps.ERR_INVALID_ARG_TYPE,h_=Ps.ERR_STREAM_PUSH_AFTER_EOF,d_=Ps.ERR_METHOD_NOT_IMPLEMENTED,y_=Ps.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,Nn,ru,nu;In()(z,ai);var oi=uu.errorOrDestroy,iu=["error","close","destroy","pause","resume"];function g_(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):Array.isArray(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}function Rh(t,e,r){Rn=Rn||Mr(),t=t||{},typeof r!="boolean"&&(r=e instanceof Rn),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=f_(this,t,"readableHighWaterMark",r),this.buffer=new u_,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=t.emitClose!==!1,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(Nn||(Nn=Ja().StringDecoder),this.decoder=new Nn(t.encoding),this.encoding=t.encoding)}function z(t){if(Rn=Rn||Mr(),!(this instanceof z))return new z(t);var e=this instanceof Rn;this._readableState=new Rh(t,this,e),this.readable=!0,t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy)),ai.call(this)}Object.defineProperty(z.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}});z.prototype.destroy=uu.destroy;z.prototype._undestroy=uu.undestroy;z.prototype._destroy=function(t,e){e(t)};z.prototype.push=function(t,e){var r=this._readableState,n;return r.objectMode?n=!0:typeof t=="string"&&(e=e||r.defaultEncoding,e!==r.encoding&&(t=Cs.from(t,e),e=""),n=!0),Nh(this,t,e,!1,n)};z.prototype.unshift=function(t){return Nh(this,t,null,!0,!1)};function Nh(t,e,r,n,i){G("readableAddChunk",e);var s=t._readableState;if(e===null)s.reading=!1,w_(t,s);else{var o;if(i||(o=p_(s,e)),o)oi(t,o);else if(s.objectMode||e&&e.length>0)if(typeof e!="string"&&!s.objectMode&&Object.getPrototypeOf(e)!==Cs.prototype&&(e=o_(e)),n)s.endEmitted?oi(t,new y_):su(t,s,e,!0);else if(s.ended)oi(t,new h_);else{if(s.destroyed)return!1;s.reading=!1,s.decoder&&!r?(e=s.decoder.write(e),s.objectMode||e.length!==0?su(t,s,e,!1):au(t,s)):su(t,s,e,!1)}else n||(s.reading=!1,au(t,s))}return!s.ended&&(s.length<s.highWaterMark||s.length===0)}function su(t,e,r,n){e.flowing&&e.length===0&&!e.sync?(e.awaitDrain=0,t.emit("data",r)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&ks(t)),au(t,e)}function p_(t,e){var r;return!a_(e)&&typeof e!="string"&&e!==void 0&&!t.objectMode&&(r=new l_("chunk",["string","Buffer","Uint8Array"],e)),r}z.prototype.isPaused=function(){return this._readableState.flowing===!1};z.prototype.setEncoding=function(t){Nn||(Nn=Ja().StringDecoder);var e=new Nn(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,n="";r!==null;)n+=e.write(r.data),r=r.next;return this._readableState.buffer.clear(),n!==""&&this._readableState.buffer.push(n),this._readableState.length=n.length,this};var Ih=1073741824;function b_(t){return t>=Ih?t=Ih:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function Sh(t,e){return t<=0||e.length===0&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=b_(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}z.prototype.read=function(t){G("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(t!==0&&(e.emittedReadable=!1),t===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return G("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?ou(this):ks(this),null;if(t=Sh(t,e),t===0&&e.ended)return e.length===0&&ou(this),null;var n=e.needReadable;G("need readable",n),(e.length===0||e.length-t<e.highWaterMark)&&(n=!0,G("length less than watermark",n)),e.ended||e.reading?(n=!1,G("reading or ended",n)):n&&(G("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=Sh(r,e)));var i;return t>0?i=Ch(t,e):i=null,i===null?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.awaitDrain=0),e.length===0&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&ou(this)),i!==null&&this.emit("data",i),i};function w_(t,e){if(G("onEofChunk"),!e.ended){if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e.sync?ks(t):(e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,Lh(t)))}}function ks(t){var e=t._readableState;G("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(G("emitReadable",e.flowing),e.emittedReadable=!0,process.nextTick(Lh,t))}function Lh(t){var e=t._readableState;G("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&(e.length||e.ended)&&(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,cu(t)}function au(t,e){e.readingMore||(e.readingMore=!0,process.nextTick(__,t,e))}function __(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){var r=e.length;if(G("maybeReadMore read 0"),t.read(0),r===e.length)break}e.readingMore=!1}z.prototype._read=function(t){oi(this,new d_("_read()"))};z.prototype.pipe=function(t,e){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=t;break;case 1:n.pipes=[n.pipes,t];break;default:n.pipes.push(t);break}n.pipesCount+=1,G("pipe count=%d opts=%j",n.pipesCount,e);var i=(!e||e.end!==!1)&&t!==process.stdout&&t!==process.stderr,s=i?a:g;n.endEmitted?process.nextTick(s):r.once("end",s),t.on("unpipe",o);function o(_,p){G("onunpipe"),_===r&&p&&p.hasUnpiped===!1&&(p.hasUnpiped=!0,l())}function a(){G("onend"),t.end()}var u=E_(r);t.on("drain",u);var c=!1;function l(){G("cleanup"),t.removeListener("close",y),t.removeListener("finish",E),t.removeListener("drain",u),t.removeListener("error",b),t.removeListener("unpipe",o),r.removeListener("end",a),r.removeListener("end",g),r.removeListener("data",f),c=!0,n.awaitDrain&&(!t._writableState||t._writableState.needDrain)&&u()}r.on("data",f);function f(_){G("ondata");var p=t.write(_);G("dest.write",p),p===!1&&((n.pipesCount===1&&n.pipes===t||n.pipesCount>1&&Ph(n.pipes,t)!==-1)&&!c&&(G("false write response, pause",n.awaitDrain),n.awaitDrain++),r.pause())}function b(_){G("onerror",_),g(),t.removeListener("error",b),Ah(t,"error")===0&&oi(t,_)}g_(t,"error",b);function y(){t.removeListener("finish",E),g()}t.once("close",y);function E(){G("onfinish"),t.removeListener("close",y),g()}t.once("finish",E);function g(){G("unpipe"),r.unpipe(t)}return t.emit("pipe",r),n.flowing||(G("pipe resume"),r.resume()),t};function E_(t){return function(){var r=t._readableState;G("pipeOnDrain",r.awaitDrain),r.awaitDrain&&r.awaitDrain--,r.awaitDrain===0&&Ah(t,"data")&&(r.flowing=!0,cu(t))}}z.prototype.unpipe=function(t){var e=this._readableState,r={hasUnpiped:!1};if(e.pipesCount===0)return this;if(e.pipesCount===1)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,r),this);if(!t){var n=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var s=0;s<i;s++)n[s].emit("unpipe",this,{hasUnpiped:!1});return this}var o=Ph(e.pipes,t);return o===-1?this:(e.pipes.splice(o,1),e.pipesCount-=1,e.pipesCount===1&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,r),this)};z.prototype.on=function(t,e){var r=ai.prototype.on.call(this,t,e),n=this._readableState;return t==="data"?(n.readableListening=this.listenerCount("readable")>0,n.flowing!==!1&&this.resume()):t==="readable"&&!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,G("on readable",n.length,n.reading),n.length?ks(this):n.reading||process.nextTick(m_,this)),r};z.prototype.addListener=z.prototype.on;z.prototype.removeListener=function(t,e){var r=ai.prototype.removeListener.call(this,t,e);return t==="readable"&&process.nextTick(Oh,this),r};z.prototype.removeAllListeners=function(t){var e=ai.prototype.removeAllListeners.apply(this,arguments);return(t==="readable"||t===void 0)&&process.nextTick(Oh,this),e};function Oh(t){var e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&!e.paused?e.flowing=!0:t.listenerCount("data")>0&&t.resume()}function m_(t){G("readable nexttick read 0"),t.read(0)}z.prototype.resume=function(){var t=this._readableState;return t.flowing||(G("resume"),t.flowing=!t.readableListening,B_(this,t)),t.paused=!1,this};function B_(t,e){e.resumeScheduled||(e.resumeScheduled=!0,process.nextTick(x_,t,e))}function x_(t,e){G("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),cu(t),e.flowing&&!e.reading&&t.read(0)}z.prototype.pause=function(){return G("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(G("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function cu(t){var e=t._readableState;for(G("flow",e.flowing);e.flowing&&t.read()!==null;);}z.prototype.wrap=function(t){var e=this,r=this._readableState,n=!1;t.on("end",function(){if(G("wrapped end"),r.decoder&&!r.ended){var o=r.decoder.end();o&&o.length&&e.push(o)}e.push(null)}),t.on("data",function(o){if(G("wrapped data"),r.decoder&&(o=r.decoder.write(o)),!(r.objectMode&&o==null)&&!(!r.objectMode&&(!o||!o.length))){var a=e.push(o);a||(n=!0,t.pause())}});for(var i in t)this[i]===void 0&&typeof t[i]=="function"&&(this[i]=(function(a){return function(){return t[a].apply(t,arguments)}})(i));for(var s=0;s<iu.length;s++)t.on(iu[s],this.emit.bind(this,iu[s]));return this._read=function(o){G("wrapped _read",o),n&&(n=!1,t.resume())},this};typeof Symbol=="function"&&(z.prototype[Symbol.asyncIterator]=function(){return ru===void 0&&(ru=xh()),ru(this)});Object.defineProperty(z.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});Object.defineProperty(z.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}});Object.defineProperty(z.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}});z._fromList=Ch;Object.defineProperty(z.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function Ch(t,e){if(e.length===0)return null;var r;return e.objectMode?r=e.buffer.shift():!t||t>=e.length?(e.decoder?r=e.buffer.join(""):e.buffer.length===1?r=e.buffer.first():r=e.buffer.concat(e.length),e.buffer.clear()):r=e.buffer.consume(t,e.decoder),r}function ou(t){var e=t._readableState;G("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,process.nextTick(T_,e,t))}function T_(t,e){if(G("endReadableNT",t.endEmitted,t.length),!t.endEmitted&&t.length===0&&(t.endEmitted=!0,e.readable=!1,e.emit("end"),t.autoDestroy)){var r=e._writableState;(!r||r.autoDestroy&&r.finished)&&e.destroy()}}typeof Symbol=="function"&&(z.from=function(t,e){return nu===void 0&&(nu=vh()),nu(z,t,e)});function Ph(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}});var fu=B((wx,Hh)=>{"use strict";d();Hh.exports=zt;var Us=qr().codes,v_=Us.ERR_METHOD_NOT_IMPLEMENTED,I_=Us.ERR_MULTIPLE_CALLBACK,S_=Us.ERR_TRANSFORM_ALREADY_TRANSFORMING,A_=Us.ERR_TRANSFORM_WITH_LENGTH_0,Hs=Mr();In()(zt,Hs);function R_(t,e){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(n===null)return this.emit("error",new I_);r.writechunk=null,r.writecb=null,e!=null&&this.push(e),n(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function zt(t){if(!(this instanceof zt))return new zt(t);Hs.call(this,t),this._transformState={afterTransform:R_.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",N_)}function N_(){var t=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(e,r){Uh(t,e,r)}):Uh(this,null,null)}zt.prototype.push=function(t,e){return this._transformState.needTransform=!1,Hs.prototype.push.call(this,t,e)};zt.prototype._transform=function(t,e,r){r(new v_("_transform()"))};zt.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}};zt.prototype._read=function(t){var e=this._transformState;e.writechunk!==null&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};zt.prototype._destroy=function(t,e){Hs.prototype._destroy.call(this,t,function(r){e(r)})};function Uh(t,e,r){if(e)return t.emit("error",e);if(r!=null&&t.push(r),t._writableState.length)throw new A_;if(t._transformState.transforming)throw new S_;return t.push(null)}});var Fh=B((Ex,Mh)=>{"use strict";d();Mh.exports=ui;var qh=fu();In()(ui,qh);function ui(t){if(!(this instanceof ui))return new ui(t);qh.call(this,t)}ui.prototype._transform=function(t,e,r){r(null,t)}});var Vh=B((Bx,Gh)=>{"use strict";d();var lu;function L_(t){var e=!1;return function(){e||(e=!0,t.apply(void 0,arguments))}}var Kh=qr().codes,O_=Kh.ERR_MISSING_ARGS,C_=Kh.ERR_STREAM_DESTROYED;function jh(t){if(t)throw t}function P_(t){return t.setHeader&&typeof t.abort=="function"}function k_(t,e,r,n){n=L_(n);var i=!1;t.on("close",function(){i=!0}),lu===void 0&&(lu=Ns()),lu(t,{readable:e,writable:r},function(o){if(o)return n(o);i=!0,n()});var s=!1;return function(o){if(!i&&!s){if(s=!0,P_(t))return t.abort();if(typeof t.destroy=="function")return t.destroy();n(o||new C_("pipe"))}}}function Dh(t){t()}function U_(t,e){return t.pipe(e)}function H_(t){return!t.length||typeof t[t.length-1]!="function"?jh:t.pop()}function q_(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=H_(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new O_("streams");var i,s=e.map(function(o,a){var u=a<e.length-1,c=a>0;return k_(o,u,c,function(l){i||(i=l),l&&s.forEach(Dh),!u&&(s.forEach(Dh),n(i))})});return e.reduce(U_)}Gh.exports=q_});var zh=B((ft,$h)=>{d();ft=$h.exports=Ya();ft.Stream=ft;ft.Readable=ft;ft.Writable=$a();ft.Duplex=Mr();ft.Transform=fu();ft.PassThrough=Fh();ft.finished=Ns();ft.pipeline=Vh()});var du=B(qs=>{"use strict";d();Object.defineProperty(qs,"__esModule",{value:!0});qs.TrieReadStream=void 0;var M_=zh(),Wh=Bn(),F_=mn(),j_=async(t,e)=>{let r=async(n,i,s,o)=>{let a=s;i instanceof Wh.LeafNode?(a=s.concat(i.key()),e(n,i,a,o)):i instanceof Wh.BranchNode&&i.value()?e(n,i,a,o):i!==null&&o.allChildren(i,s)};await t.walkTrie(t.root(),r)},hu=class extends M_.Readable{constructor(e){super({objectMode:!0}),this.trie=e,this._started=!1}async _read(){if(!this._started){this._started=!0;try{await j_(this.trie,async(e,r,n,i)=>{r!==null&&(this.push({key:(0,F_.nibblestoBytes)(n),value:r.value()}),i.allChildren(r,n))})}catch(e){if(e.message!=="Missing node in DB")throw e}this.push(null)}}};qs.TrieReadStream=hu});var gu=B(Ms=>{"use strict";d();Object.defineProperty(Ms,"__esModule",{value:!0});Ms.PrioritizedTaskExecutor=void 0;var yu=class{constructor(e){this.maxPoolSize=e,this.currentPoolSize=0,this.queue=[]}executeOrQueue(e,r){this.currentPoolSize<this.maxPoolSize?(this.currentPoolSize++,r(()=>{if(this.currentPoolSize--,this.queue.length>0){this.queue.sort((i,s)=>s.priority-i.priority);let n=this.queue.shift();this.executeOrQueue(n.priority,n.fn)}})):this.queue.push({priority:e,fn:r})}finished(){return this.currentPoolSize===0}};Ms.PrioritizedTaskExecutor=yu});var bu=B(js=>{"use strict";d();Object.defineProperty(js,"__esModule",{value:!0});js.WalkController=void 0;var Fs=Bn(),D_=gu(),pu=class t{constructor(e,r,n){this.onNode=e,this.taskExecutor=new D_.PrioritizedTaskExecutor(n),this.trie=r,this.resolve=()=>{},this.reject=()=>{}}static async newWalk(e,r,n,i){await new t(e,r,i!=null?i:500).startWalk(n)}async startWalk(e){return new Promise(async(r,n)=>{this.resolve=r,this.reject=n;let i;try{i=await this.trie.lookupNode(e)}catch(s){return this.reject(s)}this.processNode(e,i,[])})}allChildren(e,r=[]){if(e instanceof Fs.LeafNode)return;let n;if(e instanceof Fs.ExtensionNode?n=[[e.key(),e.value()]]:e instanceof Fs.BranchNode&&(n=e.getChildren().map(i=>[[i[0]],i[1]])),!!n)for(let i of n){let s=i[0],o=i[1],a=r.concat(s),u=a.length;this.pushNodeToQueue(o,a,u)}}pushNodeToQueue(e,r=[],n){this.taskExecutor.executeOrQueue(n!=null?n:r.length,async i=>{let s;try{s=await this.trie.lookupNode(e)}catch(o){return this.reject(o)}i(),this.processNode(e,s,r)})}onlyBranchIndex(e,r=[],n,i){if(!(e instanceof Fs.BranchNode))throw new Error("Expected branch node");let s=e.getBranch(n);if(!s)throw new Error("Could not get branch of childIndex");let o=r.slice();o.push(n);let a=i!=null?i:o.length;this.pushNodeToQueue(s,o,a)}processNode(e,r,n=[]){this.onNode(e,r,n,this),this.taskExecutor.finished()&&this.resolve()}};js.WalkController=pu});var Gs=B(Ks=>{"use strict";d();Object.defineProperty(Ks,"__esModule",{value:!0});Ks.Trie=void 0;var Yh=Ur(),L=cr(),K_=Kl(),Ds=$n(),Zh=Ba(),W=Bn(),Xh=_u(),Gr=Ca(),G_=Gl(),it=mn(),V_=du(),$_=bu(),wu=class t{constructor(e){var n,i,s,o,a,u,c,l;this._opts={useKeyHashing:!1,useKeyHashingFunction:Ds.keccak256,keyPrefix:void 0,useRootPersistence:!1,useNodePruning:!1,cacheSize:0,valueEncoding:L.ValueEncoding.String},this._lock=new L.Lock,this._debug=(0,K_.default)("trie"),this.walkTrieIterable=G_._walkTrie.bind(this);let r;if(e!==void 0){if((e==null?void 0:e.valueEncoding)!==void 0&&e.db===void 0)throw new Error("`valueEncoding` can only be set if a `db` is provided");this._opts={...this._opts,...e},this._opts.useKeyHashingFunction=(s=(i=(n=e.common)==null?void 0:n.customCrypto.keccak256)!=null?i:e.useKeyHashingFunction)!=null?s:Ds.keccak256,r=e.db!==void 0?(o=e.valueEncoding)!=null?o:L.ValueEncoding.String:L.ValueEncoding.Bytes}else r=L.ValueEncoding.Bytes;this.DEBUG=typeof window=="undefined"&&(c=(u=(a=process==null?void 0:process.env)==null?void 0:a.DEBUG)==null?void 0:u.includes("ethjs"))!=null?c:!1,this.debug=this.DEBUG?(f,b=[])=>{let y=this._debug;for(let E of b)y=y.extend(E);y(f)}:(...f)=>{},this.database((l=e==null?void 0:e.db)!=null?l:new L.MapDB,r),this.EMPTY_TRIE_ROOT=this.hash(L.RLP_EMPTY_STRING),this._hashLen=this.EMPTY_TRIE_ROOT.length,this._root=this.EMPTY_TRIE_ROOT,e!=null&&e.root&&this.root(e.root),this.DEBUG&&this.debug(`Trie created:
    || Root: ${(0,L.bytesToHex)(this.root())}
    || Secure: ${this._opts.useKeyHashing}
    || Persistent: ${this._opts.useRootPersistence}
    || Pruning: ${this._opts.useNodePruning}
    || CacheSize: ${this._opts.cacheSize}
    || ----------------`)}static async createFromProof(e,r,n=!1){let i=new t(r),s=await i.updateFromProof(e,n);return i.root(s),await i.persistRoot(),i}static async verifyProof(e,r,n){try{return await(await t.createFromProof(r,n)).get(e,!0)}catch{throw new Error("Invalid proof provided")}}static verifyRangeProof(e,r,n,i,s,o,a){var u;return(0,Xh.verifyRangeProof)(e,r&&(0,it.bytesToNibbles)(r),n&&(0,it.bytesToNibbles)(n),i.map(c=>c).map(it.bytesToNibbles),s,o,(u=a==null?void 0:a.useKeyHashingFunction)!=null?u:Ds.keccak256)}static async fromProof(e,r){let n=await t.create(r);if(r!=null&&r.root&&!(0,L.equalsBytes)(r.root,n.hash(e[0])))throw new Error("Invalid proof provided");let i=await n.updateFromProof(e);return n.root(i),await n.persistRoot(),n}verifyRangeProof(e,r,n,i,s,o){return(0,Xh.verifyRangeProof)(e,r&&(0,it.bytesToNibbles)(this.appliedKey(r)),n&&(0,it.bytesToNibbles)(this.appliedKey(n)),i.map(a=>this.appliedKey(a)).map(it.bytesToNibbles),s,o,this._opts.useKeyHashingFunction)}async createProof(e){this.DEBUG&&this.debug(`Creating Proof for Key: ${(0,L.bytesToHex)(e)}`,["CREATE_PROOF"]);let{stack:r}=await this.findPath(this.appliedKey(e)),n=r.map(i=>i.serialize());return this.DEBUG&&this.debug(`Proof created with (${r.length}) nodes`,["CREATE_PROOF"]),n}async updateFromProof(e,r=!1){this.DEBUG&&this.debug(`Saving (${e.length}) proof nodes in DB`,["FROM_PROOF"]);let n=e.map(i=>{let s=Uint8Array.from(this.hash(i));return s=this._opts.keyPrefix?(0,L.concatBytes)(this._opts.keyPrefix,s):s,{type:"put",key:s,value:i}});if(r&&n[0]!==void 0&&n[0]!==null&&!(0,L.equalsBytes)(this.root(),n[0].key))throw new Error("The provided proof does not have the expected trie root");if(await this._db.batch(n),n[0]!==void 0)return n[0].key}async verifyProof(e,r,n){this.DEBUG&&this.debug(`Verifying Proof:
|| Key: ${(0,L.bytesToHex)(r)}
|| Root: ${(0,L.bytesToHex)(e)}
|| Proof: (${n.length}) nodes
    `,["VERIFY_PROOF"]);let i=new t({root:e,useKeyHashingFunction:this._opts.useKeyHashingFunction,common:this._opts.common});try{await i.updateFromProof(n,!0)}catch{throw new Error("Invalid proof nodes given")}try{this.DEBUG&&this.debug(`Verifying proof by retrieving key: ${(0,L.bytesToHex)(r)} from proof trie`,["VERIFY_PROOF"]);let s=await i.get(this.appliedKey(r),!0);return this.DEBUG&&this.debug("PROOF VERIFIED",["VERIFY_PROOF"]),s}catch(s){throw s.message==="Missing node in DB"?new Error("Invalid proof provided"):s}}async fromProof(e){if(await this.updateFromProof(e,!1),(0,L.equalsBytes)(this.root(),this.EMPTY_TRIE_ROOT)&&e[0]!==void 0){let r=Uint8Array.from(this.hash(e[0]));r=this._opts.keyPrefix?(0,L.concatBytes)(this._opts.keyPrefix,r):r,this.root(r),await this.persistRoot()}}static async create(e){var s,o,a;let r=(a=(o=(s=e==null?void 0:e.common)==null?void 0:s.customCrypto.keccak256)!=null?o:e==null?void 0:e.useKeyHashingFunction)!=null?a:Ds.keccak256,n=Gr.ROOT_DB_KEY,i=(e==null?void 0:e.valueEncoding)===L.ValueEncoding.Bytes?L.ValueEncoding.Bytes:L.ValueEncoding.String;if((e==null?void 0:e.useKeyHashing)===!0&&(n=r.call(void 0,Gr.ROOT_DB_KEY)),(e==null?void 0:e.keyPrefix)!==void 0&&(n=(0,L.concatBytes)(e.keyPrefix,n)),(e==null?void 0:e.db)!==void 0&&(e==null?void 0:e.useRootPersistence)===!0)if((e==null?void 0:e.root)===void 0){let u=await(e==null?void 0:e.db.get((0,L.bytesToUnprefixedHex)(n),{keyEncoding:L.KeyEncoding.String,valueEncoding:i}));typeof u=="string"?e.root=(0,L.unprefixedHexToBytes)(u):e.root=u}else await(e==null?void 0:e.db.put((0,L.bytesToUnprefixedHex)(n),i===L.ValueEncoding.Bytes?e.root:(0,L.bytesToUnprefixedHex)(e.root),{keyEncoding:L.KeyEncoding.String,valueEncoding:i}));return new t(e)}database(e,r){if(e!==void 0){if(e instanceof Zh.CheckpointDB)throw new Error("Cannot pass in an instance of CheckpointDB");this._db=new Zh.CheckpointDB({db:e,cacheSize:this._opts.cacheSize,valueEncoding:r})}return this._db}root(e){if(e!==void 0){if(e===null&&(e=this.EMPTY_TRIE_ROOT),this.DEBUG&&this.debug(`Setting root to ${(0,L.bytesToHex)(e)}`),e.length!==this._hashLen)throw new Error(`Invalid root length. Roots are ${this._hashLen} bytes, got ${e.length} bytes`);this._root=e}return this._root}async checkRoot(e){try{return await this.lookupNode(e)!==null}catch(r){if(r.message==="Missing node in DB")return(0,L.equalsBytes)(e,this.EMPTY_TRIE_ROOT);throw r}}async get(e,r=!1){this.DEBUG&&this.debug(`Key: ${(0,L.bytesToHex)(e)}`,["GET"]);let{node:n,remaining:i}=await this.findPath(this.appliedKey(e),r),s=null;return n&&i.length===0&&(s=n.value()),this.DEBUG&&this.debug(`Value: ${s===null?"null":(0,L.bytesToHex)(s)}`,["GET"]),s}async put(e,r,n=!1){if(this.DEBUG&&this.debug(`Key: ${(0,L.bytesToHex)(e)}`,["PUT"]),this.DEBUG&&this.debug(`Value: ${r===null?"null":(0,L.bytesToHex)(e)}`,["PUT"]),this._opts.useRootPersistence&&(0,L.equalsBytes)(e,Gr.ROOT_DB_KEY)===!0)throw new Error(`Attempted to set '${(0,L.bytesToUtf8)(Gr.ROOT_DB_KEY)}' key but it is not allowed.`);if(r===null||r.length===0)return this.del(e);await this._lock.acquire();let i=n?e:this.appliedKey(e);if((0,L.equalsBytes)(this.root(),this.EMPTY_TRIE_ROOT)===!0)await this._createInitialNode(i,r);else{let{remaining:s,stack:o}=await this.findPath(i),a=[];if(this._opts.useNodePruning){let u=await this.get(e);(u===null||(0,L.equalsBytes)(u,r)===!1)&&(a=o.map(l=>this.hash(l.serialize())).map(l=>({type:"del",key:this._opts.keyPrefix?(0,L.concatBytes)(this._opts.keyPrefix,l):l,opts:{keyEncoding:L.KeyEncoding.Bytes}})))}await this._updateNode(i,r,s,o),this._opts.useNodePruning&&await this._db.batch(a)}await this.persistRoot(),this._lock.release()}async del(e,r=!1){this.DEBUG&&this.debug(`Key: ${(0,L.bytesToHex)(e)}`,["DEL"]),await this._lock.acquire();let n=r?e:this.appliedKey(e),{node:i,stack:s}=await this.findPath(n),o=[];this._opts.useNodePruning&&i!==null&&(o=s.map(u=>this.hash(u.serialize())).map(u=>({type:"del",key:this._opts.keyPrefix?(0,L.concatBytes)(this._opts.keyPrefix,u):u,opts:{keyEncoding:L.KeyEncoding.Bytes}}))),i&&await this._deleteNode(n,s),this._opts.useNodePruning&&await this._db.batch(o),await this.persistRoot(),this._lock.release()}async findPath(e,r=!1,n={stack:[]}){let i=(0,it.bytesToNibbles)(e),s=i.length,o=Array.from({length:s}),a=0;for(let b=0;b<n.stack.length-1;b++)o[b]=n.stack[b],a+=o[b]instanceof W.BranchNode?1:o[b].keyLength();this.DEBUG&&this.debug(`Target (${i.length}): [${i}]`,["FIND_PATH"]);let u=null,c=async(b,y,E,g)=>{if(o[a]=y,y instanceof W.BranchNode)if(a===s)u={node:y,remaining:[],stack:o};else{let _=i[a];this.DEBUG&&this.debug(`Looking for node on branch index: [${_}]`,["FIND_PATH","BranchNode"]);let p=y.getBranch(_);this.DEBUG&&this.debug(p===null?"NULL":p instanceof Uint8Array?`NodeHash: ${(0,L.bytesToHex)(p)}`:`Raw_Node: ${p.toString()}`,["FIND_PATH","BranchNode",_.toString()]),p?(a++,g.onlyBranchIndex(y,E,_)):u={node:null,remaining:i.slice(a),stack:o}}else if(y instanceof W.LeafNode){let _=a;if(s-a>y.key().length){u={node:null,remaining:i.slice(_),stack:o};return}for(let p of y.key()){if(p!==i[a]){u={node:null,remaining:i.slice(_),stack:o};return}a++}u={node:y,remaining:[],stack:o}}else if(y instanceof W.ExtensionNode){this.DEBUG&&this.debug(`Comparing node key to expected
|| Node_Key: [${y.key()}]
|| Expected: [${i.slice(a,a+y.key().length)}]
|| Matching: [${i.slice(a,a+y.key().length).toString()===y.key().toString()}]
            `,["FIND_PATH","ExtensionNode"]);let _=a;for(let p of y.key()){if(this.DEBUG&&this.debug(`NextNode: ${y.value()}`,["FIND_PATH","ExtensionNode"]),p!==i[a]){u={node:null,remaining:i.slice(_),stack:o};return}a++}g.allChildren(y,E)}},l=n.stack[n.stack.length-1],f=l!==void 0?this.hash(l==null?void 0:l.serialize()):this.root();try{this.DEBUG&&this.debug(`Walking trie from ${l===void 0?"ROOT":"NODE"}: ${(0,L.bytesToHex)(f)}`,["FIND_PATH"]),await this.walkTrie(f,c)}catch(b){if(b.message!=="Missing node in DB"||r)throw b}return u===null&&(u={node:null,remaining:[],stack:o}),this.DEBUG&&this.debug(u.node!==null?`Target Node FOUND for ${(0,it.bytesToNibbles)(e)}`:"Target Node NOT FOUND",["FIND_PATH"]),u.stack=u.stack.filter(b=>b!==void 0),this.DEBUG&&this.debug(`Result:
        || Node: ${u.node===null?"null":u.node.constructor.name}
        || Remaining: [${u.remaining}]
|| Stack: ${u.stack.map(b=>b.constructor.name).join(", ")}`,["FIND_PATH"]),u}async walkTrie(e,r){await $_.WalkController.newWalk(r,this,e)}async walkAllNodes(e){for await(let{node:r,currentKey:n}of this.walkTrieIterable(this.root()))await e(r,n)}async walkAllValueNodes(e){for await(let{node:r,currentKey:n}of this.walkTrieIterable(this.root(),[],void 0,async i=>i instanceof W.LeafNode||i instanceof W.BranchNode&&i.value()!==null))await e(r,n)}async _createInitialNode(e,r){let i=new W.LeafNode((0,it.bytesToNibbles)(e),r).serialize();this.root(this.hash(i));let s=this.root();s=this._opts.keyPrefix?(0,L.concatBytes)(this._opts.keyPrefix,s):s,await this._db.put(s,i),await this.persistRoot()}async lookupNode(e){var s;if((0,W.isRawNode)(e)){let o=(0,W.decodeRawNode)(e);return this.DEBUG&&this.debug(`${o.constructor.name}`,["LOOKUP_NODE","RAW_NODE"]),o}this.DEBUG&&this.debug(`${`${(0,L.bytesToHex)(e)}`}`,["LOOKUP_NODE","BY_HASH"]);let r=this._opts.keyPrefix?(0,L.concatBytes)(this._opts.keyPrefix,e):e,n=(s=await this._db.get(r))!=null?s:null;if(n===null)throw new Error("Missing node in DB");let i=(0,W.decodeNode)(n);return this.DEBUG&&this.debug(`${i.constructor.name} found in DB`,["LOOKUP_NODE","BY_HASH"]),i}async _updateNode(e,r,n,i){let s=[],o=i.pop();if(!o)throw new Error("Stack underflow");let a=(0,it.bytesToNibbles)(e),u=!1;if(o instanceof W.LeafNode){let c=0;for(let l=0;l<i.length;l++){let f=i[l];f instanceof W.BranchNode?c++:c+=f.key().length}(0,it.matchingNibbleLength)(o.key(),a.slice(c))===o.key().length&&n.length===0&&(u=!0)}if(u)o.value(r),i.push(o);else if(o instanceof W.BranchNode)if(i.push(o),n.length!==0){n.shift();let c=new W.LeafNode(n,r);i.push(c)}else o.value(r);else{let c=o.key(),l=(0,it.matchingNibbleLength)(c,n),f=new W.BranchNode;if(l!==0){let b=o.key().slice(0,l),y=new W.ExtensionNode(b,r);i.push(y),c.splice(0,l),n.splice(0,l)}if(i.push(f),c.length!==0){let b=c.shift();if(c.length!==0||o instanceof W.LeafNode){o.key(c);let y=this._formatNode(o,!1,s);f.setBranch(b,y)}else this._formatNode(o,!1,s,!0),f.setBranch(b,o.value())}else f.value(o.value());if(n.length!==0){n.shift();let b=new W.LeafNode(n,r);i.push(b)}else f.value(r)}await this.saveStack(a,i,s)}async _deleteNode(e,r){let n=(c,l,f,b,y)=>{if(b==null||b instanceof W.BranchNode){if(b!=null&&y.push(b),f instanceof W.BranchNode){let E=new W.ExtensionNode([l],null);y.push(E),c.push(l)}else{let E=f.key();E.unshift(l),f.key(E.slice(0)),c=c.concat(E)}y.push(f)}else{let E=b.key();if(f instanceof W.BranchNode)E.push(l),c.push(l),b.key(E),y.push(b);else{let g=f.key();g.unshift(l),c=c.concat(g),E=E.concat(g),f.key(E)}y.push(f)}return c},i=r.pop();if(i===void 0)throw new Error("missing last node");let s=r.pop(),o=[],a=(0,it.bytesToNibbles)(e);if(!s){this.root(this.EMPTY_TRIE_ROOT);return}if(i instanceof W.BranchNode)i.value(null);else{if(!(s instanceof W.BranchNode))throw new Error("Expected branch node");let c=i.key();a.splice(a.length-c.length),this._formatNode(i,!1,o,!0),s.setBranch(a.pop(),null),i=s,s=r.pop()}let u=i.getChildren();if(u.length===1){let c=u[0][1],l=u[0][0];this._opts.useNodePruning&&o.push({type:"del",key:(0,W.isRawNode)(c)?this.appliedKey(Yh.RLP.encode(c)):c});let f=await this.lookupNode(c);a=n(a,l,f,s,r),await this.saveStack(a,r,o)}else s&&r.push(s),r.push(i),await this.saveStack(a,r,o)}async saveStack(e,r,n){let i;for(;r.length;){let s=r.pop();if(s===void 0)throw new Error("saveStack: missing node");if((s instanceof W.LeafNode||s instanceof W.ExtensionNode)&&e.splice(e.length-s.key().length),s instanceof W.ExtensionNode&&i!==void 0&&s.value(i),s instanceof W.BranchNode&&i!==void 0){let o=e.pop();s.setBranch(o,i)}i=this._formatNode(s,r.length===0,n)}i!==void 0&&this.root(i),await this._db.batch(n),await this.persistRoot()}_formatNode(e,r,n,i=!1){let s=e.serialize();if(s.length>=32||r){let o=this.hash(s),a=this._opts.keyPrefix?(0,L.concatBytes)(this._opts.keyPrefix,o):o;return i?this._opts.useNodePruning&&n.push({type:"del",key:a}):n.push({type:"put",key:a,value:s}),o}return e.raw()}async batch(e,r){for(let n of e)if(n.type==="put"){if(n.value===null||n.value===void 0)throw new Error("Invalid batch db operation");await this.put(n.key,n.value,r)}else n.type==="del"&&await this.del(n.key,r);await this.persistRoot()}async verifyPrunedIntegrity(){let e=[(0,L.bytesToUnprefixedHex)(this.root()),(0,L.bytesToUnprefixedHex)(this.appliedKey(Gr.ROOT_DB_KEY))];for(let r of this._db.db._database.keys()){if(e.includes(r))continue;let n=!1;try{await this.walkTrie(this.root(),async function(i,s,o,a){if(!n){if(s instanceof W.BranchNode){for(let u of s._branches)if(u!==null&&(0,L.bytesToUnprefixedHex)((0,W.isRawNode)(u)?a.trie.appliedKey(Yh.RLP.encode(u)):u)===r){n=!0;return}a.allChildren(s,o)}if(s instanceof W.ExtensionNode){if((0,L.bytesToUnprefixedHex)(s.value())===r){n=!0;return}a.allChildren(s,o)}}})}catch{return!1}if(!n)return!1}return!0}createReadStream(){return new V_.TrieReadStream(this)}shallowCopy(e=!0,r){let n=new t({...this._opts,db:this._db.db.shallowCopy(),root:this.root(),cacheSize:0,...r!=null?r:{}});return e&&this.hasCheckpoints()&&n._db.setCheckpoints(this._db.checkpoints),n}async persistRoot(){if(this._opts.useRootPersistence){this.DEBUG&&this.debug(`Persisting root: 
|| RootHash: ${(0,L.bytesToHex)(this.root())}
|| RootKey: ${(0,L.bytesToHex)(this.appliedKey(Gr.ROOT_DB_KEY))}`,["PERSIST_ROOT"]);let e=this.appliedKey(Gr.ROOT_DB_KEY);e=this._opts.keyPrefix?(0,L.concatBytes)(this._opts.keyPrefix,e):e,await this._db.put(e,this.root())}}async _findDbNodes(e){let r=async(n,i,s,o)=>{(0,W.isRawNode)(n)?i!==null&&o.allChildren(i,s):e(n,i,s,o)};await this.walkTrie(this.root(),r)}appliedKey(e){return this._opts.useKeyHashing?this.hash(e):e}hash(e){return Uint8Array.from(this._opts.useKeyHashingFunction.call(void 0,e))}hasCheckpoints(){return this._db.hasCheckpoints()}checkpoint(){this.DEBUG&&this.debug(`${(0,L.bytesToHex)(this.root())}`,["CHECKPOINT"]),this._db.checkpoint(this.root())}async commit(){if(!this.hasCheckpoints())throw new Error("trying to commit when not checkpointed");this.DEBUG&&this.debug(`${(0,L.bytesToHex)(this.root())}`,["COMMIT"]),await this._lock.acquire(),await this._db.commit(),await this.persistRoot(),this._lock.release()}async revert(){if(!this.hasCheckpoints())throw new Error("trying to revert when not checkpointed");this.DEBUG&&this.debug(`${(0,L.bytesToHex)(this.root())}`,["REVERT","BEFORE"]),await this._lock.acquire(),this.root(await this._db.revert()),await this.persistRoot(),this._lock.release(),this.DEBUG&&this.debug(`${(0,L.bytesToHex)(this.root())}`,["REVERT","AFTER"])}flushCheckpoints(){this.DEBUG&&this.debug(`Deleting ${this._db.checkpoints.length} checkpoints.`,["FLUSH_CHECKPOINTS"]),this._db.checkpoints=[]}};Ks.Trie=wu});var _u=B(Vs=>{"use strict";d();Object.defineProperty(Vs,"__esModule",{value:!0});Vs.verifyRangeProof=void 0;var ci=cr(),xe=Bn(),mu=Gs(),Oe=mn();async function Ln(t,e,r,n,i,s,o){if(r instanceof xe.BranchNode){if(s)for(let c=0;c<n[i];c++)r.setBranch(c,null);else for(let c=n[i]+1;c<16;c++)r.setBranch(c,null);o.push(r);let a=r.getBranch(n[i]),u=a&&await t.lookupNode(a);return Ln(t,r,u,n,i+1,s,o)}else if(r instanceof xe.ExtensionNode||r instanceof xe.LeafNode){if(n.length-i<r.keyLength()||(0,Oe.nibblesCompare)(r._nibbles,n.slice(i,i+r.keyLength()))!==0)return s?(0,Oe.nibblesCompare)(r._nibbles,n.slice(i))<0&&e.setBranch(n[i-1],null):(0,Oe.nibblesCompare)(r._nibbles,n.slice(i))>0&&e.setBranch(n[i-1],null),i-1;if(r instanceof xe.LeafNode)return e.setBranch(n[i-1],null),i-1;{let a=await t.lookupNode(r.value());return a instanceof xe.LeafNode?(e.setBranch(n[i-1],null),i-1):(o.push(r),Ln(t,r,a,n,i+r.keyLength(),s,o))}}else{if(r===null)return i-1;throw new Error("invalid node")}}async function z_(t,e,r){let n=0,i=null,s=await t.lookupNode(t.root()),o,a,u=[];for(;;)if(s instanceof xe.ExtensionNode||s instanceof xe.LeafNode){if(u.push(s),e.length-n<s.keyLength()?o=(0,Oe.nibblesCompare)(e.slice(n),s._nibbles):o=(0,Oe.nibblesCompare)(e.slice(n,n+s.keyLength()),s._nibbles),r.length-n<s.keyLength()?a=(0,Oe.nibblesCompare)(r.slice(n),s._nibbles):a=(0,Oe.nibblesCompare)(r.slice(n,n+s.keyLength()),s._nibbles),o!==0||a!==0)break;if(s instanceof xe.LeafNode)throw new Error("invalid node");i=s,n+=s.keyLength(),s=await t.lookupNode(s.value())}else if(s instanceof xe.BranchNode){u.push(s);let l=s.getBranch(e[n]),f=s.getBranch(r[n]);if(l===null||f===null)break;if(l instanceof Uint8Array){if(!(f instanceof Uint8Array)||!(0,ci.equalsBytes)(l,f))break}else{if(f instanceof Uint8Array||l.length!==f.length)break;let b=!1;for(let y=0;y<l.length;y++)if(!(0,ci.equalsBytes)(l[y],f[y])){b=!0;break}if(b)break}i=s,s=await t.lookupNode(l),n+=1}else throw new Error("invalid node");let c=(l,f)=>t.saveStack(l,f,[]);if(s instanceof xe.ExtensionNode||s instanceof xe.LeafNode){let l=async f=>i===null?!0:(u.pop(),i.setBranch(f[n-1],null),await c(f.slice(0,n-1),u),!1);if(o===-1&&a===-1)throw new Error("invalid range");if(o===1&&a===1)throw new Error("invalid range");if(o!==0&&a!==0)return l(e);if(a!==0){if(s instanceof xe.LeafNode)return l(e);let f=await t.lookupNode(s._value);if(f instanceof xe.LeafNode)return l(e);let b=await Ln(t,s,f,e.slice(n),s.keyLength(),!1,u);return await c(e.slice(0,n+b),u),!1}if(o!==0){if(s instanceof xe.LeafNode)return l(r);let f=await t.lookupNode(s._value);if(f instanceof xe.LeafNode)return l(r);let b=await Ln(t,s,f,r.slice(n),s.keyLength(),!0,u);return await c(r.slice(0,n+b),u),!1}return!1}else if(s instanceof xe.BranchNode){for(let l=e[n]+1;l<r[n];l++)s.setBranch(l,null);{let l=[...u],f=s.getBranch(e[n]),b=f&&await t.lookupNode(f),y=await Ln(t,s,b,e.slice(n),1,!1,l);await c(e.slice(0,n+y),l)}{let l=[...u],f=s.getBranch(r[n]),b=f&&await t.lookupNode(f),y=await Ln(t,s,b,r.slice(n),1,!0,l);await c(r.slice(0,n+y),l)}return!1}else throw new Error("invalid node")}async function Qh(t,e,r,n){let i=await mu.Trie.fromProof(r,{root:t,useKeyHashingFunction:n});try{let s=await i.get(e,!0);return{trie:i,value:s}}catch(s){throw s.message==="Missing node in DB"?new Error("Invalid proof provided"):s}}async function Eu(t,e){let r=0,n=await t.lookupNode(t.root());for(;n!==null;)if(n instanceof xe.BranchNode){for(let s=e[r]+1;s<16;s++)if(n.getBranch(s)!==null)return!0;let i=n.getBranch(e[r]);n=i&&await t.lookupNode(i),r+=1}else if(n instanceof xe.ExtensionNode){if(e.length-r<n.keyLength()||(0,Oe.nibblesCompare)(n._nibbles,e.slice(r,r+n.keyLength()))!==0)return(0,Oe.nibblesCompare)(n._nibbles,e.slice(r))>0;r+=n.keyLength(),n=await t.lookupNode(n._value)}else{if(n instanceof xe.LeafNode)return!1;throw new Error("invalid node")}return!1}async function W_(t,e,r,n,i,s,o){if(n.length!==i.length)throw new Error("invalid keys length or values length");for(let c=0;c<n.length-1;c++)if((0,Oe.nibblesCompare)(n[c],n[c+1])>=0)throw new Error("invalid keys order");for(let c of i)if(c.length===0)throw new Error("invalid values");if(s===null&&e===null&&r===null){let c=new mu.Trie({useKeyHashingFunction:o});for(let l=0;l<n.length;l++)await c.put((0,Oe.nibblestoBytes)(n[l]),i[l]);if(!(0,ci.equalsBytes)(t,c.root()))throw new Error("invalid all elements proof: root mismatch");return!1}if(s!==null&&e!==null&&r===null&&n.length===0){let{trie:c,value:l}=await Qh(t,(0,Oe.nibblestoBytes)(e),s,o);if(l!==null||await Eu(c,e))throw new Error("invalid zero element proof: value mismatch");return!1}if(s===null||e===null||r===null)throw new Error("invalid all elements proof: proof, firstKey, lastKey must be null at the same time");if(n.length===1&&(0,Oe.nibblesCompare)(e,r)===0){let{trie:c,value:l}=await Qh(t,(0,Oe.nibblestoBytes)(e),s,o);if((0,Oe.nibblesCompare)(e,n[0])!==0)throw new Error("invalid one element proof: firstKey should be equal to keys[0]");if(l===null||!(0,ci.equalsBytes)(l,i[0]))throw new Error("invalid one element proof: value mismatch");return Eu(c,e)}if((0,Oe.nibblesCompare)(e,r)>=0)throw new Error("invalid two edge elements proof: firstKey should be less than lastKey");if(e.length!==r.length)throw new Error("invalid two edge elements proof: the length of firstKey should be equal to the length of lastKey");let a=await mu.Trie.fromProof(s,{useKeyHashingFunction:o,root:t});await z_(a,e,r)&&a.root(a.EMPTY_TRIE_ROOT);for(let c=0;c<n.length;c++)await a.put((0,Oe.nibblestoBytes)(n[c]),i[c]);if(!(0,ci.equalsBytes)(a.root(),t))throw new Error("invalid two edge elements proof: root mismatch");return Eu(a,n[n.length-1])}Vs.verifyRangeProof=W_});var Jh=B(Vr=>{"use strict";d();var Y_=Vr&&Vr.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),Z_=Vr&&Vr.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&Y_(e,t,r)};Object.defineProperty(Vr,"__esModule",{value:!0});Z_(_u(),Vr)});var ed=B($=>{"use strict";d();Object.defineProperty($,"__esModule",{value:!0});$.mergeAndFormatKeyPaths=$.pathToHexKey=$.byteTypeToNibbleType=$.nibbleTypeToByteType=$.nibbleTypeToPackedBytes=$.compactBytesToNibbles=$.bytesToNibbles=$.nibblesToCompactBytes=$.hexToKeybytes=$.nibblesToBytes=$.hasTerminator=void 0;var $s=cr(),X_=t=>t.length>0&&t[t.length-1]===16;$.hasTerminator=X_;var Q_=(t,e)=>{for(let r=0,n=0;n<t.length;r+=1,n+=2)e[r]=t[n]<<4|t[n+1]};$.nibblesToBytes=Q_;var J_=t=>{if((0,$.hasTerminator)(t)&&(t=t.subarray(0,t.length-1)),t.length%2===1)throw Error("Can't convert hex key of odd length");let e=new Uint8Array(t.length/2);return(0,$.nibblesToBytes)(t,e),e};$.hexToKeybytes=J_;var eE=t=>{let e=0;(0,$.hasTerminator)(t)&&(e=1,t=t.subarray(0,t.length-1));let r=new Uint8Array(t.length/2+1);return r[0]=e<<5,(t.length&1)===1&&(r[0]|=16,r[0]|=t[0],t=t.subarray(1)),(0,$.nibblesToBytes)(t,r.subarray(1)),r};$.nibblesToCompactBytes=eE;var tE=t=>{let e=t.length*2+1,r=new Uint8Array(e);for(let n=0;n<t.length;n++){let i=t[n];r[n*2]=i/16,r[n*2+1]=i%16}return r[e-1]=16,r};$.bytesToNibbles=tE;var rE=t=>{if(t.length===0)return t;let e=(0,$.bytesToNibbles)(t);e[0]<2&&(e=e.subarray(0,e.length-1));let r=2-(e[0]&1);return e.subarray(r)};$.compactBytesToNibbles=rE;var nE=t=>{let e=new Uint8Array(t.length/2);for(let r=0;r<e.length;r++){let n=r*2;e[r]=(t[n]<<4)+t[++n]}return e};$.nibbleTypeToPackedBytes=nE;var iE=t=>{let e=t.length,r=new Uint8Array(e);for(let n=0;n<r.length;n++)r[n]=t[n];return r};$.nibbleTypeToByteType=iE;var sE=t=>{let e=(0,$s.toBytes)(t),r=[];for(let n=0;n<e.length;n++){let i=n;r[i]=e[n]%16}return r};$.byteTypeToNibbleType=sE;var oE=(t,e,r)=>{let n=(0,$s.hexToBytes)(`0x${t}`),i=(0,$.byteTypeToNibbleType)(n);if(r==="hex")return(0,$.nibbleTypeToByteType)(i.concat(e));if(r==="keybyte")return(0,$.nibbleTypeToPackedBytes)(i.concat(e));throw Error('retType must be either "keybyte" or "hex"')};$.pathToHexKey=oE;var aE=t=>{let e=[],r=[],n=0;for(;n<t.length;){let i=t[n].split("/"),s=i[0],o=i[1];r.push(s),o!==void 0&&r.push(o);let a=++n;for(;a<t.length;){let u=t[a].split("/"),c=u[0],l=u[1];if(c===s)r.push(l);else{e.push(r),r=[],n=a;break}a++}r.length>0&&(e.push(r),r=[])}return r.length>0&&e.push(r),e.map(i=>i.map(s=>s.length<64?(0,$.nibblesToCompactBytes)((0,$s.unprefixedHexToBytes)(s)):(0,$.hexToKeybytes)((0,$s.unprefixedHexToBytes)(s))))};$.mergeAndFormatKeyPaths=aE});var rd=B(zs=>{"use strict";d();Object.defineProperty(zs,"__esModule",{value:!0});zs.genesisStateRoot=void 0;var uE=Ur(),We=cr(),cE=$n(),td=Gs();async function fE(t){let e=new td.Trie({useKeyHashing:!0});for(let[r,n]of Object.entries(t)){let i=(0,We.isHexString)(r)?(0,We.hexToBytes)(r):(0,We.unprefixedHexToBytes)(r),s=new We.Account;if(typeof n=="string")s.balance=BigInt(n);else{let[o,a,u,c]=n;if(o!==void 0&&(s.balance=BigInt(o)),a!==void 0){let l=(0,We.isHexString)(a)?(0,We.hexToBytes)(a):(0,We.unprefixedHexToBytes)(a);s.codeHash=(0,cE.keccak256)(l)}if(u!==void 0){let l=new td.Trie({useKeyHashing:!0});for(let[f,b]of u){let y=(0,We.isHexString)(f)?(0,We.hexToBytes)(f):(0,We.unprefixedHexToBytes)(f),E=uE.RLP.encode((0,We.unpadBytes)((0,We.isHexString)(b)?(0,We.hexToBytes)(b):(0,We.unprefixedHexToBytes)(b)));await l.put(y,E)}s.storageRoot=l.root()}c!==void 0&&(s.nonce=BigInt(c))}await e.put(i,s.serialize())}return e.root()}zs.genesisStateRoot=fE});var nd=B(Tt=>{"use strict";d();var lE=Tt&&Tt.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),fi=Tt&&Tt.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&lE(e,t,r)};Object.defineProperty(Tt,"__esModule",{value:!0});fi(ed(),Tt);fi(rd(),Tt);fi(du(),Tt);fi(gu(),Tt);fi(bu(),Tt)});var dE=B(lt=>{d();var hE=lt&&lt.__createBinding||(Object.create?(function(t,e,r,n){n===void 0&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);(!i||("get"in i?!e.__esModule:i.writable||i.configurable))&&(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}):(function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]})),On=lt&&lt.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&hE(e,t,r)};Object.defineProperty(lt,"__esModule",{value:!0});On(Ba(),lt);On(Bn(),lt);On(Jh(),lt);On(Gs(),lt);On(Ca(),lt);On(nd(),lt)});return dE();})();
/*! Bundled license information:

ieee754/index.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

buffer/index.js:
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   *)

@noble/hashes/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/curves/abstract/utils.js:
@noble/curves/abstract/modular.js:
@noble/curves/abstract/curve.js:
@noble/curves/abstract/weierstrass.js:
@noble/curves/_shortw_utils.js:
@noble/curves/secp256k1.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)
*/
